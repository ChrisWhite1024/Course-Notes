# 本书回答的核心问题
操作系统使用哪些机制来虚拟资源
- 虚拟化：操作系统将物理资源转化为一种更普遍、更强大、更易用的虚拟形式，所以操作系统也可被称作虚拟机
- 操作系统提供可调用的 API 让用户可以利用虚拟机的功能，典型的操作系统提供几百种 system calls, 也可以称操作系统为应用程序提供了一个标准库（standard library）
- 操作系统也被称为资源管理器（resources manager）
# 虚拟化 CPU
操作系统在硬件的帮助下让一个 CPU 看起来像多个 CPU
# 虚拟化内存
- 每个进程访问自己的虚拟地址空间
- 物理内存是一种共享资源，由操作系统管理
# 并发
- 操作系统本身的并发
- 多线程程序的并发
	- 同一内存空间中存在并发执行的线程时怎样才能建立一个正确工作的程序？
- thread. c 中增加计数器的数值时要运行三条指令，将计数器的值从内存加载到寄存器中，将寄存器中的值增加，将增加后的值存回内存中，由于指令不是原子执行（atomically），会发生奇怪的事
# 持久性
- 硬件以 I/O 设备的形式出现
- 文件系统（file system）：操作系统中用于管理磁盘的软件
- 大多数文件系统使用复杂的写入协议，例如 journaling 或 copy-on-write，以便于故障恢复
# 设计目标
- 提供高性能
- 使操作系统的开销最小化
- 提供应用程序与应用程序、操作系统与应用程序之间的保护，保护（隔离 isolation）是操作系统主要原则的核心，进程隔离是保护的关键
- 提供高度的可靠性
# 发展历史
- 早期的操作系统：一组提供常用功能的库
- 对于库的超越：保护
	- 系统调用（system call ) 的想法被提出
	- 系统调用与过程调用（procedure call）的区别 ：系统调用将控制权转移到操作系统，同时提高硬件的权限级别，当系统调用开始时（通常通过 trap 这种特殊的硬件指令），系统转移控制器至 trap 处理程序，并将权限提高到内核模式（kernel mode），内核模式可以完全访问系统的硬件，操作系统完成对请求的服务时，通过 return-from-trap 指令将控制权转移回用户（应用程序离开的地方）
# 多进程时代


