<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Course-Notes]]></title><description><![CDATA[Obsidian digital garden]]></description><link>http://github.com/dylang/node-rss</link><image><url>lib/media/favicon.png</url><title>Course-Notes</title><link></link></image><generator>Webpage HTML Export plugin for Obsidian</generator><lastBuildDate>Thu, 07 Mar 2024 07:57:23 GMT</lastBuildDate><atom:link href="lib/rss.xml" rel="self" type="application/rss+xml"/><pubDate>Thu, 07 Mar 2024 07:57:13 GMT</pubDate><ttl>60</ttl><dc:creator></dc:creator><item><title><![CDATA[C++ Crash Course]]></title><description><![CDATA[ 
 <br><br><br>
<br>C++ ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°†æ–‡æœ¬æ–‡ä»¶ (Text File) è½¬å˜ä¸ºå¯¹è±¡æ–‡ä»¶ (Object File)ï¼Œéšåäº§ç”Ÿçš„å¯¹è±¡æ–‡ä»¶å†è¢«é“¾æ¥å™¨å¤„ç†
<br>åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šç»è¿‡å‡ ä¸ªè¿‡ç¨‹

<br>é¢„å¤„ç† (Pre-Process)ï¼šæ‰€æœ‰é¢„å¤„ç†è¯­å¥ (P-P Statement) è¢«è¯„ä¼° (Evaluate)ï¼ŒåŒ…æ‹¬ Include / Define / If / Ifdef / Pragma ç­‰
<br>æ ‡è®°è§£é‡Š (Tokenizing)
<br>è§£æ (Parsing)


<br>ç¼–è¯‘å™¨çš„å·¥ä½œæ˜¯æŠŠä»£ç è½¬æ¢ä¸ºå¸¸é‡æ•°æ® (Constant Data) æˆ–æŒ‡ä»¤ï¼Œå°†ä»£ç è½¬æ¢ä¸ºæŠ½è±¡è¯­æ³•æ ‘ (abstract syntax tree) çš„å½¢å¼
<br>å½“ç¼–è¯‘è¿‡ç¨‹å®Œæˆæ—¶ï¼Œç¼–è¯‘å™¨ä¸ºæ¯ä¸ªç¼–è¯‘å•å…ƒ (translation unit)ï¼Œä¹Ÿå°±æ˜¯å•ä¸ª .cpp æ–‡ä»¶ (å®é™…ä¸Šä¸åç¼€åæ— å…³ï¼Œæ–‡ä»¶åªæ˜¯ç”¨æ¥ç»™ç¼–è¯‘å™¨æä¾›æºç çš„æ–¹æ³•)ï¼Œç”Ÿæˆå¯¹åº”çš„å¯¹è±¡æ–‡ä»¶ 
<br>åœ¨ä¸€ä¸ª cpp æ–‡ä»¶ä¸­ include å¦ä¸€ä¸ª cpp æ–‡ä»¶å¾€å¾€åªæ˜¯ç”Ÿæˆäº†ä¸€å¤§çš„ cpp æ–‡ä»¶ï¼Œæ‰€ä»¥å…¶ä¸­ä¸€å…±åŒ…å« 1 ä¸ªç¼–è¯‘å•å…ƒåŒæ—¶åªä¼šç¼–è¯‘å‡ºä¸€ä¸ªå¯¹è±¡æ–‡ä»¶
<br><br>
<br>é¢„å¤„ç†å™¨æ‰“å¼€è¢« include çš„æ–‡ä»¶ï¼Œè¯»å–æ‰€æœ‰å†…å®¹å¹¶ç²˜è´´æ›¿æ¢æ‰å†™ include çš„è¯­å¥
<br>ä»£ç ç¤ºä¾‹
<br>.
â”œâ”€â”€ EndBrace.h
â”œâ”€â”€ Log.cpp
â”œâ”€â”€ Math.cpp
â”œâ”€â”€ main.cpp
â””â”€â”€ rooster.dSYM
Copy<br>// EndBrace.h
}
Copy<br>// Math.cpp
int Multiply(int a, int b) {
    int result = a * b;
    return result;
#include "EndBrace.h"
Copy<br>&gt; g++ -c Math.cpp # æˆåŠŸç¼–è¯‘
&gt; g++ -E Math.cpp # ç¼–è¯‘å™¨åªæ‰§è¡Œé¢„å¤„ç†è¿‡ç¨‹
# 0 "Math.cpp"
# 0 "&lt;built-in&gt;"
# 0 "&lt;command-line&gt;"
# 1 "Math.cpp"
int Multiply(int a, int b) {
    int result = a * b;
    return result;
# 1 "EndBrace.h" 1
}                 # å®é™…ä¸Šåªæ˜¯æŠŠ "}" ç²˜è´´åˆ° #include "EndBrace.h" çš„ä½ç½®
# 5 "Math.cpp" 2
Copy<br>// changed Math.cpp
#define INTEGER int
 INTEGER Multiply(int a, int b) {
    INTEGER result = a * b;
    return result;
}
Copy<br>&gt; g++ -E Math.cpp # åœ¨ç»è¿‡é¢„å¤„ç†åå°†æ‰€æœ‰çš„ INTEGET æ›¿æ¢ä¸ºäº† int
# 0 "Math.cpp"
# 0 "&lt;built-in&gt;"
# 0 "&lt;command-line&gt;"
# 1 "Math.cpp"

 int Multiply(int a, int b) {
    int result = a * b;
    return result;
}
Copy<br>// changed Math.cpp
#if 1
int Multiply(int a, int b) {
	int result = a * b;
	return result;
}
#endif
Copy<br>&gt; g++ -E Math.cpp
# 0 "Math.cpp"
# 0 "&lt;built-in&gt;"
# 0 "&lt;command-line&gt;"
# 1 "Math.cpp"

int Multiply(int a, int b) {
 int result = a * b;
 return result;
}
Copy<br>// changed Math.cpp
#if 0
int Multiply(int a, int b) {
	int result = a * b;
	return result;
}
#endif
Copy<br>&gt; g++ -E Math.cpp
# 0 "Math.cpp"
# 0 "&lt;built-in&gt;"
# 0 "&lt;command-line&gt;"
# 1 "Math.cpp"
Copy<br>
<br>ä¸ºä»€ä¹ˆåŒ…å«äº† &lt;iostream&gt; å¤´æ–‡ä»¶ç¼–è¯‘åå¾—åˆ°çš„å¯¹è±¡æ–‡ä»¶ä¼šè¿™ä¹ˆå¤§ï¼šç¼–è¯‘å™¨å‘åŸæ–‡ä»¶å†…æ’å…¥äº† iostream ä¸­ (åŒ…æ‹¬ iostream ä¸­ include) çš„ä»£ç  (ä¸‰ä¸‡å¤šè¡Œ) <img alt="Pasted image 20231202214923.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231202214923.png">
<br>// changed Math.cpp
#include &lt;iostream&gt;
int Multiply(int a, int b) {
	int result = a * b;
	return result;
}
Copy<br>&gt; g++-13 -E Math.cpp &gt;&gt; output
Copy<br><img alt="Pasted image 20231202220808.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231202220808.png"><br><br>
<br>åœ¨ M1 Pro Chip ä¸Šç”Ÿæˆçš„ armv 8-a æŒ‡ä»¤é›†çš„ä»£ç 
<br>int Multiply(int a, int b) {
	int result = a * b;
	return result;
}
Copy<br>&gt; g++-13 -S Math.cpp 
Copy<br>	.arch armv8-a
	.text
	.align	2
	.globl __Z8Multiplyii
__Z8Multiplyii:
LFB0:
	sub	sp, sp, #32
LCFI0:
	str	w0, [sp, 12]
	str	w1, [sp, 8]
	ldr	w1, [sp, 12]
	ldr	w0, [sp, 8]
	mul	w0, w1, w0
	str	w0, [sp, 28]
	ldr	w0, [sp, 28]
	add	sp, sp, 32
LCFI1:
	ret
LFE0:
	.section __TEXT,__eh_frame,coalesced,no_toc+strip_static_syms+live_support
EH_frame1:
	.set L$set$0,LECIE1-LSCIE1
	.long L$set$0
LSCIE1:
	.long	0
	.byte	0x1
	.ascii "zR\0"
	.uleb128 0x1
	.sleb128 -8
	.byte	0x1e
	.uleb128 0x1
	.byte	0x10
	.byte	0xc
	.uleb128 0x1f
	.uleb128 0
	.align	3
LECIE1:
LSFDE1:
	.set L$set$1,LEFDE1-LASFDE1
	.long L$set$1
LASFDE1:
	.long	LASFDE1-EH_frame1
	.quad	LFB0-.
	.set L$set$2,LFE0-LFB0
	.quad L$set$2
	.uleb128 0
	.byte	0x4
	.set L$set$3,LCFI0-LFB0
	.long L$set$3
	.byte	0xe
	.uleb128 0x20
	.byte	0x4
	.set L$set$4,LCFI1-LCFI0
	.long L$set$4
	.byte	0xe
	.uleb128 0
	.align	3
LEFDE1:
	.ident	"GCC: (Homebrew GCC 13.2.0) 13.2.0"
	.subsections_via_symbols
Copy<br><br>
<br>æ‰¾åˆ°æ¯ä¸ªå‡½æ•° (function) å’Œç¬¦å· (symbol) çš„ä½ç½®ï¼Œå¹¶æŠŠå®ƒä»¬é“¾æ¥åˆ°ä¸€èµ·
<br>æ²¡æœ‰å¤–éƒ¨æ–‡ä»¶çš„å‡½æ•°æ—¶ï¼Œåº”ç”¨ç¨‹åºä»ç„¶éœ€è¦çŸ¥é“ entry point åœ¨å“ªé‡Œï¼ŒC è¿è¡Œæ—¶åº“éœ€è¦è°ƒç”¨ main å‡½æ•° (entry point ä¸ä¸€å®šæ˜¯ main å‡½æ•°ï¼Œä¾‹å¦‚ gcc å¯ä»¥é€šè¿‡ -e entry_point_function ä¿®æ”¹)ï¼Œæ‰€ä»¥ä»ç„¶éœ€è¦é“¾æ¥è¿‡ç¨‹
<br>// å½“ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„å¯¹è±¡æ–‡ä»¶æ²¡æœ‰ entry point æ—¶ï¼Œä¼šåœ¨é“¾æ¥é˜¶æ®µå‘ç”Ÿé”™è¯¯ 
#include &lt;iostream&gt;

void Log(const char* message) {
    std::cout &lt;&lt; message &lt;&lt; std::endl;
}

int Multiply(int a, int b) {
	int result = a * b;
	return result;
}
Copy<br>&gt; g++-13 Math.cpp
Undefined symbols for architecture arm64:
  "_main", referenced from:
     implicit entry/start for main executable
ld: symbol(s) not found for architecture arm64 # ld: GNU linker
collect2: error: ld returned 1 exit status
Copy<br>// å½“æºæ–‡ä»¶å…·æœ‰è¯­æ³•é”™è¯¯æ—¶ï¼Œä¼šåœ¨ç¼–è¯‘é˜¶æ®µå‘ç”Ÿé”™è¯¯
#include &lt;iostream&gt;

void Log(const char* message) {
    std::cout &lt;&lt; message &lt;&lt; std::endl;
}

int Multiply(int a, int b) {
	int result = a * b;
	return result // ç¼ºå°‘";"
}
Copy<br>&gt; g++-13 Math.cpp
Math.cpp: In function 'int Multiply(int, int)':
Math.cpp:9:22: error: expected ';' before '}' token
    9 |         return result
      |                      ^
      |                      ;
   10 | }
      | ~           
Copy<br>// ä¿®æ”¹ç¨‹åºæ·»åŠ  main å‡½æ•°åï¼Œåº”ç”¨ç”ŸæˆæˆåŠŸï¼Œ ä¸æŒ‡å®š -o åˆ™ç¨‹åºåç§°ä¸º a.out
#include &lt;iostream&gt;

void Log(const char* message) {
    std::cout &lt;&lt; message &lt;&lt; std::endl;
}

int Multiply(int a, int b) {
	int result = a * b;
	return result;
}

int main() {

}
Copy<br>
<br>çŸ¥é“è‡ªå·±çš„ç¨‹åºåœ¨ç¼–è¯‘é˜¶æ®µè¿˜æ˜¯é“¾æ¥é˜¶æ®µå‘ç”Ÿé”™è¯¯å¾ˆé‡è¦
<br><br>// Log.cpp
#include &lt;iostream&gt;

void Logrrrrrrrrrr(const char* message) {
    std::cout &lt;&lt; message &lt;&lt; std::endl;
}

// Math.cpp
#include &lt;iostream&gt;

void Log(const char* message);

static int Multiply(int a, int b) {
	Log("Multiply");
	return a * b;
}

int main() {
	//std::cout &lt;&lt; Multiply(5, 8) &lt;&lt; std::endl; // ç¨‹åºæ‰§è¡Œæµä¸­æ²¡æœ‰ç”¨åˆ° Multiply å’Œ Log ä¸éœ€è¦å»åˆ«çš„ç¼–è¯‘å•å…ƒä¸­å¯»æ‰¾ Log çš„å®šä¹‰
	std::cin.get();                             // å…¶ä»–çš„ç¼–è¯‘å•å…ƒä¹Ÿä¸ä¼šä½¿ç”¨ Multiply å‡½æ•°çš„å®šä¹‰
}
Copy<br>
<br>åœ¨å‡½æ•°å‰åŠ ä¸Š static è¯´æ˜å‡½æ•°åªæ˜¯ä¸ºå½“å‰çš„ç¼–è¯‘å•å…ƒå£°æ˜çš„ï¼Œæ‰€ä»¥å½“é“¾æ¥å™¨ç¡®ä¿å£°æ˜çš„å‡½æ•°ä¸ä¼šè¢«å½“å‰ç¼–è¯‘å•å…ƒä½¿ç”¨ï¼Œä¹Ÿä¸ä¼šè¢«å…¶ä»–ç¼–è¯‘å•å…ƒä½¿ç”¨æ—¶ï¼Œåœ¨é“¾æ¥çš„è¿‡ç¨‹ä¸­å°±ä¸ä¼šæŠ¥é”™
<br>å‡½æ•°çš„å£°æ˜éœ€è¦æ‰¾åˆ°ä¸€æ¨¡ä¸€æ ·çš„å‡½æ•°å®šä¹‰ï¼Œå½“å‡½æ•°å®šä¹‰çš„è¿”å›å€¼ç±»å‹å’Œå‚æ•°ç±»å‹ä¸å£°æ˜ä¸åŒæ—¶ï¼Œé“¾æ¥å°±ä¼šæŠ¥é”™
<br>å½“æœ‰ä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„å‡½æ•°å®šä¹‰æ—¶ï¼Œç‰¹åˆ«æ˜¯ä¸ªå‡½æ•°å®šä¹‰åœ¨å¤šä¸ª cpp æ–‡ä»¶ä¸­æ—¶ï¼Œå°±ä¼šå‘ç”Ÿé“¾æ¥é”™è¯¯
<br>// Log.h
void Log(const char* message) {
    std::cout &lt;&lt; message &lt;&lt; std::endl;
}

// Log.cpp
#include &lt;iostream&gt;
#include "Log.h"

void InitLog() {
	Log("Initialized Log")
}


// Math.cpp
#include &lt;iostream&gt;
#include &lt;"Log.h"&gt;

void Log(const char* message);

static int Multiply(int a, int b) {
	Log("Multiply");
	return a * b;
}

int main() {
	std::cout &lt;&lt; Multiply(5, 8) &lt;&lt; std::endl;
	std::cin.get(); 
}
Copy<br>(base) âœ  3.4ErrorsWarnings clang++ Log.cpp Math.cpp
duplicate symbol 'Log(char const*)' in:
    /var/folders/fm/bbrq4pn10y39tjf0pf97xm4h0000gn/T/Log-1d2c94.o
    /var/folders/fm/bbrq4pn10y39tjf0pf97xm4h0000gn/T/Math-cd0cae.o
ld: 1 duplicate symbol for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
Copy<br>
<br>ä¸¤ä¸ªæ–‡ä»¶ä¸­åœ¨æºæ–‡ä»¶ä¸­éƒ½åŒ…å«äº† Log çš„å®šä¹‰ï¼Œæ‰€ä»¥åœ¨é“¾æ¥æ—¶ä¼šæŠ¥é”™
<br>// Log.h
inline void Log(const char* message) {
    std::cout &lt;&lt; message &lt;&lt; std::endl;
}

// Log.cpp
#include &lt;iostream&gt;
#include "Log.h"

void InitLog() {
	// Log("Initialized Log") 
	std::cout &lt;&lt; "Initialized Log" &lt;&lt; std::endl;
}


// Math.cpp
#include &lt;iostream&gt;
#include &lt;"Log.h"&gt;

void Log(const char* message);

static int Multiply(int a, int b) {
	// Log("Multiply");
	std::cout &lt;&lt; "Multiply" &lt;&lt; std::endl;
	return a * b;
}

int main() {
	std::cout &lt;&lt; Multiply(5, 8) &lt;&lt; std::endl;
	std::cin.get(); 
}
Copy<br>
<br>ä½¿ç”¨ inline æ—¶å°†å‡½æ•°ä½“ç›´æ¥æ’å…¥åˆ°å‡½æ•°è°ƒç”¨ä¸­ï¼Œä¸éœ€è¦å»å¯»æ‰¾å‡½æ•°çš„å®šä¹‰æ‰€ä»¥å°±ä¸ä¼šäº§ç”Ÿé“¾æ¥é”™è¯¯
<br>å½“ç„¶ï¼Œå°†å‡½æ•°çš„å®šä¹‰ç§»åŠ¨åˆ°ç¬¬ä¸‰ä¸ªç¿»è¯‘ç¿»å…ƒä¸­ä¹ŸåŒæ ·å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜
<br><br>
<br>C++ä¸­å˜é‡ä¸»è¦å†³å®šäº†åˆ’åˆ†å­˜å‚¨ç©ºé—´çš„å¤§å° (ç”¨ sizeof() å‡½æ•°æ¥æŸ¥çœ‹)
<br>å¦‚æœå°æ•°åä¸åŠ "f"åˆ™æ˜¯ä¸€ä¸ª double ç±»å‹çš„æ•°æ®
<br>bool ç±»å‹çš„å˜é‡åªå æ®ä¸€ä¸ªå­—èŠ‚ï¼Œå› ä¸ºå†…å­˜çš„æœ€å°å¯»å€å•å…ƒæ˜¯ä¸€ä¸ªå­—èŠ‚ï¼Œå½“è¦å­˜å‚¨å¤šä¸ª bool å˜é‡æ—¶ï¼Œå¯ä»¥æ”¾åœ¨ä¸€ä¸ªå­—èŠ‚ä¸­
<br><br>
<br>åœ¨ Debug æ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸»å‡½æ•°ä¸ç”¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šè¿”å›å€¼ä¼šé»˜è®¤è¿”å› 0ï¼Œå…¶ä»–æœ‰è¿”å›ç±»å‹çš„å‡½æ•°éƒ½éœ€è¦æœ‰è¿”å›å€¼
<br>å°†å‡½æ•°åˆ†ä¸ºå£°æ˜å’Œå®šä¹‰ï¼Œé€šå¸¸å£°æ˜ä¼šå†™åœ¨å¤´æ–‡ä»¶é‡Œï¼Œå®šä¹‰ä¼šå†™åœ¨ç¼–è¯‘å•å…ƒé‡Œ
<br><br>
<br>å¤´æ–‡ä»¶é€šå¸¸ç”¨äºå£°æ˜æŸäº›å‡½æ•°ç±»å‹ï¼Œä»¥ä¾¿å¯ä»¥ç”¨äºæ•´ä¸ªç¨‹åºä¸­ï¼Œå› ä¸ºåœ¨åœ¨é“¾æ¥æ—¶æˆ‘ä»¬åªèƒ½å®šä¹‰ä¸€ä¸ªå‡½æ•°ä¸€æ¬¡ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªå…±åŒçš„åœ°æ–¹å­˜æ”¾å‡½æ•°å£°æ˜ï¼Œå‘Šè¯‰ç¼–è¯‘å•å…ƒè¿™ä¸ªå‡½æ•°å­˜åœ¨ï¼Œå°±ä¸éœ€è¦å°†å‡½æ•°å£°æ˜åˆ°å¤„å¤åˆ¶ç²˜è´´
<br>#pragma once æ„å‘³ç€ä¸€ä¸ªç¿»è¯‘å•å…ƒåªåŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶ä¸€æ¬¡
<br>// Common.h
#pragma once
#include "Log.h"

// Log.h
void InitLog();
void Log(const char* message);

struct Player {};

// Main.cpp
#include "Common.h"
#include "Log.h"

#include &lt;iostream&gt;

void InitLog() {
	Log("Initializing Log");
}

void Log(const char* message) {
	std::cout &lt;&lt; message &lt;&lt; std::endl;
}

int main()
{
	InitLog();
	return 0;
}
Copy<br>
<br>é¢„å¤„ç†åçš„ç¼–è¯‘å•å…ƒä¸­ struct å‡ºç°äº†ä¸¤æ¬¡
<br>......&lt;iostream&gt;

# 0 "main.cpp"
# 0 "&lt;built-in&gt;"
# 0 "&lt;command-line&gt;"
# 1 "main.cpp"
# 1 "Common.h" 1
       
# 1 "Log.h" 1
void InitLog();
void Log(const char* message);

struct Player {};
# 3 "Common.h" 2
# 2 "main.cpp" 2
# 1 "Log.h" 1
void InitLog();
void Log(const char* message);

struct Player {};
# 3 "main.cpp" 2



void InitLog() {
 Log("Initializing Log");
}

void Log(const char* message) {
 std::cout &lt;&lt; message &lt;&lt; std::endl;
}

int main()
{
 InitLog();
 return 0;
}
Copy<br>
<br>Log.h ä¸­åŠ å…¥ #pragma once åå¯ä»¥çœ‹åˆ°ç¬¬äºŒå¤„ struct å¹¶æ²¡æœ‰åœ¨é¢„ç¼–è¯‘æ—¶è¢«åŠ å…¥
<br># 0 "main.cpp"
# 0 "&lt;built-in&gt;"
# 0 "&lt;command-line&gt;"
# 1 "main.cpp"
# 1 "Common.h" 1
       
# 1 "Log.h" 1
       
void InitLog();
void Log(const char* message);

struct Player {};
# 3 "Common.h" 2
# 2 "main.cpp" 2




void InitLog() {
 Log("Initializing Log");
}

void Log(const char* message) {
 std::cout &lt;&lt; message &lt;&lt; std::endl;
}

int main()
{
 InitLog();
 return 0;
}
Copy<br>
<br>æ›´ä¼ ç»Ÿçš„å¤„ç†æ–¹æ³•æ˜¯ä½¿ç”¨ #if #endif
<br>#ifndef _LOG_H
#define _LOG_H

void InitLog();
void Log(const char* message);

struct Player {};

#endif
Copy<br>
<br>ç›¸å½“äºå°†æ–‡ä»¶ç²˜è´´åˆ°æºæ–‡ä»¶ä¸­ï¼Œå¦‚æœ_LOG_H è¢«å®šä¹‰äº†ï¼Œåˆ™ä¸ä¼šè¢«é‡å¤å®šä¹‰
<br>
#include &lt;iostream&gt;

#ifndef _LOG_H
#define _LOG_H

void InitLog();
void Log(const char* message);

struct Player {};

#endif

#ifndef _LOG_H
#define _LOG_H

void InitLog();
void Log(const char* message);

struct Player {};

#endif

void InitLog() {
	Log("Initializing Log");
}

void Log(const char* message) {
	std::cout &lt;&lt; message &lt;&lt; std::endl;
}

int main()
{
	InitLog();
	return 0;
}
Copy<br>
<br>å°–æ‹¬å·æ˜¯åœ¨ç¼–è¯‘æ—¶æœ‰åŠæ³•å‘Šè¯‰ç¼–è¯‘å™¨çš„åŒ…å«è·¯å¾„ï¼Œè€Œå¼•å·åŒ…å«çš„æ–‡ä»¶å­˜åœ¨äºæºæ–‡ä»¶çš„ç›¸å¯¹ä½ç½®æˆ–è€…æ˜¯ç¼–è¯‘å™¨çŸ¥é“çš„åŒ…å«è·¯å¾„
<br>ä¸ºäº†åŒºåˆ† c æ ‡å‡†åº“å’Œ c++ æ ‡å‡†åº“ï¼Œc åº“ä¸­çš„å¤´æ–‡ä»¶ä¸€åŠæœ‰ .h æ‰©å±•åè€Œ c++ æ²¡æœ‰
<br><br>
<br>è°ƒè¯•åŒ…æ‹¬ä¸‹æ–­ç‚¹å’ŒæŸ¥çœ‹å†…å­˜
<br>ç®­å¤´è¡¨ç¤ºåœ¨æ‰€æŒ‡çš„ä»£ç ä¸Šä½†æ˜¯å¹¶æ²¡æœ‰å®é™…æ‰§è¡Œé‚£æ®µä»£ç 
<br>è°ƒè¯•æ—¶å¦‚ä½•è·³å‡ºå¾ªç¯ï¼šåœ¨æƒ³åˆ°è¾¾çš„åœ°æ–¹ä¸‹ä¸€ä¸ªç«¯ç‚¹å¹¶ continue 
<br><br>
<br>æ¡ä»¶ç»“æ„å°±æ˜¯å½“æ¡ä»¶ä¸ºçœŸæ—¶æ‰§è¡Œä¸€éƒ¨åˆ†ä»£ç 
<br>æ‰€æœ‰ c++ ä¸­çš„è¿ç®—ç¬¦éƒ½æŸç§æ–¹å¼è¢«å®ç°è¿‡äº†
<br>åœ¨æ£€æµ‹ä¸¤ä¸ª int æ˜¯å¦ç›¸ç­‰æ—¶ï¼Œå®é™…ä¸Šæ˜¯å°†æ¯ä¸ªå€¼ä»å†…å­˜ä¸­æŠ“å–å‡ºæ¥å¹¶åšé€å­—èŠ‚çš„æ¯”è¾ƒ
<br>æ¡ä»¶åˆ¤æ–­ç›´æ¥ä½¿ç”¨ä¸€ä¸ªå˜é‡ç›¸å½“äºç›´æ¥å»å­˜å‚¨è¯¥å˜é‡çš„å†…å­˜å—ä¸­æŸ¥çœ‹è¯¥å˜é‡æ˜¯å¦ä¸º 0

<br>è¿™ç§æ–¹æ³•åŒæ—¶ä¹Ÿèƒ½ç”¨æ¥æ£€éªŒä¸€ä¸ªæŒ‡é’ˆæ˜¯å¦ä¸ºç©º


<br>æŠŠåˆ¤æ–­è¯­å¥å’Œå°†è¦æ‰§è¡Œçš„è¯­å¥æ”¾åœ¨ä¸€è¡Œåœ¨è°ƒè¯•æ—¶æ— æ³•æŸ¥çœ‹æ‰§è¡Œè¯­å¥çš„å…·ä½“æƒ…å†µ
<br>else if åªæ˜¯æŠŠ else å’Œ if ç»“åˆèµ·æ¥äº†
<br>const char* white = "Moe";
else if (white == "Moe")
	Log("White is very cute.");
//ç­‰åŒäº
else {
	if (white == "Moe")
		Log("White is very cute.");
}
Copy<br><br>
<br>for loop
<br>ä¸ç”¨å…ˆå£°æ˜å˜é‡æˆ–æ¯æ¬¡å¾ªç¯æ›´æ–°å€¼æ—¶ï¼Œç”¨ while é€šå¸¸æ˜¯æ›´å¥½çš„é€‰æ‹©
<br>do while çš„ body è‡³å°‘ä¼šè¢«æ‰§è¡Œä¸€æ¬¡
<br><br>
<br>continue
<br>break
<br>return
<br><br>
<br>æŒ‡é’ˆå­˜å‚¨äº†å†…å­˜åœ°å€çš„æ•°å€¼
<br>æŒ‡é’ˆçš„ç±»å‹åªå¯¹æ“ä½œå†…å­˜æœ‰ç”¨
<br>
<br>å¯ä»¥ä½¿ç”¨ new åœ¨è®©ç¨‹åºåœ¨å †ä¸Šåˆ†é…ä¸€æ®µç©ºé—´
<br>char* buffer = new char[8];
memset(buffer, 0, 8);

delete[] buffer;
Copy<br>
<br>äºŒçº§æŒ‡é’ˆåªæ˜¯æŒ‡å‘ä¸€ä¸ªæŒ‡é’ˆï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆåˆæŒ‡å‘ä¸€ä¸ªå†…å­˜åœ°å€
<br>char* buffer = new char[8];
memset(buffer, 0, 8);

char** ptr buffer;

delete[] buffer;
Copy<br><br>
<br>åœ¨æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå¼•ç”¨å°±æ˜¯æŒ‡é’ˆ
<br>å¼•ç”¨å¿…é¡»å¼•ç”¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å˜é‡ï¼Œå¼•ç”¨æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œå¹¶ä¸å æ®å†…å­˜ç©ºé—´
<br>int a = 5;
int&amp; ref = a;
ref = 2;
Copy<br>
<br>Passing by reference, æ‰€åšçš„äº‹æƒ…æ˜¯ç›¸åŒçš„ï¼Œå¼•ç”¨åªæ˜¯æŒ‡é’ˆçš„ä¸€ç§è¯­æ³•ğŸ¬ï¼Œæ‰€ä»¥å£°æ˜å¼•ç”¨æ—¶å¿…é¡»ç«‹åˆ»ç»™å¼•ç”¨èµ‹å€¼
<br>void Increment(int* value) {
	(*value)++;
}

int main() {
	int a = 5;
	Increment(&amp;a)
}
Copy<br>void Increment(int&amp; value) {
	value++;
}

int main() {
	int a = 5;
	Increment(a)
}
Copy<br>
<br>å¦‚æœæƒ³æ”¹å˜å¼•ç”¨æŒ‡ä»£çš„å†…å®¹ï¼Œéœ€è¦ç”¨åˆ°æŒ‡é’ˆæ‰è¡Œ
<br>	int a = 5;
	int b = 8;

	int&amp; ref = a;
	ref = b; // å˜é‡ a å†…å­˜åœ°å€çš„å€¼è¢«èµ‹ä¸º 8 

	int* ref = &amp;a;
	*ref = 2;
	ref = &amp;b;
	*ref = 1;
Copy<br><br>
<br>ç±»æ˜¯ä¸€ç§å°†æ•°æ®å’Œå‡½æ•°ç»„ç»‡åœ¨ä¸€èµ·çš„æ–¹å¼
<br>æ³¨æ„ç±»çš„ç»“å°¾è¿˜æœ‰ä¸€ä¸ªåˆ†å·
<br>åˆ›å»ºç±»æ—¶å¯ä»¥æŒ‡å®šç±»ä¸­æˆå‘˜çš„å¯è§æ€§ï¼Œé»˜è®¤æƒ…å†µä¸‹ç±»ä¸­çš„æˆå‘˜è®¿é—®æ§åˆ¶éƒ½æ˜¯ç§æœ‰çš„
<br>ç±»å’Œç»“æ„çš„åŒºåˆ«æ˜¯é»˜è®¤æƒ…å†µä¸‹ç±»çš„æˆå‘˜æ˜¯ç§æœ‰çš„ï¼ŒC++ ä¸­ç»“æ„ä½“å­˜åœ¨çš„æ„ä¹‰æ˜¯ä¿æŒå’Œ C çš„å…¼å®¹æ€§
<br>Cherno åœ¨ä½¿ç”¨ä¸€äº›ç®€å•æ•°æ®ç»“æ„ POD (plain old data) æˆ–è€…ä»…åŒ…å«ä¸€äº›å˜é‡çš„ç»“æ„
<br>å¦‚æœéœ€è¦ç”¨åˆ°ç»§æ‰¿ï¼Œä½¿ç”¨ç±»æ¯”è¾ƒåˆé€‚
<br><br>#include &lt;iostream&gt;

class Log {
public:
	const int LogLevelError = 0;
	const int LogLevelWarning = 1;
	const int LogLevelInfo = 2;
private:
	int m_LogLevel = LogLevelInfo;
public:
	void SetLevel(int level) {
		m_LogLevel = level;
	}

	void Error(const char* message) {
		if (m_LogLevel &gt;= LogLevelError)
			std::cout &lt;&lt; "[Warning]: " &lt;&lt; message &lt;&lt; std::endl;		
	} 
	void Warn(const char* message) {
		if (m_LogLevel &gt;= LogLevelWarning)
			std::cout &lt;&lt; "[Warning]: "&lt;&lt; message &lt;&lt; std::endl;		
	} 
	void Info(const char* message) {
		if (m_LogLevel &gt;= LogLevelInfo)
			std::cout &lt;&lt; "[Info]: "&lt;&lt; message &lt;&lt; std::endl;		
	} 
};

int main() {
	Log log;
	log.SetLevel(log.LogLevelError);
	log.Warn("Hello");
	log.Info("Hello");
	log.Error("Hello");
	std::cin.get();	
}
Copy<br><br>
<br>ç±»å¤– static å…³é”®å­—åœ¨é“¾æ¥é˜¶æ®µä¿®é¥°çš„å‡½æ•°æ˜¯å±€éƒ¨çš„ï¼Œåªå¯¹å®šä¹‰å®ƒçš„ç¼–è¯‘å•å…ƒå¯è§
<br>ç±»å’Œç»“æ„ä½“å†…éƒ¨çš„ static è¡¨ç¤ºè¢«ä¿®é¥°çš„è¿™éƒ¨åˆ†å†…å­˜æ˜¯è¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„
<br><br>
<br>extern å…³é”®å­—ï¼Œåœ¨å¦å¤–çš„ç¼–è¯‘å•å…ƒä¸­å¯»æ‰¾è¯¥åç§°çš„å®šä¹‰ï¼Œè¿™åˆè¢«ç§°ä¸º external linking
<br>ä»€ä¹ˆæ—¶å€™ç”¨ static å°±åƒå¯¹ç±»æˆå‘˜ä½¿ç”¨ private ä¸€æ ·
<br><br>
<br>é€šè¿‡ç±»å®ä¾‹å¼•ç”¨é™æ€å˜é‡æ˜¯æ²¡æœ‰æ„ä¹‰çš„ (this)
<br>é™æ€æ–¹æ³•ä¸ç”¨é€šè¿‡ç±»çš„å®ä¾‹å°±å¯ä»¥è°ƒç”¨ (ç±»ååŠ è§„èŒƒè§£æè¿ç®—ç¬¦å°±å¯ä»¥è®¿é—®)
<br>åœ¨é™æ€æ–¹æ³•å†…éƒ¨ä¹Ÿæ— æ³•è®¿é—®åˆ°ç±»çš„å®ä¾‹ï¼Œä¸èƒ½å†™å¼•ç”¨ç±»çš„å®ä¾‹çš„ä»£ç ï¼Œä¹Ÿä¸èƒ½è®¿é—®éé™æ€å˜é‡
<br>ä¸åŒç±»å®ä¾‹ä¸­ä½¿ç”¨çš„é™æ€å˜é‡æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œå°±åƒåœ¨å‘½åç©ºé—´é‡Œä¸€æ ·ï¼Œé€šå¸¸ä½¿ç”¨ [Class Name]::[Variable] æ¥è°ƒç”¨
<br>æœ¬è´¨ä¸Šåœ¨ç±»é‡Œå†™çš„æ¯ä¸ªéé™æ€æ–¹æ³•éƒ½ä¼šè·å¾—å½“å‰çš„ç±»å®ä¾‹ä½œä¸ºå‚æ•° (this æŒ‡é’ˆ)ï¼Œé™æ€æ–¹æ³•å› ä¸ºå¹¶æ²¡æœ‰ä¼ å…¥éšè—å‚æ•° (this) æ‰€ä»¥ä¸çŸ¥é“æ€ä¹ˆè®¿é—®ç±»å®ä¾‹ä¸­çš„æ•°æ®
<br><br>
<br>ä¹‹å‰äº†è§£çš„æ˜¯å…¨å±€ä½œç”¨åŸŸä¸­çš„ static ä»¥åŠç±»å’Œç»“æ„ä½“å†…çš„ static 
<br>ç”Ÿå‘½å‘¨æœŸï¼šå˜é‡åœ¨è¢«åˆ é™¤ä¹‹å‰åœ¨å†…å­˜ä¸­åœç•™å¤šä¹…
<br>ä½œç”¨åŸŸï¼šå¯ä»¥è®¿é—®è¿™ä¸ªå˜é‡çš„èŒƒå›´
<br>local static å˜é‡å…è®¸å£°æ˜ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ˜¯æ•´ä¸ªç¨‹åºçš„ç”Ÿå­˜æœŸçš„å˜é‡ï¼Œä½†æ˜¯ä½œç”¨åŸŸè¢«é™åˆ¶åœ¨å£°æ˜å˜é‡çš„å‡½æ•°ä¸­ (ä¸ä¸€å®šæ˜¯å‡½æ•°ï¼Œif è¯­å¥ä¹‹ç±»çš„ä¹Ÿè¡Œ)
<br>#include &lt;iostream&gt;

void Function() {
	static int i = 0;
	i++;
	std::cout &lt;&lt; i &lt;&lt; std::endl
}

int main() {
	Function();
	std::cin.get();
	return 0;
}
Copy<br>
<br>å½“ç„¶å¯ä»¥é€šè¿‡å£°æ˜å…¨å±€å˜é‡æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯åœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®åˆ°è¿™ä¸ªå˜é‡
<br>ä¸ä½¿ç”¨é™æ€å±€éƒ¨å˜é‡æ—¶ï¼Œå¦‚æœè¦åˆ›å»ºä¸€ä¸ªå•ä¾‹ç±»ï¼Œéœ€è¦å†™å¾ˆå¤šçš„ä»£ç 
<br>#include &lt;iostream&gt;

class Singleton {
private:
	static Singleton* s_Instance;
public:
	static Singleton&amp; Get() { return *s_Instance; }
	void Hello() {}
};

class Singleton {
public:
	static Singleton&amp; Get() {
		static Singleton instance; //å¦‚æœæ²¡æœ‰ static å…³é”®å­—åœ¨è·³å‡ºå‡½æ•°ä½œç”¨åŸŸæ—¶æ ˆä¸Šçš„ instance åœ¨ä¸€æ®µæ—¶é—´åä¼šè¢«é”€æ¯ï¼Œè€Œè¿™åœ¨C++ä¸­æ˜¯ä¸å®‰å…¨çš„ï¼Œæ­¤æ—¶é€šè¿‡å¼•ç”¨è®¿é—®å®ƒå¯èƒ½ä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºï¼Œä¸€æ®µæ—¶é—´åè®¿é—®è¿™ä¸ªå¼•ç”¨å¯èƒ½ä¼šå‡ºé”™
		return instance;
	}
	
	void Hello() {}
};

int main() {
	Singleton::Get().Hello();

	std::cin.get();
}
Copy<br>
<br>å•ä¾‹ç±»ï¼ˆSingleton Classï¼‰æ˜¯ä¸€ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼Œç”¨æ¥ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªå…¨å±€çš„è®¿é—®ç‚¹æ¥è·å–è¿™ä¸ªå”¯ä¸€å®ä¾‹ã€‚å•ä¾‹æ¨¡å¼é€šå¸¸ç”¨äºç®¡ç†å…±äº«èµ„æºï¼Œå¦‚æ•°æ®åº“è¿æ¥æˆ–æ–‡ä»¶ç³»ç»Ÿï¼Œä»¥åŠåœ¨åº”ç”¨ç¨‹åºä¸­å®ç°å…¨å±€çŠ¶æ€æˆ–é…ç½®ç®¡ç†
<br><br>
<br>ç”¨äºç»™ä¸€ä¸ªå€¼æŒ‡å®šä¸€ä¸ªåç§°ï¼Œå¢åŠ ä»£ç çš„å¯è¯»æ€§
<br>å¯ä»¥é€šè¿‡åœ¨åç§°ååŠ å…¥ : æŒ‡å®šæšä¸¾çš„æ•°æ®ç±»å‹
<br>æšä¸¾å®é™…ä¸Šå°±æ˜¯æ•´æ•°
<br>enum Example : unsigned char {
	A = 5, B, C
}
Copy<br>#include &lt;iostream&gt;

class Log
{
public:
	enum Level
	{
		LevelError = 0, // å’Œæ–¹æ³•åå­˜åœ¨å‘½åå†²çªï¼Œæ­¤æ—¶åŠ å…¥å‰ç¼€æ¯”è¾ƒå¥½
		LevelWarning,
		LevelInfo
	};

private:
	Level m_LogLevel = LevelInfo; // å¦‚æœéœ€è¦å°† LogLevel çš„å–å€¼èŒƒå›´é™åˆ¶åœ¨ enum çš„èŒƒå›´å†…å¯ä»¥å°† m_LogLevel çš„ç±»å‹è®¾ç½®ä¸º Level
public:
	void SetLevel(Level level)
	{
		m_LogLevel = level;
	}

	void Error(const char *message)
	{
		if (m_LogLevel &gt;= LevelError)
			std::cout &lt;&lt; "[Warning]: " &lt;&lt; message &lt;&lt; std::endl;
	}
	void Warn(const char *message)
	{
		if (m_LogLevel &gt;= LevelWarning)
			std::cout &lt;&lt; "[Warning]: " &lt;&lt; message &lt;&lt; std::endl;
	}
	void Info(const char *message)
	{
		if (m_LogLevel &gt;= LevelInfo)
			std::cout &lt;&lt; "[Info]: " &lt;&lt; message &lt;&lt; std::endl;
	}
};

int main()
{
	Log log;
	log.SetLevel(Log::LevelError); // Error æšä¸¾å€¼å­˜åœ¨äº Logç±»çš„å‘½åç©ºé—´ï¼Œä¹Ÿæœ‰æšä¸¾ç±»ä½†æ˜¯å¯¹äºæ™®é€šçš„ Level æšä¸¾ä¸èƒ½å°†å…¶å½“ä½œå‘½åç©ºé—´
	log.Warn("Hello");
	log.Info("Hello");
	log.Error("Hello"); 
	std::cin.get();
}
Copy<br><br>
<br>æ„é€ å‡½æ•°æ²¡æœ‰è¿”å›ç±»å‹ï¼Œå¹¶ä¸”å‘½åéœ€è¦å’Œç±»åç›¸åŒ
<br>æ²¡æœ‰æŒ‡å®šæ„é€ å‡½æ•°å®é™…ä¸Šä¼šä½¿ç”¨ä¸€ä¸ªç©ºçš„é»˜è®¤æ„é€ å‡½æ•°
<br>ä¸åƒ Java ä¸­ï¼ŒC++ä¸­å¿…é¡»æ‰‹åŠ¨åˆå§‹åŒ–æ‰€æœ‰åŸºæœ¬ç±»å‹ï¼Œæ‰€ä»¥ä¸è¦å¿˜è®°åˆå§‹åŒ–
<br>ä½¿ç”¨ç±»çš„é™æ€æ–¹æ³•æ—¶æ„é€ å‡½æ•°ä¸ä¼šè¢«è°ƒç”¨
<br>#include &lt;iostream&gt;

class Entity
{
public:
	float X, Y;

	Entity()
	{
		X = 0.0f;
		Y = 0.0f;
	}

	// å‡½æ•°é‡è½½
	Entity(float x, float y)
	{
		X = x;
		Y = y;
	}

	void Print()
	{
		std::cout &lt;&lt; X &lt;&lt; ", " &lt;&lt; Y &lt;&lt; std::endl;
	}
};

int main()
{
	Entity e;
	e.Print();
	std::cin.get();
}
Copy<br>
<br>å¦‚æœä¸æƒ³ä½¿ç”¨ç±»çš„æ—¶å€™å°†å®ä¾‹åŒ–ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š

<br>å°†æ„é€ å‡½æ•°è®¾ç½®ä¸ºç§æœ‰
<br>ä½¿ç”¨ delete åˆ é™¤é»˜è®¤æ„é€ å‡½æ•°


<br>class Log {
private:
	Log() {}
public:
	Log() = delete;
};
Copy<br><br>
<br>ææ„å‡½æ•°åŒæ—¶é€‚ç”¨äºæ ˆå’Œå †åˆ†é…çš„å†…å­˜ï¼Œå½“ç”¨ new å…³é”®å­—åœ¨å †ä¸Šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè°ƒç”¨ delete æ—¶ææ„å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œå¯¹äºæ ˆä¸Šçš„å¯¹è±¡å½“è·³å‡ºä½œç”¨åŸŸå¯¹è±¡è¢«åˆ é™¤æ—¶ææ„å‡½æ•°ä¹Ÿä¼šè¢«è°ƒç”¨
<br>åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œåˆå§‹åŒ–å·¥ä½œåéœ€è¦åœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾å†…å­˜ï¼Œå¦åˆ™å®¹æ˜“é€ æˆå†…å­˜æ³„éœ²ï¼Œå¦‚æœæ‰‹åŠ¨åœ¨å †ä¸Šåˆ†é…äº†ä»»ä½•ç±»å‹çš„å†…å­˜ç©ºé—´ï¼Œä¹Ÿéœ€è¦æ‰‹åŠ¨è¿›è¡Œæ¸…é™¤æ“ä½œ
<br>#include &lt;iostream&gt;

class Entity
{
public:
	float X, Y;

	Entity()
	{
		X = 0.0f;
		Y = 0.0f;
		std::cout &lt;&lt; "Created Entity!" &lt;&lt; std::endl;

	}

	~Entity() {
		std::cout &lt;&lt; "Destroyed Entity!" &lt;&lt; std::endl;
	}

	void Print()
	{
		std::cout &lt;&lt; X &lt;&lt; ", " &lt;&lt; Y &lt;&lt; std::endl;
	}
};

void Function() {
	Entity e;
	e.Print();
}

int main()
{
	Function();
	std::cin.get();
}
Copy<br><br>
<br>ç±»ç»§æ‰¿ä½¿ç±»ä¹‹é—´å­˜åœ¨ç›¸äº’å…³è”çš„å±‚çº§å…³ç³»
<br>å¯ä»¥å¸®åŠ©é¿å…å¾ˆå¤šé‡å¤ä»£ç 
<br>ç»§æ‰¿å¯ä»¥å°†ä¸€ç³»åˆ—é€šç”¨ä»£ç æ”¾å…¥åŸºç±»ä¸­
<br>#include &lt;iostream&gt;

class Entity
{
public:
	float X, Y;

	void Move(float xa, float ya) {
		X += xa;
		Y += ya;
	}
};

class Player : public Entity // Playerä¸ä»…ä»…æ˜¯Playerç±»ï¼ŒåŒæ—¶ä¹Ÿæ˜¯Entityç±»ï¼ŒEntityä¸­çš„ä»»ä½•å…¬æœ‰æˆå‘˜Playeréƒ½èƒ½è®¿é—®åˆ°ï¼ŒPlayeræ˜¯Entityçš„ä¸€ä¸ªè¶…é›†
{							 // å¤šæ€æ˜¯ä½¿ç”¨ä¸€ä¸ªç¬¦å·è¡¨ç¤ºå¤šç§ç±»å‹
public:
	const char* Name;

	void PrintName() {
		std::cout &lt;&lt; Name &lt;&lt; std::endl;
	}
};

int main()
{
	std::cout &lt;&lt; sizeof(Player) &lt;&lt; " " &lt;&lt; sizeof(Entity) &lt;&lt; std::endl; // ç±»çš„å¤§å°æ˜¯å¯å˜åŒ–çš„ï¼Œå¦‚æœè¦é‡å†™Playerä¸­çš„å‡½æ•°å°±è¦ç»´æŠ¤ä¸€ä¸ªè™šå‡½æ•°è¡¨ï¼Œä¼šå ç”¨é¢å¤–çš„å†…å­˜

	std::cin.get();
}
Copy<br><br>
<br>è™šå‡½æ•°å¯ä»¥åœ¨å­ç±»ä¸­é‡å†™æ–¹æ³•
<br>è™šå‡½æ•°å¼•å…¥äº†åŠ¨æ€åˆ†é…ï¼Œé€šè¿‡è™šè¡¨ (vtable) æ¥å®ç°ç¼–è¯‘ï¼Œè™šè¡¨æ˜¯åŒ…å«ç±»ä¸­æ‰€æœ‰è™šå‡½æ•°æ˜ å°„çš„åˆ—è¡¨ï¼Œå¯ä»¥é€šè¿‡è™šè¡¨åœ¨è¿è¡Œæ—¶æ‰¾åˆ°æ­£ç¡®çš„è¢«é‡å†™çš„å‡½æ•°ï¼Œå¦‚æœè¦é‡å†™ä¸€ä¸ªå‡½æ•°ï¼Œéœ€è¦æŠŠåŸºç±»ä¸­çš„åŸå‡½æ•°è®¾ç½®ä¸ºè™šå‡½æ•°
<br>ä½¿ç”¨è™šå‡½æ•°æ—¶çš„é¢å¤–å¼€é”€ï¼Œéœ€è¦é¢å¤–çš„å†…å­˜æ¥å­˜å‚¨è™šè¡¨ï¼ŒåŸºç±»ä¸­è¿˜æœ‰ä¸€ä¸ªæŒ‡é’ˆæˆå‘˜æŒ‡å‘è™šè¡¨ï¼Œæ¯æ¬¡è°ƒç”¨è™šå‡½æ•°æ—¶å¿…é¡»éå†è™šè¡¨å»æ‰¾åˆ°æœ€ç»ˆè¦è¿è¡Œçš„å‡½æ•°ï¼Œåœ¨ä¸€äº›åµŒå…¥å¼å¹³å°ä¸Šè™šå‡½æ•°çš„å¼€é”€å¯èƒ½æˆä¸ºè€ƒè™‘çš„å†…å®¹
<br>#include &lt;iostream&gt;

class Entity
{
public:
	virtual std::string GetName() { return "Entity"; };
};

class Player : public Entity
{
private:
	std::string m_Name;

public:
	Player(const std::string &amp;name)
		: m_Name(name) {} // åˆå§‹åŒ–åˆ—è¡¨ï¼Œç”¨äºåœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œå‰åˆå§‹åŒ–æˆå‘˜å˜é‡å’ŒåŸºç±»

	std::string GetName() override { return m_Name; }
};

void PrintName(Entity* entity) {
	std::cout &lt;&lt; entity-&gt;GetName() &lt;&lt; std::endl;
}


int main()
{
	Entity* e = new Entity();
	PrintName(e);

	Player* p = new Player("Cherno");
	PrintName(p);						//åœ¨ç±»ä¸­æ­£å¸¸å£°æ˜çš„å‡½æ•°æˆ–æ–¹æ³•è°ƒç”¨æ–¹æ³•æ—¶ä¼šå»è°ƒç”¨å±äºè¯¥ç±»å‹çš„æ–¹æ³•

	std::cin.get();
}
Copy<br><br>
<br>çº¯è™šå‡½æ•°å…è®¸å®šä¹‰ä¸€ä¸ªåœ¨åŸºç±»ä¸­æ²¡æœ‰å®ç°çš„å‡½æ•°ï¼Œå¼ºåˆ¶å­ç±»å»å®ç°è¿™ä¸ªå‡½æ•°
<br>åœ¨ <a data-tooltip-position="top" aria-label="C++ Crash Course > è™šå‡½æ•°" data-href="C++ Crash Course#è™šå‡½æ•°" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/c++-crash-course.html#è™šå‡½æ•°" class="internal-link" target="_self" rel="noopener">è™šå‡½æ•°</a> å®ç°çš„ GetName() æ–¹æ³•å¯¹äºå­ç±»çš„é‡å†™æ˜¯æ²¡æœ‰å¼ºåˆ¶çš„
<br>æœ‰æ—¶å€™éœ€è¦å¼ºåˆ¶å­ç±»ä¸ºæŸä¸ªç‰¹å®šçš„å‡½æ•°æä¾›è‡ªå·±çš„å®šä¹‰
<br>æ¥å£ï¼šåªåŒ…å«ä¸ºå®ç°çš„æ–¹æ³•å¹¶ä½œä¸ºä¸€ä¸ªæ¨¡ç‰ˆçš„ç±»ï¼Œç”±äºæ¥å£ç±»å®é™…ä¸Šä¸åŒ…å«æ–¹æ³•å®ç°ï¼Œæ‰€ä»¥æ— æ³•å®ä¾‹åŒ–è¿™ä¸ªç±»
<br>åªèƒ½å®ä¾‹åŒ–å®ç°äº†æ‰€æœ‰çº¯è™šå‡½æ•°çš„ç±»ï¼Œçº¯è™šå‡½æ•°åªè¦åœ¨ä¸€æ¡ç»§æ‰¿é“¾ä¸Šè¢«å®ç°è¿‡å°±å¯ä»¥ï¼Œé‡ç‚¹æ˜¯è™šå‡½æ•°å¿…é¡»è¢«å®ç°
<br>#include &lt;iostream&gt;

class Printable
{
public:
	virtual std::string GetClassName() = 0;
};

class Entity : public Printable
{
public:
	std::string GetClassName() override { return "Entity"; }
};

class Player : public Entity
{
private:
	std::string m_Name;

public:
	Player(const std::string &amp;name)
		: m_Name(name) {}

	std::string GetClassName() override { return "Player"; }
};

void Print(Printable *obj)
{
	std::cout &lt;&lt; obj-&gt;GetClassName() &lt;&lt; std::endl;
}

int main()
{
	Entity *e = new Entity();
	Player *p = new Player("Cherno");

	Print(e);
	Print(p);

	std::cin.get();
}
Copy<br><br>
<br>æŒ‡ä¸€ä¸ªç±»ä¸­çš„æˆå‘˜å’Œæ–¹æ³•æ˜¯å¦å¯è§ (èƒ½å¤Ÿè¢«è®¿é—®ã€è°ƒç”¨æˆ–ä½¿ç”¨)
<br>å¯è§æ€§å¯¹äºç¨‹åºç¨‹åºçš„æ€§èƒ½ä¸ä¼šé€ æˆå½±å“
<br>ä¸‰ç§åŸºç¡€çš„å¯è§ä¿®é¥°ç¬¦ private protected public
<br>privateï¼šåªæœ‰å½“å‰ç±»å¯ä»¥è®¿é—®åˆ°è¿™äº›å˜é‡ (friend å…è®¸å…¶ä»–ç±»è®¿é—®è¯¥ç±»çš„ç§æœ‰æˆå‘˜)
<br>protectedï¼šå¯è§æ€§æ¯” private æ›´é«˜ï¼Œä½†è¦ä½äº publicï¼Œå½“å‰ç±»ä»¥åŠå½“å‰ç±»çš„æ´¾ç”Ÿç±»éƒ½èƒ½è®¿é—®åˆ°è¿™äº›æˆå‘˜
<br>å¯è§æ€§æ›´æ–¹ä¾¿ç»´æŠ¤ã€ç†è§£å’Œæ‹“å±•ä»£ç ï¼Œç¡®ä¿ä»–äººä¸ä¼šè°ƒç”¨ä¸åº”è¯¥è¢«è°ƒç”¨çš„ä»£ç 
<br>class Entity
{
protected:
	int X, Y;
public:
	Entity() {
		X = 0;
	}
};

class Player : Entity
{
public:
	Player() {
		X = 2;
	}
};
Copy<br><br>
<br>æ•°ç»„æ˜¯ä¸€äº›å…ƒç´ çš„é›†åˆï¼Œæ˜¯æŒ‰ç…§ç‰¹å®šé¡ºåºæ’åˆ—çš„ä¸œè¥¿
<br>å½“ç´¢å¼•ä¸€ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ æ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªåº•å±‚çš„æ•°æ®ç±»å‹
<br>å½“è®¿é—®ä¸€ä¸ªä¸åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•æ—¶ä¼šäº§ç”Ÿå†…å­˜è®¿é—®å†²çª (memory access violation) ï¼Œæ‰€ä»¥è¦ç¡®å®šåœ¨æ•°ç»„çš„è§„å®šèŒƒå›´å†…æ“ä½œ
<br>æ•°ç»„å¸¸ä¼´éš for å¾ªç¯ï¼Œå¯ä»¥åœ¨ç‰¹å®šèŒƒå›´å†…ä½¿ç”¨ç´¢å¼•è¿›è¡Œéå†
<br>æ•°ç»„å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªè¿ç»­çš„æ•°æ®å—
<br>å†…å­˜é—´æ¥å¯»å€ï¼Œæ¯”å¦‚åœ¨ç±»çš„åœ°å€å¤„å­˜å‚¨ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ•°ç»„çš„å†…å­˜åœ°å€ï¼Œé—´æ¥å¯»å€ä¼šå½±å“æ€§èƒ½
<br>C++11 ä¸­çš„æ•°ç»„ std::array ï¼Œæœ‰è¾¹ç•Œæ£€æŸ¥å¹¶ä¸”è®°å½•æ•°ç»„çš„å¤§å°ï¼Œä½¿ç”¨æ™®é€šçš„å †ä¸Šæ•°ç»„æ— æ³•å¾—çŸ¥æ•°ç»„çš„å¤§å°ï¼Œéœ€è¦æ‰‹åŠ¨ç»´æŠ¤æ•°ç»„å¤§å°ï¼Œè€Œæ ˆä¸Šæ•°ç»„åˆå­˜åœ¨ä½œç”¨åŸŸé™åˆ¶
<br>å½“åœ¨æ ˆä¸­ç”¨æ•°ç»„ç”³è¯·å†…å­˜æ—¶ï¼Œæ•°ç»„å¤§å°éœ€è¦æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å°±çŸ¥é“çš„å¸¸é‡ï¼Œéœ€è¦ä½¿ç”¨å…³é”®å­— constexpr ï¼ŒåŒæ—¶ç±»ä¸­çš„ constexpr å˜é‡éœ€è¦æ˜¯é™æ€çš„
<br>#include &lt;iostream&gt;
#include &lt;array&gt;

class Entity
{
public:
	static const int exampleSize = 5;
	int example[exampleSize];

	std::array&lt;int, 5&gt; another;

	Entity() {
		for (int i = 0; i &lt; another.size(); i++) {
			example[i] = 2;
		}
	}
}
Copy<br><br>
<br>å¯ä»¥ç”¨æœ€å¤š N ä¸ªå¯è½¬æ¢ä¸º T çš„åˆå§‹å€¼è¿›è¡Œèšåˆåˆå§‹åŒ– std::array&lt;int, 3&gt; a = {1, 2, 3};
<br>N == 0 æ—¶ array.begin() == array.end() , front() å’Œ back() çš„ç»“æœæ˜¯æœªå®šä¹‰çš„
<br><br>
<br>å­—ç¬¦ä¸²æ˜¯ä¸€ç§èƒ½å¤Ÿè¡¨ç¤ºå’Œå¤„ç†æ–‡æœ¬çš„æ–¹æ³•ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦æ•°ç»„
<br>C++ä¸­å¤„ç†å­—ç¬¦çš„ç¼–ç æ–¹å¼æ˜¯ ASCII
<br>å­—ç¬¦ä¸²ç»“æŸçš„ä½ç½®æœ‰ä¸€ä¸ªç©ºä¸­æ­¢ç¬¦ (the null termination character)
<br>std::string æœ¬è´¨ä¸Šæ˜¯ std::basic_string å°† char ä½œä¸ºæ¨¡ç‰ˆå‚æ•° (template specializaton) çš„æ¨¡ç‰ˆç±»å®ä¾‹
<br>#include &lt;iostream&gt;
// #include &lt;string&gt;

/*
æŠŠç±»å¯¹è±¡ä¼ ç»™ä¸€ä¸ªå‡½æ•°å®é™…ä¸Šæ˜¯åˆ›å»ºäº†è¿™ä¸ªå¯¹è±¡çš„æ‹·è´ç„¶åå†ä¼ ç»™å‡½æ•°ï¼Œ
å¤åˆ¶stringæ„å‘³ç€è¦åœ¨å †ä¸Šåˆ›å»ºå…¨æ–°çš„ char æ•°ç»„æ¥å­˜å‚¨å¾—åˆ°çš„å®Œå…¨ç›¸åŒçš„æ–‡æœ¬
è¿™éå¸¸æ…¢
*/
void PrintString(std::string&amp; string) { 
	std::cout &lt;&lt; string &lt;&lt; std::endl;
}

int main()
{
	// C++ä¸­ç”¨å­—ç¬¦ä¸²å®šä¹‰æ—¶å®é™…çš„ç±»å‹æ˜¯ const char*
	std::string name = "Cherno"; // name æ˜¯åœ¨æ ˆä¸Šåˆ†é…çš„ï¼Œæ— æ³•ä½¿ç”¨ delete
	name += "Hello";
	name.size();
	bool contains = name.find("no") != std::string::npos; // find è¿”å›æ–‡æœ¬çš„ä½ç½®
	std::cout &lt;&lt; name &lt;&lt; std::endl; // stringå¤´æ–‡ä»¶é‡è½½äº† &lt;&lt; æ“ä½œç¬¦ï¼Œå…è®¸å°†å­—ç¬¦ä¸²ä¼ å…¥è¾“å‡ºæµ

	std::cin.get();
}
Copy<br><br>
<br>å­—ç¬¦ä¸²å­—é¢é‡æ˜¯åœ¨åŒå¼•å·ä¹‹é—´çš„å­—ç¬¦
<br>#include &lt;iostream&gt;

int main()
{
	using namespace std::string_literals;

	std::string name0 = "Cherno"s + "hello";
	std::wstring name0 = L"Cherno"s + L"hello";
	std::u32string name0 = U"Cherno"s + U"hello";

	const char* example = R"(Line1
Line2
Line3
Line4)";

	const char* ex = "Line1\n"
		"Line2\n"
		"Line3\n";

	const char* name = "Cherno";
	// name[2] = 'a'; // ä¸å¯ä»¥ï¼Œå®é™…ä¸ŠæŒ‡é’ˆæŒ‡å‘äº†å­—ç¬¦ä¸²å­—é¢é‡çš„ä½ç½®ï¼Œä½†å­—ç¬¦ä¸²å­—é¢é‡å­˜å‚¨åœ¨å†…å­˜çš„åªè¯»éƒ¨åˆ†ä¸å¯ä»¥ä¿®æ”¹
	const wchar_t* name2 = L"Cherno"; //è¡¨ç¤ºå­—ç¬¦ä¸²å­—é¢é‡æ˜¯ç”±å®½å­—ç¬¦ç»„æˆçš„ï¼Œwchar_t çš„å¤§å°æ˜¯ç”±ç¼–è¯‘å™¨å†³å®šçš„

	// C++11å¼•å…¥çš„æ–°ç±»å‹
	const char16_t* name3 = u"Cherno";
	const char32_t* name4 = U"Cherno";

	std::cin.get();
}
Copy<br><br>
<br>const åƒä¸€ä¸ªå‡å…³é”®å­—ï¼Œå› ä¸ºåœ¨ç”Ÿæˆä»£ç æ—¶å¹¶æ²¡æœ‰åšä»€ä¹ˆ
<br>ä¸ç±»å’Œç»“æ„ä½“æˆå‘˜çš„å¯è§æ€§ç›¸ä¼¼ï¼Œæ˜¯å¯¹å¼€å‘äººå‘˜çš„é™åˆ¶ï¼Œå¯ä»¥ç®€åŒ–ä»£ç 
<br>const å³å¼€å‘äººå‘˜åšå‡ºæ‰¿è¯ºæŸäº›ä¸œè¥¿æ˜¯ä¸ä¼šæ”¹åŠ¨çš„ï¼Œä½†å¯ä»¥ç»•è¿‡
<br>#include &lt;iostream&gt;

class Entity
{
private:
	int m_X, m_Y;
	int* p_X, p_Y; // p_Y ä»ç„¶æ˜¯ int ç±»å‹
	// int *p_X, *p_Y;
	mutable int var;
public:
	int GetX() const // ç”¨åœ¨æ–¹æ³•ä¹‹åï¼Œè¡¨ç¤ºè¿™ä¸ªæ–¹æ³•ä¸ä¼šä¿®æ”¹ä»»ä½•å®é™…çš„ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªåªè¯»çš„æ–¹æ³•
	{
		var = 2; // mutable çš„å˜é‡åœ¨ const æ–¹æ³•ä¸­ä»ç„¶å¯ä»¥è¢«ä¿®æ”¹
		// m_X = 2;     // ä¸è¡Œ
		return m_X;
	}

	int GetX() // æ‰€ä»¥åœ¨ç±»ä¸­æœ‰å¯èƒ½å­˜åœ¨åŒä¸€ä¸ªå‡½æ•°çš„ä¸¤ä¸ªç‰ˆæœ¬
	{

	}

	const int* const GetpX() const // è¿”å›äº†ä¸€ä¸ªä¸èƒ½ä¿®æ”¹çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ï¼Œä¹Ÿä¸ä¼šä¿®æ”¹ Entity ç±»
	{

	}

	void SetX(int x)
	{

	}
};

void PrintEntity(const Entity&amp; e) {
	e = Entity(); // ä¸å¯ä»¥æ”¹å˜ e çš„å†…å®¹
	// ä¸ä»…ä¸å¯ä»¥ç›´æ¥ä¿®æ”¹ï¼Œé€šè¿‡æ–¹æ³•é—´æ¥ä¿®æ”¹ä¹Ÿæ˜¯ä¸å…è®¸çš„
	std::cout &lt;&lt; e.GetX() &lt;&lt; std::endl; // ç§»é™¤ GetX åçš„ const åˆ™è¯¥æ–¹æ³•ä¸èƒ½è¢«è°ƒç”¨ï¼Œå› ä¸ºä¸èƒ½ä¿è¯ GetX ä¸æ”¹å˜ e çš„å†…å®¹
}

int main()
{
	const int MAX_AGE = 90;

	int* a = new int;
	*a = 2;                // ä¸ä½¿ç”¨ const å¯ä»¥åšä¸¤ä»¶äº‹ï¼Œè¿™é‡Œå¯ä»¥æ”¹å˜æŒ‡é’ˆæŒ‡å‘å†…å­˜çš„å†…å®¹
	a = (int *)&amp;MAX_AGE;   // ä¹Ÿå¯ä»¥æ”¹å˜æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜åœ°å€

	const int* b = new int;
	// int const* b = new int;
	*b = 2;                // åœ¨æŒ‡é’ˆä¹‹å‰åŠ ä¸Š const ä»¥åæ— æ³•ä¿®æ”¹å†…å­˜ä½ç½®çš„æ•°æ®
	b = (int *)&amp;MAX_AGE;   // ä½†æ˜¯å¯ä»¥æ”¹å˜æŒ‡é’ˆçš„åœ°å€

	int* const c = new int;
	*c = 2;                // ä½†æ˜¯å¯ä»¥ä¿®æ”¹æŒ‡å‘åœ°å€çš„å†…å®¹
	c = (int*)&amp;MAX_AGE;    // åœ¨æŒ‡é’ˆä¹‹ååŠ ä¸Š const æ— æ³•ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„åœ°å€
	c = nullptr;           // ä¸å¯ä»¥

	std::cin.get();
}
Copy<br><br>
<br>ä¸ const ä¸€èµ·ä½¿ç”¨
<br>åœ¨ lambda ä¸­ä½¿ç”¨
<br>#include &lt;iostream&gt;

class Entity
{
private:
	std::string m_Name;
	mutable int m_DebugCount;

public:
	const std::string &amp;GetName() const
	{
		m_DebugCount++;
		return m_Name;
	}
};

int main()
{
	const Entity e;
	e.GetName();

	int x = 8;
	auto f = [=]() mutable // &amp;xå¼•ç”¨ä¼ é€’ xå€¼ä¼ é€’ &amp;æ‰€æœ‰å˜é‡å¼•ç”¨ä¼ é€’ =æ‰€æœ‰å˜é‡å€¼ä¼ é€’
	{
		x++; // ä¸ä½¿ç”¨ mutable ä¼šæŠ¥é”™

		int y = x;
		y++;		//å’Œä½¿ç”¨ mutable çš„ç»“æœæ˜¯ç›¸åŒçš„ï¼Œä½¿ç”¨ mutable ç®€æ´ä¸€äº›
		std::cout &lt;&lt; x &lt;&lt; std::endl;
	};

	f();
	//x = 8

	std::cin.get();
}
Copy<br><br>#include &lt;iostream&gt;

class Example
{
public:
	Example()
	{
		std::cout &lt;&lt; "Created Entity!" &lt;&lt; std::endl;
	}
	Example(int x)
	{
		std::cout &lt;&lt; "Created Entity with " &lt;&lt; x &lt;&lt; "!" &lt;&lt; std::endl;
	}
};

class Entity
{
private:
	std::string m_Name;
	Example m_Example;

public:
	Entity() : m_Name("Unknown") // å°½é‡ä¿æŒåˆå§‹åŒ–åˆ—è¡¨å’Œæˆå‘˜å˜é‡çš„å£°æ˜é¡ºåºç›¸åŒ
	{
		// m_Name = "Unknown"; // å¦‚æœå†™åœ¨å‡½æ•°ä¸­å­—ç¬¦ä¸²å¯¹è±¡ä¼šè¢«æ„é€ ä¸¤æ¬¡ï¼Œé€ æˆæ€§èƒ½æµªè´¹
		m_Example = Example(8);
	}

	Entity(const std::string &amp;name) : m_Name(name)
	{
	}

	const std::string &amp;GetName() const { return m_Name; }
};

int main()
{
	Entity e;
	std::cin.get();
}
Copy<br>(base) âœ  Dev ./a.out        
Created Entity!
Created Entity with 8!
Copy<br><br>
<br>ä¸‰å…ƒè¿ç®—ç¬¦åªæ˜¯ if è¯­å¥çš„è¯­æ³•ç³–
<br>#include &lt;iostream&gt;

static int s_Level = 1;
static int s_Speed = 2;

int main()
{
	s_Speed = s_Level &gt; 5 ? 10 : 5;
	s_Speed = s_Level &gt; 5 ? s_Level &gt; 10 ? 15 : 10 : 5;

	std::string rank = s_Level &gt; 10 ? "Master" : "Beginner"; // æ²¡æœ‰æ„å»ºä¸­é—´å­—ç¬¦ä¸²çš„åŸå› å’Œè¿”å›å€¼ä¼˜åŒ–æœ‰å…³

	std::cin.get();
}
Copy<br><br>
<br>æ ˆå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±å£°æ˜çš„åœ°æ–¹çš„ä½œç”¨åŸŸå†³å®šçš„ï¼Œå¦‚æœè¶…å‡ºä½œç”¨åŸŸï¼Œå¯¹è±¡çš„å†…å­˜ä¼šè¢«é‡Šæ”¾
<br>åœ¨å †ä¸Šåˆ›å»ºçš„å¯¹è±¡ä¼šåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¸€ç›´å­˜åœ¨ç›´åˆ°è¢«æ‰‹åŠ¨é‡Šæ”¾
<br>#include &lt;iostream&gt;

using String = std::string;

class Entity
{
private:
	String m_Name;
public:
	Entity() : m_Name("Unknown") {}
	Entity(const String&amp; name) : m_Name(name) {}

	const String&amp; GetName() const {return m_Name;}

};

int main()
{
	Entity* e;
	{
		Entity entity("Cherno");
		e = &amp;entity;
		std::cout &lt;&lt; entity.GetName() &lt;&lt; std::endl;
	}                   // è·³å‡ºä½œç”¨åŸŸæ—¶ entity è¢«é”€æ¯äº†ï¼Œe å˜æˆäº†é‡æŒ‡é’ˆ
	std::cin.get();
}
Copy<br>
<br>å¦‚æœæƒ³è®© entity ç¦»å¼€ä½œç”¨åŸŸå°±éœ€è¦æŠŠå®ƒåˆ†é…åˆ°å †ä¸Š
<br>å¦‚æœæœ‰å¾ˆå¤šçš„ Entity æ ˆç©ºé—´å¯èƒ½å¤ªå°ä¸è¶³ä»¥åˆ†é…ï¼Œä¸å¾—ä¸åœ¨å †ä¸Šåˆ†é…
<br>åœ¨å †ä¸Šåˆ›å»ºçš„å¯¹è±¡éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ï¼Œå¦‚æœå¿˜è®° delete å°±ä¼šé€ æˆå†…å­˜æ³„éœ²ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œåœ¨æŒ‡é’ˆè¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œå¯¹è±¡ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼Œæˆ–è€…ä½¿ç”¨å…±äº«æŒ‡é’ˆï¼Œå¦‚æœæ²¡æœ‰æŒ‡å‘ä»–çš„å¼•ç”¨æ—¶ä¹Ÿä¼šè¢«è‡ªåŠ¨åˆ é™¤
<br>å¦‚æœå¯¹è±¡éå¸¸å¤§æˆ–éœ€è¦æ˜¾ç¤ºæ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨å·®å°±éœ€è¦åœ¨å †ä¸Šåˆ†é…
<br><br>
<br>new çš„ä¸»è¦ç›®çš„æ˜¯åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œæ ¹æ®æ‰€å†™çš„ç±»å‹ä»¥å­—èŠ‚ä¸ºå•ä½å†³å®šè¦åˆ†é…å†…å­˜çš„å¤§å°
<br>ä½¿ç”¨ new åˆ†é…ç©ºé—´ï¼Œä¸ä»…åˆ†é…äº†ç©ºé—´ï¼Œè¿˜è°ƒç”¨äº†æ„é€ å‡½æ•°
<br>new åªæ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œé€šå¸¸ä½¿ç”¨ new ä¼šè°ƒç”¨åº•å±‚çš„ C å‡½æ•° malloc
<br>#include &lt;iostream&gt;

using String = std::string;

class Entity
{
private:
	String m_Name;
public:
	Entity() : m_Name("Unknown") {}
	Entity(const String&amp; name) : m_Name(name) {}

	const String&amp; GetName() const {return m_Name;}

};

int main()
{
	int a = 2;
	int* b = new int[50]; // 200B

	Entity* e = new(b) Entity(); // placement new
	Entity* e = new Entity();
	// Entity* e = (Entity*)malloc(sizeof(Entity)); // ä¸¤è€…çš„åŒºåˆ«æ˜¯ new è¿˜è°ƒç”¨äº†æ„é€ å‡½æ•°

	delete e;
	delete[] b;
	
	std::cin.get();
	delete e;
}
Copy<br><br>
<br>C++å…è®¸ç¼–è¯‘å™¨å¯¹ä»£ç è¿›è¡Œä¸€æ¬¡éšå¼çš„è½¬æ¢
<br>ä½¿ç”¨ explicit å…³é”®å­—åéœ€è¦æ˜¾å¼è°ƒç”¨æ„é€ å‡½æ•°, å†™ä½çº§å°è£…æ—¶ä¼šæ´¾ä¸Šç”¨åœºï¼Œé˜²æ­¢å¶ç„¶è½¬æ¢æˆ–å¯¼è‡´æ€§èƒ½é—®é¢˜ 
<br>#include &lt;iostream&gt;

using String = std::string;

class Entity
{
private:
	String m_Name;
	int m_Age;
public:
	Entity(const String&amp; name) : m_Name(name), m_Age(-1) {}
	explicit Entity(int age) : m_Name("Unknown"), m_Age(age) {}

	const String&amp; GetName() const {return m_Name;}

};

void PrintEntity(const Entity&amp; entity) {

}

int main()
{
	PrintEntity(22); // æ„é€ å‡½æ•°åŠ ä¸Š explicit æ— æ³•éšå¼è½¬æ¢ 
	PrintEntity(Entity(22));
	//PrintEntity("Cherno"); //ä¸å¯ä»¥å·¥ä½œï¼Œå› ä¸º Cherno çš„ç±»å‹æ˜¯ const char*ï¼Œå¹¶ä¸æ˜¯ std::string ç±»å‹ï¼ŒC++éœ€è¦åšä¸¤æ¬¡éšå¼è½¬æ¢ï¼Œæ˜¯ä¸ç¬¦åˆè¦æ±‚çš„
	PrintEntity(String("Cherno"));
	PrintEntity(Entity("Cherno"));


	Entity a = String("Cherno");
	Entity b = 22; // å°† int éšå¼è½¬æ¢ä¸ºäº† Entityï¼ŒåŠ ä¸Š explicit å…³é”®å­—åæ— æ³•éšå¼è½¬æ¢
	Entity b(22);
	Entity b = Entity(22);
	
	std::cin.get();
}
Copy<br><br>
<br>æ“ä½œç¬¦æ˜¯ä»£æ›¿å‡½æ•°æ‰§è¡ŒæŸäº›äº‹æƒ…çš„ç¬¦å·
<br>æ“ä½œç¬¦é‡è½½æŒ‡ç»™æ“ä½œç¬¦ä¸€ä¸ªæ–°çš„å«ä¹‰ï¼Œå®šä¹‰æˆ–æ›´æ”¹ä¸€ä¸ªæ“ä½œç¬¦çš„è¡Œä¸º
<br>å½“æ“ä½œç¬¦é‡è½½éå¸¸æœ‰æ„ä¹‰æ—¶æ‰ä½¿ç”¨
<br>#include &lt;iostream&gt;

struct Vector2
{
	float x, y;

	Vector2(float x, float y) : x(x), y(y) {
	}

	Vector2 Add(const Vector2&amp; other) const {
		// return *this + other;
		// return operator+(other); // åƒå‡½æ•°ä¸€æ ·è°ƒç”¨
		return Vector2(x + other.x, y + other.y);
	}

	Vector2 operator+(const Vector2&amp; other) const {
		return Add(other);
	}

	Vector2 Multiply(const Vector2&amp; other) const {
		return Vector2(x * other.x, y * other.y);
	}

	Vector2 operator*(const Vector2&amp; other) const {
		return Multiply(other);
	}

	bool operator==(const Vector2&amp; other) const {
		return x == other.x &amp;&amp; y == other.y;
	}

	bool operator!=(const Vector2&amp; other) const {
		return !(*this == other);
		// return !operator==(other);
	}
};

// è¦é‡è½½æ“ä½œç¬¦çš„åŸå§‹å®šä¹‰
std::ostream&amp; operator&lt;&lt;(std::ostream&amp; stream, const Vector2&amp; other) {
	stream &lt;&lt; other.x &lt;&lt; ", " &lt;&lt; other.y;
	return stream;
}

int main()
{
	Vector2 position(4.0f, 4.0f);
	Vector2 speed(0.5f, 1.5f);
	Vector2 powerup(1.1f, 1.1f);

	Vector2 result2 = position + speed * powerup;

	std::cout &lt;&lt; result2 &lt;&lt; std::endl;
	std::cin.get();
}
Copy<br><br>
<br>this æ˜¯å‡½æ•°æ‰€å±å½“å‰å¯¹è±¡å®ä¾‹çš„æŒ‡é’ˆ
<br>#include &lt;iostream&gt;

class Entity
{
public:
	int x, y;

	Entity(int x, int y);

	int GetX() const // ä¸èƒ½ä¿®æ”¹è¿™ä¸ªç±»ï¼Œæ‰€ä»¥éœ€è¦åœ¨ Entity* å‰åŠ ä¸Š const
	{
		const Entity *e = this;
		return x;
	}

	const Entity* const SoManyConst(const Entity* const &amp; e) const
	{
	}
};

void PrintEntity(const Entity&amp; e);

Entity::Entity(int x, int y)
{
	// Entity *const e = this; // const åœ¨å³è¾¹æ„å‘³ç€ä¸èƒ½æ”¹å˜ e çš„æŒ‡å‘
	// this = nullptr ä¸å¯ä»¥
	// Entity*&amp; const e = this;
	// [const] (å¸¸é‡å¼•ç”¨) [Entity* const] (å¼•ç”¨ç±»å‹)
	// const Entity *const &amp;e = this; // æŒ‡å‘ Entity å¯¹è±¡çš„å¸¸é‡æŒ‡é’ˆçš„å¼•ç”¨ï¼Œä¸èƒ½æ”¹å˜
	this-&gt;x = x;
	this-&gt;y = y;
	PrintEntity(*this);
}

void PrintEntity(const Entity&amp; e)
{
	// ...
}

int main()
{
	std::cin.get();
}
Copy<br><br>
<br>C++æ¯æ¬¡è¿›å…¥ä¸€ä¸ªä½œç”¨åŸŸæ—¶å®é™…ä¸Šæ˜¯åœ¨ push æ ˆå¸§
<br>ä½œç”¨åŸŸå¯ä»¥æ˜¯ç±»ä½œç”¨åŸŸï¼Œå‡½æ•°ä½œç”¨åŸŸï¼Œif / for /while ä½œç”¨åŸŸç­‰ç­‰
<br>åœ¨æ ˆä¸Šåˆ›å»ºçš„å˜é‡å¦‚æœç¦»å¼€ä½œç”¨åŸŸè¿™ä¸ªå˜é‡å°±ä¸å­˜åœ¨äº†
<br>#include &lt;iostream&gt;

class Entity
{
public:
	Entity()
	{
		std::cout &lt;&lt; "Created Entity!" &lt;&lt; std::endl;
	}

	~Entity()
	{
		std::cout &lt;&lt; "Destroyed Entity!" &lt;&lt; std::endl;
	}
};

class ScopedPtr
{
private:
	Entity* m_Ptr;
public:
	ScopedPtr(Entity* ptr)
		: m_Ptr(ptr)
	{

	}

	~ScopedPtr()
	{
		delete m_Ptr;
	}
};

int main()
{
	{
		ScopedPtr e = new Entity(); // e è¶…å‡ºä½œç”¨åŸŸåè°ƒç”¨ææ„å‡½æ•°åœ¨å †ä¸Šåˆ†é…çš„ Entity() ä¹Ÿè¢«é”€æ¯äº†
	}
	std::cin.get();
}
Copy<br><br>
<br>ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆçš„æƒ…å†µä¸‹å½“è°ƒç”¨ new æ—¶ä¸ç”¨è°ƒç”¨ delete 
<br>unique_ptr ä½œç”¨åŸŸæŒ‡é’ˆï¼Œå½“æŒ‡é’ˆè¶…å‡ºä½œç”¨åŸŸæ—¶å°±ä¼šè¢«é”€æ¯ï¼ŒåŒæ—¶ä¸èƒ½æ‹·è´ä¸€ä¸ªä½œç”¨åŸŸæŒ‡é’ˆï¼Œå› ä¸ºå®ƒæ˜¯ unique ï¼Œä¸ä¼šäº§ç”Ÿé‡æŒ‡é’ˆ
<br>unique_ptr åªæ˜¯ä¸€ä¸ªæ ˆåˆ†é…å¯¹è±¡ï¼Œå½“æ ˆåˆ†é…å¯¹è±¡æ­»äº¡æ—¶ï¼Œä¼šè°ƒç”¨ delete åˆ é™¤å¯¹è±¡
<br>shared_ptr çš„å®ç°æ–¹å¼å–å†³äºç¼–è¯‘å™¨å’Œç¼–è¯‘å™¨ä¸­çš„æ ‡å‡†åº“ï¼Œä½†æ˜¯å‡ ä¹åœ¨æ‰€æœ‰ç³»ç»Ÿä¸­éƒ½ä½¿ç”¨å¼•ç”¨è®¡æ•°æ¥å®ç°
<br>å¼•ç”¨è®¡æ•° (reference counting) æ˜¯ä¸€ç§è·Ÿè¸ªç»Ÿè®¡æŒ‡é’ˆæœ‰å¤šå°‘å¼•ç”¨çš„æ–¹æ³•ï¼Œå¦‚æœè®¡æ•°ä¸º 0 é‚£å°±ä¼šè¢«åˆ é™¤
<br>weak_ptr ä¸å¢åŠ  shared_ptr çš„å¼•ç”¨è®¡æ•°
<br>æŒ‰ç…§å…ˆ unique_ptr å shared_ptr çš„é¡ºåºæ¥è€ƒè™‘
<br>#include &lt;iostream&gt;
#include &lt;memory&gt;oo

class Entity
{
public:
	Entity()
	{
		std::cout &lt;&lt; "Created Entity!" &lt;&lt; std::endl;
	}

	~Entity()
	{
		std::cout &lt;&lt; "Destroyed Entity!" &lt;&lt; std::endl;
	}

	void Print() {}
};

int main()
{

	{
		std::shared_ptr&lt;Entity&gt; e0;
		{
			// std::unique_ptr&lt;Entity&gt; entity = new Entity();  unique_ptr çš„æ„é€ å‡½æ•°æ˜¯ explicit çš„
			// std::unique_ptr&lt;Entity&gt; entity(new Entity());  æ˜¾å¼è°ƒç”¨æ„é€ å‡½æ•°
			std::unique_ptr&lt;Entity&gt; entity = std::make_unique&lt;Entity&gt;(); // å‡ºäºå¼‚å¸¸å®‰å…¨è€ƒè™‘ï¼Œåœ¨æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶æ›´åŠ å®‰å…¨ï¼Œä¸ä¼šå¾—åˆ°ä¸€ä¸ªæ²¡æœ‰å¼•ç”¨çš„ç©ºæŒ‡é’ˆå¯¼è‡´å†…å­˜æ³„éœ²
			std::shared_ptr&lt;Entity&gt; sharedEntity = std::make_shared&lt;Entity&gt;(); // shared_ptr ä¼šé¢å¤–åˆ†é…ä¸€å—å†…å­˜ç”¨äºå­˜å‚¨å¼•ç”¨è®¡æ•°ï¼Œå¦‚ä½•å…ˆæ„é€ ä¸€ä¸ªå¯¹è±¡å†è¿›è¡Œéšå¼è½¬æ¢ä¼šé€ æˆä¸¤æ¬¡å†…å­˜åˆ†é…
			// std::shared_ptr&lt;Entity&gt; e0 = sharedEntity;  å½“ç„¶ shared_ptr å¯ä»¥è¢«å¤åˆ¶
			e0 = sharedEntity;
			std::weak_ptr&lt;Entity&gt; weakEntity = sharedEntity; // ä¸ä¼šå¢åŠ  shared_ptr çš„å¼•ç”¨è®¡æ•°ï¼Œä½†æ˜¯å¯ä»¥é—® weak_ptr æ˜¯å¦è¿‡æœŸ
			entity-&gt;Print();
		}
	}
	std::cin.get();
}
Copy<br><br>
<br>å¤åˆ¶æŒ‡çš„æ˜¯æ‹·è´å†…å­˜ä¸­çš„æ•°æ®ï¼Œä»è€Œåœ¨å†…å­˜ä¸­æ‹¥æœ‰å¤šä¸ªå‰¯æœ¬
<br>å¤åˆ¶éœ€è¦æ—¶é—´ï¼Œè¦å°½é‡é¿å…ä¸å¿…è¦çš„å¤åˆ¶
<br>é™¤äº†å¼•ç”¨å¤–ï¼Œå½“å†™ä¸‹èµ‹å€¼è¿ç®—ç¬¦æ—¶ï¼Œæ€»æ˜¯åœ¨å¤åˆ¶ä¸ç®¡æ˜¯èµ‹å€¼åœ°å€è¿˜æ˜¯å…¶ä»–å€¼
<br>å½“è¯•å›¾åˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡å¹¶æŠŠå¦ä¸€ä¸ªç›¸åŒç±»å‹çš„å˜é‡èµ‹å€¼ç»™å®ƒæ—¶ï¼Œä¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°
<br>C++é»˜è®¤æä¾›çš„æ‹·è´æ„é€ å‡½æ•°çš„ä½œç”¨æ˜¯å†…å­˜å¤åˆ¶ï¼Œå°† other å¯¹è±¡çš„å†…å­˜æµ…æ‹·è´è¿›æˆå‘˜å˜é‡ï¼Œæˆ‘ä»¬æ›´æƒ³æ‹·è´çš„æ˜¯æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜
<br>æ€»æ˜¯é€šè¿‡ const å¼•ç”¨å»ä¼ é€’å¯¹è±¡ï¼Œæ²¡æœ‰ç†ç”±åˆ°å¤„å¤åˆ¶å¯¹è±¡
<br>#include &lt;iostream&gt;
#include &lt;cstring&gt;

class String
{
private:
	char* m_Buffer;
	unsigned int m_Size;
public:
	String(const char* string)
	{
		m_Size = strlen(string);
		m_Buffer = new char[m_Size];
		memcpy(m_Buffer, string, m_Size);
		m_Buffer[m_Size] = 0;
	}

	~String()
	{
		delete[] m_Buffer;
	}

	// String(const String&amp; other) = delete;  ä¸å…è®¸æ‹·è´

	String(const String&amp; other)
		: m_Size(other.m_Size)
	{
		std::cout &lt;&lt; "Copied String!" &lt;&lt; std::endl;

		m_Buffer = new char[m_Size + 1];
		memcpy(m_Buffer, other.m_Buffer, m_Size + 1);
	}

	char&amp; operator[](unsigned int index)
	{
		return m_Buffer[index];
	}

	friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; stream, const String&amp; string);

};

std::ostream&amp; operator&lt;&lt;(std::ostream&amp; stream, const String&amp; string)
{
	stream &lt;&lt; string.m_Buffer;
	return stream; 
}

void PrintString(const String&amp; string)
{
	String copy = string;
	std::cout &lt;&lt; string &lt;&lt; std::endl;
}

int main()
{
	String string = "Cherno";
	String second = string;  // å°†æˆå‘˜å˜é‡æ‹·è´åˆ°ä¸€å—æ–°çš„å†…å­˜ä¸­ï¼Œæµ…æ‹·è´æ—¶åªå¤åˆ¶äº†æŒ‡å‘å­—ç¬¦ä¸²åœ°å€çš„æŒ‡é’ˆï¼Œæ‰€ä»¥å†…å­˜ä¸­çš„ä¸¤ä¸ª String å…·æœ‰ç›¸åŒçš„ char * 

	PrintString(string);
	PrintString(second);
	std::cin.get();			// å½“åˆ°è¾¾ç¨‹åºæœ«å°¾æ—¶ delete[] è¢«è°ƒç”¨äº†ä¸¤æ¬¡ï¼Œç¨‹åºå´©æºƒ
}
Copy<br><br>
<br>æœ‰æ—¶å¯ä»¥é‡è½½ç®­å¤´æ“ä½œç¬¦è®©ä»£ç æ›´ç®€æ´
<br>#include &lt;iostream&gt;
#include &lt;cstring&gt;

class Entity
{
public:
	void Print() const { std::cout &lt;&lt; "Hello!" &lt;&lt; std::endl; }
};

class ScopedPtr
{
private:
	Entity* m_Obj;
public:
	ScopedPtr(Entity* entity)
		: m_Obj(entity)
	{

	}

	~ScopedPtr()
	{
		delete m_Obj;
	}

	Entity* GetObject() { return m_Obj; }
	
	Entity* operator-&gt;()
	{
		return m_Obj;	
	}

	const Entity* operator-&gt;() const
	{
		return m_Obj;
	}
};

int main()
{
	// Entity* ptr = &amp;e;
	// Entity&amp; entity = *ptr;

	// ptr-&gt;Print(); // åªæ˜¯ä¸€ä¸ªå¿«æ·æ–¹å¼
	// entity.Print();
	// (*ptr).Print();

	const ScopedPtr entity = new Entity();
	// entity.GetObject()-&gt;Print(); // è¿™å¤ªéº»çƒ¦äº†
	entity-&gt;Print();
	
	std::cin.get();
}
Copy<br>
<br>ç®­å¤´æ“ä½œç¬¦ä¹Ÿå¯ä»¥ç”¨æ¥æ‰¾å‡ºå˜é‡åœ¨å†…å­˜ä¸­çš„åç§»é‡ (ç›¸å¯¹äºç±»èµ·å§‹ä½ç½®)
<br>#include &lt;iostream&gt;
#include &lt;cstring&gt;

struct Vector3
{
	float x, y, z;
};


int main()
{
	int offset = (int)&amp;((Vector3*)nullptr)-&gt;x;
	std::cout &lt;&lt; offset &lt;&lt; std::endl;
	std::cin.get();
}
Copy<br><br>
<br>æ ‡å‡†æ¨¡ç‰ˆåº“å¯ä»¥æ¨¡ç‰ˆåŒ–ä»»ä½•ä¸œè¥¿ï¼Œå®¹å™¨çš„åº•å±‚æ•°æ®ç±»å‹ç”±ç¨‹åºå‘˜å†³å®šï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½ç”±æ¨¡ç‰ˆç»„æˆ
<br>æ¨¡ç‰ˆå¯ä»¥å¤„ç†ç¨‹åºå‘˜æä¾›çš„åº•å±‚æ•°æ®ç±»å‹
<br>vector æ›´åº”è¯¥è¢«ç§°ä¸º arraylist åŠ¨æ€æ•°ç»„ï¼Œè·ŸåŸå§‹çš„ array ç±»å‹ä¸åŒï¼Œvector å¯ä»¥åŠ¨æ€è°ƒæ•´å¤§å°
<br>#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;

struct Vertex
{
	float x, y, z;
};

std::ostream&amp; operator&lt;&lt;(std::ostream&amp; stream, const Vertex&amp; vertex)
{
	stream &lt;&lt; vertex.x &lt;&lt; ", " &lt;&lt; vertex.y &lt;&lt; ", " &lt;&lt; vertex.z;
	return stream;
}

void Function(const std::vector&lt;Vertex&gt;&amp; vertices)
{

}

int main()
{
	/*
	åº”è¯¥å­˜å‚¨å †åˆ†é…çš„æŒ‡é’ˆè¿˜æ˜¯å¯¹è±¡è§†æƒ…å†µè€Œå®šï¼Œå½“ç„¶å­˜å‚¨å¯¹è±¡æ˜¯ç†æƒ³çš„ï¼Œ
	å› ä¸ºåŠ¨æ€æ•°ç»„çš„å†…å­˜æ˜¯è¿ç»­åˆ†é…çš„ï¼Œå¦‚æœè¦éå†ã€è¯»å–ç­‰æ›´æ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœè¦è°ƒæ•´ vector çš„å¤§å°æ—¶å¼€é”€æ›´å¤§
	*/
	std::vector&lt;Vertex&gt; vertices; 
	vertices.push_back({ 1, 2, 3 }); // åˆ—è¡¨åˆå§‹åŒ–
	Function(vertices); // ç¡®ä¿é€šè¿‡å¼•ç”¨ä¼ é€’
	vertices.push_back({ 4, 5, 6 });

	for (int i = 0; i &lt; vertices.size(); i++)
	{
		std::cout &lt;&lt; vertices[i] &lt;&lt; std::endl;
	}

	for (const Vertex&amp; v : vertices)
		std::cout &lt;&lt; v &lt;&lt; std::endl; // å¦‚æœç›´æ¥ä½¿ç”¨å˜é‡å®é™…ä¸Šå°†æ¯ä¸ª Vertex éƒ½å¤åˆ¶åˆ°äº† v ä¸­ï¼Œæ‰€ä»¥ä½¿ç”¨å¼•ç”¨å¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœä½†æ²¡æœ‰æ‹·è´è¿‡ç¨‹

	vertices.erase(vertices.begin() + 1);
	vertices.clear();

	std::cin.get();
}
Copy<br><br>
<br>å‘ vector ä¸­ push_back å…ƒç´ æ—¶ï¼Œå¦‚æœ vector ä¸å¤Ÿå¤§ï¼Œéœ€è¦åˆ†é…æ–°çš„å†…å­˜ï¼Œå¹¶å°†å½“å‰çš„å†…å®¹å¤åˆ¶åˆ°æ–°å†…å­˜çš„ä½ç½®ï¼Œç„¶åé‡Šæ”¾æ—§ä½ç½®çš„å†…å­˜
<br>é™ä½è¿è¡Œé€Ÿåº¦çš„åŸå› æ˜¯éœ€è¦ä¸æ–­é‡æ–°åˆ†é…å†…å­˜å¹¶å¤åˆ¶å…ƒç´ ï¼Œæ‰€ä»¥ä¼˜åŒ–çš„æ–¹æ¡ˆæ˜¯å¦‚ä½•é¿å…æ‹·è´ï¼Œéœ€è¦çŸ¥é“æ‹·è´æ˜¯ä»€ä¹ˆæ—¶å€™å‘ç”Ÿçš„
<br>#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;

struct Vertex
{
	float x, y, z;

	Vertex(float x, float y, float z)
		: x(x), y(y), z(z)
	{

	}

	Vertex(const Vertex&amp; vertex)
		: x(vertex.x), y(vertex.y), z(vertex.z)
	{
		std::cout &lt;&lt; "Copied!" &lt;&lt; std::endl;
	}
};

std::ostream&amp; operator&lt;&lt;(std::ostream&amp; stream, const Vertex&amp; vertex)
{
	stream &lt;&lt; vertex.x &lt;&lt; ", " &lt;&lt; vertex.y &lt;&lt; ", " &lt;&lt; vertex.z;
	return stream;
}

int main()
{
	std::vector&lt;Vertex&gt; vertices; 
	vertices.reserve(3); // ç¡®ä¿æ‹¥æœ‰è¶³å¤Ÿçš„å†…å­˜ ä¼˜åŒ–ç­–ç•¥2
	// åˆ›å»º vertex æ—¶å®é™…ä¸Šæ˜¯åœ¨ä¸»å‡½æ•°çš„æ ˆå¸§ä¸Šåˆ›å»º(main)ï¼Œæ‰€ä»¥ push æ—¶éœ€è¦å°† Vertex æ‹·è´åˆ° vector åˆ†é…çš„å†…å­˜ä¸­
	/*
	ä¼˜åŒ–ç­–ç•¥1ï¼šåœ¨é€‚å½“çš„ä½ç½®æ„é€  Vertex ï¼Œåœ¨ vector åˆ†é…çš„å†…å­˜ä¸­
	ä¼˜åŒ–ç­–ç•¥2ï¼šå¦‚æœäº†è§£ç¯å¢ƒï¼Œç›´æ¥å‘Šè¯‰ vector ä¸ç”¨å†è°ƒæ•´å¤§å°
	*/
	vertices.emplace_back(1, 2, 3); // ä»…ä¼ é€’äº†æ„é€ å‡½æ•°çš„å‚æ•°åˆ—è¡¨
	vertices.push_back(Vertex(4, 5, 6)); // æ¯æ¬¡ push ä¸€ä¸ªå…ƒç´ ï¼Œvertices çš„ capacity å°±å¢åŠ  1
	vertices.push_back(Vertex(7, 8, 9));

	std::cin.get();
}
Copy<br><br>
<br>åœ¨å®é™…çš„è§£å†³æ–¹æ¡ˆçš„æ–‡ä»¶å¤¹ä¸­ï¼Œæœ€å¥½ä¿ç•™ä½¿ç”¨çš„åº“çš„ç‰ˆæœ¬
<br>æœ‰æ¡ä»¶çš„æƒ…å†µä¸‹æœ€å¥½æ˜¯å®é™…æ„å»ºæºä»£ç ï¼Œå°†å…¶ç¼–è¯‘ä¸ºé™æ€æˆ–åŠ¨æ€åº“ï¼Œå¦‚æœæ²¡æœ‰åº“çš„æºç ï¼Œé“¾æ¥äºŒè¿›åˆ¶æ–‡ä»¶å¯èƒ½æ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©
<br>ä½¿ç”¨çš„æ˜¯ 32 ä½è¿˜æ˜¯ 64 ä½çš„åº“å–å†³äºç›®æ ‡åº”ç”¨ç¨‹åºçš„æ¶æ„
<br>C++ åº“é€šå¸¸ç”±ä¸¤éƒ¨åˆ†åŒ…å«ç›®å½• (includes) å’Œåº“ç›®å½• (library) ï¼Œinclude ç›®å½•ä¸­å­˜æ”¾éœ€è¦ä½¿ç”¨çš„å¤´æ–‡ä»¶ï¼Œlib ç›®å½•ä¸­æœ‰é¢„æ„å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé€šå¸¸æœ‰é™æ€åº“å’ŒåŠ¨æ€åº“
<br>é™æ€é“¾æ¥ä¼šå°†åº“æ”¾å…¥å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒåŠ¨æ€é“¾æ¥åº“åœ¨ç¨‹åºè¿è¡Œæ—¶è¢«é“¾æ¥
<br>ä½¿ç”¨åº“çš„æ—¶å€™éœ€è¦åŒ…å«å¤´æ–‡ä»¶ï¼ŒåŒæ—¶å°†é“¾æ¥å™¨æŒ‡å‘åº“æ–‡ä»¶
<br>å¼•å·åŒ…å«å¤´æ–‡ä»¶ä¼šå…ˆæ£€æŸ¥ç›¸å¯¹è·¯å¾„ï¼Œå†å»æ£€æŸ¥ç¼–è¯‘å™¨çš„ include è·¯å¾„
<br>cpp ä¸­ä½¿ç”¨ c è¯­è¨€åº“éœ€è¦ä½¿ç”¨ extern "C"
<br><br>
<br>é™æ€é“¾æ¥åœ¨ç¼–è¯‘æ—¶å‘ç”Ÿï¼ŒåŠ¨æ€é“¾æ¥åœ¨è¿è¡Œæ—¶å‘ç”Ÿï¼Œé™æ€é“¾æ¥å’ŒåŠ¨æ€é“¾æ¥å­˜åœ¨æ€§èƒ½å·®å¼‚ï¼Œé™æ€é“¾æ¥å…è®¸æ›´å¤šä¼˜åŒ–å‘ç”Ÿ
<br>åŠ¨æ€åº“å…·æœ‰é™æ€çš„åŠ¨æ€åº“ç‰ˆæœ¬ï¼Œå³åº”ç”¨ç¨‹åºå·²ç»çŸ¥é“åŠ¨æ€åº“ä¸­å­˜åœ¨ä»€ä¹ˆå‡½æ•°ï¼Œæˆ–å¯ä»¥ä½¿ç”¨ä»€ä¹ˆå‡½æ•°ï¼Œå¦ä¸€ç§æ˜¯ä»»æ„åŠ è½½è¿™ä¸ªåŠ¨æ€åº“ï¼Œä½†ä¸çŸ¥é“é‡Œé¢æœ‰ä»€ä¹ˆ
<br>å¤´æ–‡ä»¶åŒæ—¶æ”¯æŒåŠ¨æ€é“¾æ¥å’ŒåŠ¨æ€é“¾æ¥
<br>Windows ä½¿ç”¨åŠ¨æ€é“¾æ¥åº“å¯ä»¥å°† dll æ–‡ä»¶æ”¾åœ¨å¯æ‰§è¡Œç¨‹åºçš„åŒä¸€ç›®å½•ä¸‹
<br><br>
<br>Cherno å¦‚æœåŒ…å«äº† VS è§£å†³æ–¹æ¡ˆå¤–çš„ä¸œè¥¿ (å®Œå…¨ä¸é¡¹ç›®æ— å…³çš„å¤–éƒ¨ä¾èµ–é¡¹) ä¼šä½¿ç”¨å°–æ‹¬å·ï¼Œå¦‚æœæ˜¯åœ¨è§£å†³æ–¹æ¡ˆä¸­æ‰¾åˆ°çš„ä¼šä½¿ç”¨å¼•å·
<br><br>
<br>å…·æœ‰å¤šè¿”å›å€¼æ—¶å¯ä»¥é€šè¿‡å‚æ•°ä¼ é€’è€Œä¸ä½¿ç”¨è¿”å›å€¼ï¼Œæœ€å¥½åœ¨å‚æ•°ä¹‹å‰åŠ ä¸Š out
<br>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯ä½¿ç”¨ new å¯¼è‡´å †åˆ†é…çš„å‘ç”Ÿï¼Œä¹Ÿå¯ä»¥è¿”å› array å’Œ vector ï¼Œç”±äº array åœ¨æ ˆä¸Šåˆ›å»ºè€Œ vector æ•°æ®å­˜å‚¨åœ¨å †ä¸­ï¼Œæ‰€ä»¥ array é€šå¸¸ä¼šæ›´å¿«
<br>ä½¿ç”¨ tuple æˆ– pairï¼Œtuple æ˜¯ä¸€ä¸ªåŒ…æ‹¬å¤šä¸ªå˜é‡çš„ç±»ä½†æ˜¯ä¸å…³å¿ƒå˜é‡çš„ç±»å‹
<br>ä½¿ç”¨ç»“æ„ä½“è¿”å›
<br>#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;tuple&gt;

struct RetString
{
	std::string string1;
	std::string string2;
};

std::tuple&lt;std::string, std::string&gt; RetMultStringWithTuple()
{
	std::string string1("Hello");
	std::string string2("Hello");

	return std::make_pair(string1, string2);
}

std::pair&lt;std::string, std::string&gt; RetMultStringWithPair()
{
	std::string string1("Hello");
	std::string string2("Hello");

	return std::make_pair(string1, string2);
}

RetString RetMultStringWithStruct()
{
	std::string string1("Hello");
	std::string string2("Hello");

	return { string1, string2 }; 
}

int main()
{
	// std::tuple&lt;std::string, std::string&gt; sources = RetMultString();
	auto sources = RetMultStringWithTuple();
	std::string string1 = std::get&lt;0&gt;(sources);

	auto sources_pair = RetMultStringWithPair();
	std::string string2 = sources_pair.second; // ä½†æ˜¯å°†è¿”å›å€¼ä¼ å…¥æ–°å‡½æ•°æ—¶å®¹æ˜“ææ··æ¯ä¸ªå˜é‡åˆ†åˆ«æ˜¯ä»€ä¹ˆ

	auto sources_struct = RetMultStringWithStruct();
	std::string string3 = sources_struct.string1;

	std::cin.get();
}
Copy<br><br>
<br>æ¨¡ç‰ˆå’Œå®æœ‰ç‚¹ç±»ä¼¼ï¼Œä½†æ¨¡ç‰ˆè¢« evaluate çš„æ—¶é—´æ›´æ™š
<br>æ¨¡ç‰ˆå…è®¸å®šä¹‰ä¸€ä¸ªæ ¹æ®ç”¨é€”è¿›è¡Œç¼–è¯‘çš„æ¨¡ç‰ˆï¼ŒåŸºäºæä¾›ç»™ç¼–è¯‘å™¨çš„è§„åˆ™è®©ç¼–è¯‘å™¨å†™ä»£ç 
<br>#include &lt;iostream&gt;

/*
ä¸‰ä¸ªå‡½æ•°çš„ä¸åŒæ˜¯è¾“å…¥å‚æ•°ï¼Œå®é™…ä¸Šå®šä¹‰äº†ä¸‰ä¸ª Print çš„é‡è½½å‡½æ•°
*/
// void Print(int value)
// {
// 	std::cout &lt;&lt; value &lt;&lt; std::endl;
// }

// void Print(std::string value)
// {
// 	std::cout &lt;&lt; value &lt;&lt; std::endl;
// }

// void Print(float value)
// {
// 	std::cout &lt;&lt; value &lt;&lt; std::endl;
// }

/*
åœ¨è¢«è°ƒç”¨æ—¶å‡½æ•°æ‰è¢«åˆ›å»º
*/
template &lt;typename T&gt; // &lt;&gt;ä¸­çš„æ˜¯æ¨¡ç‰ˆå‚æ•°ï¼Œç±»å‹ä¸º typename / class ï¼Œåç§°æ˜¯ T
void Print(T value) // å½“è°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥çš„å‚æ•°å°±æ—¶æ¨¡ç‰ˆä¸­çš„å‚æ•°ç±»å‹ï¼ŒPrintæ–¹æ³•åªæ˜¯ä¸€ä¸ªæ¨¡ç‰ˆï¼Œå½“è¢«è°ƒç”¨æ—¶æ¨¡ç‰ˆæ‰çœŸæ­£è¢«åˆ›å»º
{
	std::cout &lt;&lt; value &lt;&lt; std::endl;
}

void Print(int value) // è¢«è°ƒç”¨æ—¶ç›¸å½“äºè¿›è¡Œäº†å¡«ç©ºï¼Œåœ¨æ¨¡ç‰ˆå®ä¾‹åŒ–é˜¶æ®µè¢«åˆ›å»º
{
	std::cout &lt;&lt; value &lt;&lt; std::endl;
}

template &lt;typename T&gt;
void Printerr(T value) // ä¸è°ƒç”¨å‡½æ•°ï¼Œç¼–è¯‘ä¸ä¼šæŠ¥é”™ (ç”±ç¼–è¯‘å™¨å†³å®š)
{
	std::cout &lt;&lt; val &lt;&lt; std::endl;
}

int main()
{
	Print(5);  // æ ¹æ®ä¼ é€’å‚æ•°çš„ä¸åŒï¼Œå‡½æ•°è¢«åˆ›å»ºå¹¶ä½œä¸ºæºä»£ç è¢«ç¼–è¯‘
	Print("Hello"); // è‡ªåŠ¨æ ¹æ®ä¼ é€’çš„å‚æ•°ç±»å‹è¿›è¡Œæ¨å¯¼
	Print(5.5f);
	
	Print&lt;int&gt;(5); // æ˜¾å¼æŒ‡å®šç±»å‹
	Print&lt;std::string&gt;("Hello");
	std::cin.get();
}
Copy<br>
<br>æ¨¡ç‰ˆä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨ç±»ä¸Š
<br>#include &lt;iostream&gt;

template&lt;typename T, int N&gt;
class Array
{
private:
	T m_Array[N]; // æ ˆåˆ†é…çš„æ•°ç»„æ‰€ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™å°±å¿…é¡»çŸ¥é“å¤§å°
public:
	int GetSize() const { return N; }
};

int main()
{
	Array&lt;int, 5&gt; array;
	Array&lt;std::string, 50&gt; array;

	std::cin.get();
}
Copy<br>
<br>å½“æ¨¡ç‰ˆå˜çš„è¶Šæ¥è¶Šå¤æ‚æ—¶ï¼Œéœ€è¦èŠ±å¾ˆå¤šæ—¶é—´ææ¸…æ¥šå“ªäº›ä¸œè¥¿è¢«ç¼–è¯‘äº†ï¼Œæ‰€ä»¥è¦é€‚åº¦ä½¿ç”¨æ¨¡ç‰ˆ
<br><br>
<br>new å…³é”®å­—å®é™…ä¸Šè°ƒç”¨äº† malloc å‡½æ•°ï¼Œéšåè°ƒç”¨æ“ä½œç³»ç»Ÿåº•å±‚çš„å‡½æ•°åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œç¨‹åºç»´æŠ¤ä¸€ä¸ªç©ºé—²åˆ—è¡¨ï¼Œä½¿ç”¨ malloc æ—¶ç¨‹åºæµè§ˆç©ºé—²åˆ—è¡¨æ‰¾åˆ°ç©ºé—²å†…å­˜è¿”å›ä¸€ä¸ªæŒ‡é’ˆ
<br>ä½¿ç”¨å †å®¹æ˜“å‡ºç°ç¼“å­˜ä¸å‘½ä¸­
<br>#include &lt;iostream&gt;

struct Vector3
{
	float x, y, z;
	Vector3()
		: x(10), y(11), z(12)
	{

	}
};

int main()
{
	int value = 5;
	int array[5];
	array[0] = 1;
	array[1] = 2;
	array[2] = 3;
	array[3] = 4;
	array[4] = 5;
	int* hvalue = new int;
	*hvalue = 5;
	int* harray = new int[5];
	harray[0] = 1;
	harray[1] = 2;
	harray[2] = 3;
	harray[3] = 4;
	harray[4] = 5;

	Vector3* hvector = new Vector3();

	delete hvalue;
	delete[] harray;
	delete hvector;

	std::cin.get();
}
Copy<br><br>
<br>ä½¿ç”¨é¢„å¤„ç†å™¨å®ç°è‡ªåŠ¨åŒ–
<br>é¢„å¤„ç†é˜¶æ®µå®é™…ä¸Šæ˜¯æ–‡æœ¬ç¼–è¾‘çš„é˜¶æ®µï¼Œå¯ä»¥æ§åˆ¶è¾“å…¥ç»™ç¼–è¯‘å™¨çš„æ–‡æœ¬
<br>ä½¿ç”¨å®å¯ä»¥å°†ä»£ç ä¸­çš„æ–‡æœ¬æ›¿æ¢ä¸ºå…¶ä»–ä¸œè¥¿ï¼Œå°±åƒéå†ä»£ç æ‰§è¡ŒæŸ¥æ‰¾å’Œæ›¿æ¢
<br>#include &lt;iostream&gt;

#define OPEN_CURLY {

int main()
OPEN_CURLY	
	std::cin.get();
}
Copy<br>#include &lt;iostream&gt;

#define PR_DEBUG 1 

#if PR_DEBUG == 1 // å¦‚æœä»…ä»…åˆ¤æ–­æ˜¯å¦å®šä¹‰äº†ä¸€ä¸ª valueï¼Œå¦‚æœè¦ä¿®æ”¹çš„è¯åªèƒ½æ³¨é‡Šæˆ–è€…åˆ é™¤å…ˆå‰çš„å®šä¹‰ï¼Œå–å€¼çš„è¯æ¯”è¾ƒå¯æ§
#define LOG(x) std::cout &lt;&lt; x &lt;&lt; std::endl
#elif defined(PR_RELEASE)
#define LOG(x)
#endif

#define MAIN int main() \ // å®å®šä¹‰å¯ä»¥ç”¨åæ–œæ (Enter çš„è½¬ä¹‰)åŒ…å«å¤šè¡Œï¼Œä¸èƒ½ \[space] ä¼šè¢«ä½œä¸ºç©ºæ ¼çš„è½¬ä¹‰
{\
	std::cin.get();\
}

#if 0 // if å¯ä»¥å°†æ•´å—ä»£ç ç¦ç”¨
void Print()
{

}
#endif

int main()
{
	LOG("Hello");
	std::cin.get();
}
Copy<br><br>
<br>ä½¿ç”¨ auto å¯ä»¥è®© C++ è‡ªåŠ¨æ¨å¯¼å‡ºæ•°æ®ç±»å‹ï¼Œä¸ç®¡æ˜¯åˆ›å»ºã€åˆå§‹åŒ–è¿˜æ˜¯èµ‹å€¼æ—¶
<br>å¦‚æœç±»å‹éå¸¸é•¿ä½¿ç”¨ auto èƒ½å¤Ÿç®€åŒ–ä»£ç ï¼Œæˆ–è€…è¿›å…¥å¤æ‚çš„ä»£ç é›†åŒ…å«äº†æ¨¡ç‰ˆç­‰ï¼Œä¸å¾—ä¸ä½¿ç”¨ auto
<br>auto ä¹Ÿå¯ä»¥ç”¨äºåç½®è¿”å›ç±»å‹
<br>#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;unordered_map&gt;

auto GetName() -&gt; char* // åç½®è¿”å›ç±»å‹
{

}

char* GetName() // å¦‚æœå°† std::string æ”¹ä¸º char * åœ¨ main å‡½æ•°ä¸­ä½¿ç”¨ auto å°±ä¸ç”¨é‡å¤ä¿®æ”¹äº†
{
	return "Cherno";
}

class Device {};

class DeviceManager
{
private:
	std::unordered_map&lt;std::string, std::vector&lt;Device *&gt;&gt; m_Devices;
public:
	const std::unordered_map&lt;std::string, std::vector&lt;Device *&gt;&gt;&amp; GetDevices() const
	{
		return m_Devices;
	}
	
};

int main()
{
	int a = 5;
	auto b = a;

	std::cout &lt;&lt; b &lt;&lt; std::endl;

	/*
	å¦‚æœæ”¹å˜ api å®¢æˆ·ç«¯ä¸ç”¨åšå‡ºä»»ä½•æ”¹å˜ï¼Œä½†æ˜¯æˆ‘ä¹Ÿä¸çŸ¥é“è¿”å›å€¼æ”¹å˜äº†ï¼Œ
	å¯¼è‡´åŸæ¥è¿”å›ç±»å‹çš„ä¸€äº›æ–¹æ³•å¯èƒ½æ— æ³•ä½¿ç”¨ï¼Œå¹¶ç ´åä¾èµ–äºç‰¹å®šç±»å‹çš„ä»£ç 
	æ‰€ä»¥æ˜¯æœ‰ä¸¤é¢æ€§çš„
	*/
	auto name = GetName(); 
	std::string name1 = GetName();

	// name.size(); ä¸å¯ä»¥
	name1.size();

	std::vector&lt;std::string&gt; strings;
	strings.push_back("Apple");
	strings.push_back("Orange");

	// for (std::vector&lt;std::string&gt;::iterator it = strings.begin();
	// 		it != strings.end(); it++)
	// {
	// 	std::cout &lt;&lt; *it &lt;&lt; std::endl;
	// }

	for (auto it = strings.begin();
			it != strings.end(); it++)
	{
		std::cout &lt;&lt; *it &lt;&lt; std::endl;
	}

	using DeviceMap = std::unordered_map&lt;std::string. std::vector&lt;Device*&gt;&gt;;
	DeviceManager dm;
	const DeviceMap&amp;
		devices = dm.GetDevices();

	const auto&amp; devices_auto = dm.GetDevices();
	auto d =dm.GetDevices(); // å¢åŠ ä¸€æ¬¡æ‹·è´ã€‚è¿”å›å¼•ç”¨æ—¶è¦ç»™ auto åŠ ä¸Šå¼•ç”¨ç¬¦å·
	std::cin.get();
}
Copy<br><br>
<br>å¤„ç†é™æ€æ•°ç»„çš„ç±»ï¼Œä¸èƒ½æ”¹å˜å¤§å°
<br>std::array æœ‰å¯é€‰çš„è¾¹ç•Œæ£€æŸ¥
<br>size() è¿”å›çš„ç±»å‹æ˜¯ constexpr è¯´æ˜ size() æ–¹æ³•è¿”å›çš„å°±æ˜¯ä¸€ä¸ªæ•°å€¼
<br>      // Capacity.
      [[__nodiscard__, __gnu__::__const__, __gnu__::__always_inline__]]
      constexpr size_type
      size() const noexcept { return _Nm; }
Copy<br>#include &lt;iostream&gt;
#include &lt;array&gt;
#include &lt;algorithm&gt;

void PrintArray(const std::array&lt;int, 5&gt;&amp;  data)
{
	
}

int main()
{

	std::array&lt;int, 5&gt; data;
	data.size();
	std::sort(data.begin(), data.end());
	data[0] = 2;
	data[4] = 1;

	std::cin.get();
}
Copy<br><br>
<br>å‡½æ•°æŒ‡é’ˆæ˜¯å°†ä¸€ä¸ªå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡çš„æ–¹æ³•
<br>é€šè¿‡å‡½æ•°æŒ‡é’ˆå¯ä»¥å°†å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°
<br>åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­æ‰¾åˆ°å‡½æ•°æŒ‡ä»¤çš„å†…å­˜åœ°å€
<br>#include &lt;iostream&gt;

void HelloWorld(int a)
{
	std::cout &lt;&lt; "Hello World! Value: " &lt;&lt; a &lt;&lt; std::endl;
}

int main()
{
	void(*chris)(int) = HelloWorld;

	auto chris = HelloWorld; // å‡½æ•°åªæ˜¯ cpu æŒ‡ä»¤

	typedef void(*HelloWorldFunction)(int);
	HelloWorldFunction function = HelloWorld;

	function(8);

	std::cin.get();
}
Copy<br>#include &lt;iostream&gt;
#include &lt;vector&gt;

void PrintValue(int value)
{
	std::cout &lt;&lt; "Value: " &lt;&lt; value &lt;&lt; std::endl;
}

void ForEach(const std::vector&lt;int&gt;&amp; values, void(*func)(int))
{
	for (int value : values)
		func(value);
}

int main()
{
	std::vector&lt;int&gt; values = { 1, 5, 4, 2, 3 };
	ForEach(values, PrintValue);
	ForEach(values, [](int value){std::cout &lt;&lt; "Value: " &lt;&lt; value &lt;&lt; std::endl;}); // [] æ•è·æ¨¡å¼

	std::cin.get();
}
Copy<br><br>
<br>åªè¦æœ‰å‡½æ•°æŒ‡é’ˆå°±å¯ä»¥åœ¨ C++ ä¸­ä½¿ç”¨ lambda
<br>#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;functional&gt;
#include &lt;algorithm&gt;

void PrintValue(int value)
{
	std::cout &lt;&lt; "Value: " &lt;&lt; value &lt;&lt; std::endl;
}

void ForEach(const std::vector&lt;int&gt;&amp; values, const std::function&lt;void(int)&gt;&amp; func)
{
	for (int value : values)
		func(value);
}

int main()
{
	std::vector&lt;int&gt; values = { 1, 5, 4, 2, 3 };
	auto it = std::find_if(values.begin(), values.end(), [](int value){ return value &gt; 3; });
	std::cout &lt;&lt; *it &lt;&lt; std::endl;

	ForEach(values, PrintValue);

	int a = 5;
	auto lambda = [=](int value) mutable { a = 5; std::cout &lt;&lt; "Value: " &lt;&lt; a &lt;&lt; std::endl; };

	ForEach(values, lambda); // [] æ•è·æ¨¡å¼

	std::cin.get();
}
Copy<br><br>
<br>å¦‚æœéœ€è¦ä½¿ç”¨å°±å°½é‡åœ¨è¾ƒå°çš„ä½œç”¨åŸŸä¸‹ä½¿ç”¨
<br>#include &lt;iostream&gt;
#include &lt;string&gt;

namespace apple {
	void print(const std::string&amp; text)
	{
		std::cout &lt;&lt; text &lt;&lt; std::endl;
	}
}

namespace orange {
	void print(const char* text)
	{
		std::string temp = text;
		std::reverse(temp.begin(), temp.end());
		std::cout &lt;&lt; temp &lt;&lt; std::endl;
	}
}

using namespace apple;
using namespace orange;

int main()
{
	print("Hello"); // ä¸ä½¿ç”¨ orange å‘½åç©ºé—´æ—¶å®é™…å‘ç”Ÿäº†éšå¼è½¬æ¢ï¼Œå½“ä½¿ç”¨ orange å…¶æä¾›çš„ printå‡½æ•° æ›´åŠ åŒ¹é…
	// æ‰€ä»¥ä¸è¦ç”¨ using namespace

	std::cin.get();
}
Copy<br><br>
<br>åç§°ç©ºé—´çš„ä½œç”¨æ˜¯é˜²æ­¢åç§°å†²çª
<br>ç±»æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåç§°ç©ºé—´
<br>#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;string&gt;

namespace apple {
	void print(const char* text)
	{
		std::cout &lt;&lt; text &lt;&lt; std::endl;
	}

	void print_again()
	{

	}
}

namespace orange {
	void print(const char* text)
	{
		std::string temp = text;
		std::reverse(temp.begin(), temp.end());
		std::cout &lt;&lt; temp &lt;&lt; std::endl;
	}
}

using namespace apple;
using namespace orange;

int main()
{
	using apple::print; // å¦‚æœä»…ä»…æƒ³ä½¿ç”¨å‘½åç©ºé—´ä¸­çš„ç‰¹å®šæ–¹æ³•å¯ä»¥è¿™ä¹ˆå†™
	namespace a = apple; // å½“ç„¶å‘½åç©ºé—´å¯ä»¥åµŒå¥— namespace a = apple::function ...

	print("Hello"); // Cè¯­è¨€æ²¡æœ‰åç§°ç©ºé—´ï¼Œæ‰€ä»¥ä¸å¾—ä¸å°†åº“çš„åå­—æ”¾åœ¨ symbol ä¹‹å‰
	a::print("Hello");
	apple::print_again(); 

	std::cin.get();
}
Copy<br><br>#include &lt;iostream&gt;
#include &lt;thread&gt;

static bool s_Finished = false;

void DoWork()
{	
	using namespace std::literals::chrono_literals;

	std::cout &lt;&lt; "Started thread id =" &lt;&lt; std::this_thread::get_id() &lt;&lt; std::endl;

	while (!s_Finished)
	{
		std::cout &lt;&lt; "Working...\n";
		std::this_thread::sleep_for(1s);
	}
}

int main()
{
	std::thread worker(DoWork);

	std::cin.get();
	s_Finished = true;

	worker.join(); // åœ¨ä¸»çº¿ç¨‹ä¸Šç­‰å¾…å·¥ä½œè¿›ç¨‹å®Œæˆæ‰€æœ‰çš„æ‰§è¡Œåï¼Œå†ç»§ç»­æ‰§è¡Œä¸»çº¿ç¨‹

	std::cout &lt;&lt; "Finished." &lt;&lt; std::endl;
	
	std::cin.get();
}
Copy<br><br>
<br>å¦‚æœéœ€è¦é«˜ç²¾ç¡®åº¦çš„è®¡æ—¶éœ€è¦ä½¿ç”¨æ“ä½œç³»ç»Ÿåº“
<br>#include &lt;iostream&gt;
#include &lt;chrono&gt;
#include &lt;thread&gt;

struct Timer
{
	std::chrono::_V2::system_clock::time_point start, end;
	std::chrono::duration&lt;float&gt; duration;

	Timer()
	{
		start = std::chrono::high_resolution_clock::now();
	}

	~Timer()
	{
		end = std::chrono::high_resolution_clock::now();
		duration = end - start;

		float ms = duration.count() * 1000.0f;
		std::cout &lt;&lt; "Timer took " &lt;&lt; ms &lt;&lt; "ms " &lt;&lt; std::endl; 
	}
};

void Function()
{
	Timer timer;
	for (int i = 0; i &lt; 100; i++)
		std::cout &lt;&lt; "Hello" &lt;&lt; std::endl; // io å¤šç¨‹åºæ›´æ…¢
}

int main()
{
	using namespace std::literals::chrono_literals;

	Function();

	auto start = std::chrono::high_resolution_clock::now();

	std::this_thread::sleep_for(1s);
	
	
	auto end = std::chrono::high_resolution_clock::now();
	std::chrono::duration&lt;float&gt; duration = end - start;
	std::cout &lt;&lt; duration.count() &lt;&lt; "s" &lt;&lt; std::endl;
	
	std::cin.get();
}
Copy<br><br>#include &lt;iostream&gt;

int main()
{
	int* array = new int[5];
	int** a2d = new int*[5];
	for (int i = 0; i &lt; 5; i++) // ä¼šé€ æˆå†…å­˜ç¢ç‰‡çš„é—®é¢˜
		a2d[i] = new int [5];

	for (int i = 0; i &lt; 5; i++)
	{
		delete[] a2d[i];
	}

	delete[] a2d;

	int*** a3d = new int**[5];
	for (int i = 0; i &lt; 5; i++)
	{
		a3d[i] = new int*[5];
		for (int j = 0; j &lt; 5; j++)
			a3d[i][j] = new int[5];
	}

	a3d[0][0][0] = 0;

	int* array = new int[5 * 5];
	for (int y = 0; y &lt; 5; y++)
	{
		for (int x = 0; x &lt; 5; x++)
		{
			array[x + y * 5] = 2;
		}
	}

	std::cin.get();
}
Copy<br><br>#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;

int main()
{
	std::vector&lt;int&gt; values = {3, 5, 1, 4, 2};
	std::sort(values.begin(), values.end()); // ä¼šä½¿ç”¨ operator&lt; è¿›è¡Œæ’åº
	std::sort(values.begin(), values.end(), std::greater&lt;int&gt;()); // ä½¿ç”¨æ ‡å‡†åº“çš„å‡½æ•°è¿›è¡Œæ’åº
	std::sort(values.begin(), values.end(), [](int a, int b){
		if (a == 1)
			return false; // a è¦æ’åœ¨åé¢
		if (b == 1)
			return true; // a è¦æ’åœ¨å‰é¢ true å°±æ˜¯ a, b è¿™ä¸ªé¡ºåº false äº¤æ¢ä¸€ä¸‹
		return a &lt; b; // å¦‚æœ a &gt; b è¿”å› false æŠŠ a æ’åœ¨ b åé¢
	});

	for(int value : values)
	{
		std::cout &lt;&lt; value &lt;&lt; std::endl;
	}

	std::cin.get();
}
Copy<br><br>
<br>æ¯”å¦‚å¦‚æœæœ‰ä¸€ä¸ªç±»ï¼Œæƒ³æŠŠè¿™ä¸ªç±»è§£é‡Šä¸ºä¸€æ®µå­—èŠ‚æµ
<br>æŠŠæ‹¥æœ‰çš„ä¸€æ®µå†…å­˜å½“ä½œä¸åŒç±»å‹çš„å†…å­˜æ¥å¯¹å¾…ï¼Œå°†åŸå§‹ç±»å‹ä½œä¸ºæŒ‡é’ˆï¼Œå¹¶ä¸”å°†å…¶è½¬æ¢ä¸ºå¦ä¸€ä¸ªæŒ‡é’ˆ
<br>#include &lt;iostream&gt;

struct Entity
{
	int x, y;

	int* GetPositions()
	{
		return &amp;x;
	}
};

int main()
{
	int a = 50;
	// double value = a;  å®é™…ä¸Šåšäº†ä¸€æ¬¡éšå¼è½¬æ¢ï¼Œåœ¨å†…å­˜ä¸­çš„å¦ä¸€ä¸ªåœ°æ–¹å­˜å‚¨äº† value

	double value = *(double*)&amp;a; // int å  4 å­—èŠ‚ double å  8 å­—èŠ‚
	// double&amp; value = *(double*)&amp;a; // dangerous
	std::cout &lt;&lt; value &lt;&lt; std::endl;

	Entity e = { 1, 2 }; // ç»“æ„ä½“ 2 * 4B æ²¡æœ‰å¤šä½™çš„ç©ºé—´ï¼Œå¯ä»¥æŠŠè¿™ä¸ªç»“æ„ä½“å½“ä½œä¸€ä¸ªä¸€ç»´æ•°ç»„
	int* position = (int *)&amp;e;

	int y = *(int*)((char*)&amp;e + 4);

	std::cout &lt;&lt; position[0] &lt;&lt; ", " &lt;&lt; position[1] &lt;&lt; std::endl;
	std::cout &lt;&lt; y &lt;&lt; std::endl;

	std::cin.get();
}
Copy<br><br>
<br>è”åˆä½“åªèƒ½æ‹¥æœ‰ä¸€ä¸ªæˆå‘˜
<br>#include &lt;iostream&gt;

struct Vector2
{
	float x, y;
};

struct Vector4
{
	union
	{
		struct
		{
			float x, y, z, w;
		};
		struct
		{
			Vector2 a, b;
		};
	};

	// Vector2&amp; GetA()
	// {
	// 	return *(Vector2*)&amp;x;
	// }
};

void PrintVector2(const Vector2&amp; vector)
{
	std::cout &lt;&lt; vector.x &lt;&lt; ", " &lt;&lt; vector.y &lt;&lt; std::endl;
}

int main()
{
	struct Union
	{
		union
		{
			float a;
			int b;
		};
	};

	Union u;
	u.a = 2.0f;
	std::cout &lt;&lt; u.a &lt;&lt; ", " &lt;&lt; u.b &lt;&lt; std::endl;

	Vector4 vector = { 1.0f, 2.0f, 3.0f, 4.0f };
	vector.x = 2.0f;
	PrintVector2(vector.a);

	std::cin.get();
}
Copy<br><br>
<br>å¦‚æœæœ‰ä¸€ä¸ªç±» A ï¼Œç±» B æ´¾ç”Ÿäºç±» Aï¼Œæƒ³æŠŠç±» B å¼•ç”¨ä¸ºç±» Aï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯ç±» B ï¼Œç„¶åå†³å®šåˆ é™¤ A æˆ–è€… A ä»¥æŸç§æ–¹å¼è¢«åˆ é™¤äº†ï¼Œä½†æ˜¯è¿˜æ˜¯å¸Œæœ›è¿è¡Œ B çš„ææ„å‡½æ•°ï¼Œè€Œä¸æ˜¯è¿è¡Œ A çš„ææ„å‡½æ•°
<br>åªè¦å…è®¸ä¸€ä¸ªç±»æ‹¥æœ‰å­ç±»ï¼Œå°±éœ€è¦å£°æ˜ææ„å‡½æ•°ä¸ºè™šå‡½æ•°ï¼Œå¦åˆ™æ— æ³•å®‰å…¨åœ°æ‰©å±•è¿™ä¸ªç±»
<br>#include &lt;iostream&gt;

class Base
{
public:
	Base()
	{
		std::cout &lt;&lt; "Base Constructor\n";
	}
	virtual ~Base()
	{
		std::cout &lt;&lt; "Base Destructor\n";
	}
};

class Derived : public Base
{
public:
	Derived()
	{
		m_Array = new int[5];
		std::cout &lt;&lt; "Derived Constructor\n";
	}
	~Derived()
	{
		delete[] m_Array;
		std::cout &lt;&lt; "Derived Destructor\n";
	}

private:
	int *m_Array;
};

int main()
{
	Base *base = new Base();
	delete base;
	std::cout &lt;&lt; "---------------------\n";
	Derived *derived = new Derived();
	delete derived;

	/*
	Base Constructor
	Base Destructor
	---------------------
	Base Constructor
	Derived Constructor
	Derived Destructor
	Base Destructor
	*/

	std::cout &lt;&lt; "---------------------\n";
	Base *poly = new Derived();
	delete poly;

	/*
	---------------------
	Base Constructor
	Derived Constructor
	Base Destructor &lt;-- å†…å­˜æ³„æ¼
	*/

	/* ä½¿ç”¨è™šææ„å‡½æ•°å
	---------------------
	Base Constructor
	Derived Constructor
	Derived Destructor
	Base Destructor
	*/

	std::cin.get();
}
Copy<br><br>
<br>æ˜¾å¼ç±»å‹è½¬æ¢æœ‰ C é£æ ¼çš„è¿˜æœ‰ C++ é£æ ¼çš„
<br>#include &lt;iostream&gt;

class Base
{
public:
	Base() { }
	virtual ~Base() { }
};

class Derived : public Base
{
public:
	Derived() { }
	~Derived() { }
};

class AnotherClass : public Base
{
public:
	AnotherClass() { }
	~AnotherClass() { }
};

int main()
{

	int a = 5;
	double value = a;

	double value = 5.25;
	double a = (int)value + 5.3; // C Style Cast

	double s = static_cast&lt;int&gt;(value) + 5.3; // C++ Style Cast Syntax Sugar æ–¹ä¾¿çš„åœ°æ–¹å¯ä»¥æ›´å¿«åœ°æ‰¾åˆ°è½¬æ¢çš„ä½ç½®ï¼Œå¢åŠ ä»£ç å¯è¯»æ€§

	double s_inv = static_cast&lt;Derived*&gt;(value); // å¯ä»¥æ£€æŸ¥è½¬æ¢æ˜¯å¦åˆæ³•
	Derived* ss = reinterpret_cast&lt;Derived*&gt;(&amp;value); // å‚è€ƒç±»å‹åŒå…³


	Derived* derived = new Derived();
	Base* base = derived;
	AnotherClass* ac = dynamic_cast&lt;AnotherClass*&gt;(base); // åšè¿è¡Œæ—¶æ£€æŸ¥ï¼Œå¯ä»¥æ£€æŸ¥è½¬æ¢çš„æ´¾ç”Ÿç±»æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´è¿”å›ä¸€ä¸ªç©ºæŒ‡é’ˆ
	Derived* ac = dynamic_cast&lt;AnotherClass*&gt;(base); // OK

	std::cin.get();
}
Copy<br><br>
<br>æ¡ä»¶æ–­ç‚¹æ˜¯è®¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼Œå½“æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶è§¦å‘ï¼Œæ“ä½œæ–­ç‚¹å…è®¸é‡åˆ°æ–­ç‚¹æ—¶è¿›è¡ŒæŸäº›æ“ä½œ
<br>æœ‰ä¸¤ç§ç±»å‹çš„æ“ä½œæ–­ç‚¹ï¼Œä¸€ç§æ˜¯è¾“å‡ºéœ€è¦çš„ä¸œè¥¿åç»§ç»­æ‰§è¡Œï¼Œæˆ–è€…è¾“å‡ºåä»ç„¶ä¸­æ–­ç¨‹åº
<br><br>
<br>æŠ“å–ä¸€å †å¤´æ–‡ä»¶ï¼Œå¹¶è½¬æ¢æˆç¼–è¯‘å™¨å¯ä»¥ä½¿ç”¨çš„æ ¼å¼ï¼Œä¸ç”¨ä¸€éåˆä¸€éè¯»å–è¿™äº›å¤´æ–‡ä»¶
<br>ä¾‹å¦‚æ¯æ¬¡åŒ…å« vector å¤´æ–‡ä»¶æ—¶ï¼Œéœ€è¦è¯»å–æ•´ä¸ªå¤´æ–‡ä»¶å¹¶ç¼–è¯‘å®ƒï¼Œvector è¿˜åŒ…å«äº†ä¸€äº›å¤´æ–‡ä»¶ä¹Ÿéœ€è¦è¢«è¯»å–ï¼Œæ‰€æœ‰çš„ä»£ç éƒ½éœ€è¦è¢«æ‹·è´åˆ°ç¼–è¯‘å•å…ƒä¸­è¿›è¡Œç¼–è¯‘
<br>æ¯æ¬¡å¯¹æºæ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œæ•´ä¸ªæ–‡ä»¶éƒ½éœ€è¦è¢«é‡æ–°ç¼–è¯‘
<br>å½“é¡¹ç›®æ–‡ä»¶å¾ˆå¤šæ—¶ï¼Œéœ€è¦ä¸€éåˆä¸€éåœ°è§£æå¹¶ç¼–è¯‘åŒä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œéœ€è¦èŠ±è´¹å¾ˆå¤šæ—¶é—´
<br>é¢„ç¼–è¯‘å¤´æ–‡ä»¶çš„ä½œç”¨æ˜¯æ¥æ”¶ä¸€å †å¤´æ–‡ä»¶ï¼Œåªç¼–è¯‘ä¸€æ¬¡ä»¥äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨, å¯ä»¥å¤§å¤§åŠ é€Ÿç¼–è¯‘æ—¶é—´
<br>å¦‚æœæ”¾å…¥é¢„ç¼–è¯‘å¤´æ–‡ä»¶ä¸­çš„å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦é‡æ–°æ„å»ºé¢„ç¼–è¯‘çš„å¤´æ–‡ä»¶ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é€Ÿåº¦å˜æ…¢
<br>é¢„ç¼–è¯‘å¤´æ–‡ä»¶å¯èƒ½ä¼šéšè—å®é™…ä½¿ç”¨çš„åº“ï¼Œé˜…è¯»çš„æ—¶å€™ä¼šæ— æ³•è¾¨åˆ«éœ€è¦ä»€ä¹ˆä¾èµ–
<br><br>
<br>æ— è®ºåœ¨æµ‹è¯•ä»€ä¹ˆï¼Œéƒ½è¦ç¡®ä¿ç¡®å®åšäº†è¿™ä¸ªäº‹æƒ… (æœ‰å¯èƒ½æœ‰ç¼–è¯‘ä¼˜åŒ–å­˜åœ¨å®é™…ä¸Šç¨‹åºå¹¶æ²¡æœ‰æŒ‰ç…§é¢„æƒ³çš„æ–¹å¼æ‰§è¡Œ)
<br>#include &lt;iostream&gt;

#include &lt;chrono&gt;

#include &lt;array&gt;
#include &lt;memory&gt;


class Timer
{
public:
	Timer()
	{
		m_StartTimepoint = std::chrono::high_resolution_clock::now();
	}

	~Timer()
	{
		Stop();
	}

	void Stop()
	{
		auto endTimepoint = std::chrono::high_resolution_clock::now();
		auto start = std::chrono::time_point_cast&lt;std::chrono::microseconds&gt;(m_StartTimepoint).time_since_epoch().count();
		auto end = std::chrono::time_point_cast&lt;std::chrono::microseconds&gt;(endTimepoint).time_since_epoch().count();

		auto duration = end - start;
		double ms = duration * 0.001;

		std::cout &lt;&lt; duration &lt;&lt; "us (" &lt;&lt; ms &lt;&lt; "ms)\n";
	}
private:
	std::chrono::time_point&lt;std::chrono::high_resolution_clock&gt; m_StartTimepoint;

};

int main()
{
	int value = 0;
	{
		Timer timer;
		for (int i = 0; i &lt; 1000000; i++)
			value += 2;
	}

	std::cout &lt;&lt; value &lt;&lt; std::endl;

	struct Vector2
	{
		float x, y;
	};

	std::cout &lt;&lt; "Make Shared\n";

	{
		std::array&lt;std::shared_ptr&lt;Vector2&gt;, 1000&gt; sharedPtrs;
		Timer timer;
		for (int i = 0; i &lt; sharedPtrs.size(); i++)
			sharedPtrs[i] = std::make_shared&lt;Vector2&gt;(); 
	}

	std::cout &lt;&lt; "New Shared\n";

	{
		std::array&lt;std::shared_ptr&lt;Vector2&gt;, 1000&gt; sharedPtrs;
		Timer timer;
		for (int i = 0; i &lt; sharedPtrs.size(); i++)
			sharedPtrs[i] = std::shared_ptr&lt;Vector2&gt;(new Vector2);
	}

	std::cout &lt;&lt; "Make Unique\n";

	{
		std::array&lt;std::unique_ptr&lt;Vector2&gt;, 1000&gt; sharedPtrs;
		Timer timer;
		for (int i = 0; i &lt; sharedPtrs.size(); i++)
			sharedPtrs[i] = std::make_unique&lt;Vector2&gt;();
	}
	__builtin_trap();
}
Copy<br>(base) âœ  Dev g++-13 main.cpp -o main
(base) âœ  Dev ./main
2215us (2.215ms)
2000000
Make Shared
77us (0.077ms)
New Shared
63us (0.063ms)
Make Unique
61us (0.061ms)
[1]    97000 trace trap  ./main
(base) âœ  Dev g++-13 -O2 main.cpp -o main
(base) âœ  Dev ./main                     
0us (0ms)
2000000
Make Shared
40us (0.04ms)
New Shared
119us (0.119ms)
Make Unique
46us (0.046ms)
[1]    97076 trace trap  ./main
Copy<br><br>#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;tuple&gt;

struct Person
{
	std::string Name;
	int Age;
};

std::tuple&lt;std::string, int&gt; CreatePerson()
{
	return { "Cherno", 24 };
}


int main()
{
	auto person = CreatePerson();
	std::string&amp; name = std::get&lt;0&gt;(person);
	int age = std::get&lt;1&gt;(person);

	std::string name;
	int age;
	std::tie(name, age) = CreatePerson();
}
Copy<br>#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;tuple&gt;

std::tuple&lt;std::string, int&gt; CreatePerson()
{
	return { "Cherno", 24 };
}

int main()
{
	auto[name, age] = CreatePerson();
	std::cout &lt;&lt; name &lt;&lt; std::endl;
}
Copy<br><br>#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;optional&gt;


std::string ReadFileAsString(const std::string&amp; filepath)
{
	std::ifstream stream(filepath);
	if (stream)
	{
		std::string result;
		// read file
		stream.close();
		return result;
	}
	
	return std::string();
}

std::string ReadFileAsString2(const std::string&amp; filepath, bool&amp; outSuccess)
{
	std::ifstream stream(filepath);
	if (stream)
	{
		std::string result;
		// read file
		stream.close();
		outSuccess = true;
		return result;
	}
	
	outSuccess = false;
	return std::string();
}

std::optional&lt;std::string&gt; ReadFileAsString3(const std::string&amp; filepath)
{
	std::ifstream stream(filepath);
	if (stream)
	{
		std::string result;

		stream.close();
		return result;

	}
	return {};
}

int main()
{
	// bool fileOpenSuccessfully;
	// std::string data = ReadFileAsString2("data.txt", fileOpenSuccessfully);
	// if(fileOpenSuccessfully)
	// {

	// }

	std::optional&lt;std::string&gt; data = ReadFileAsString3("data.txt");

	std::string value = data.value_or("Not Present"); // å¦‚æœæ²¡æœ‰å€¼å°±è¿”å›ä¸€ä¸ªé»˜è®¤å€¼
	std::cout &lt;&lt; value &lt;&lt; std::endl;
	if (data)
	{
		std::cout &lt;&lt; "File read successfully!\n";
	}
	else
	{
		std::cout &lt;&lt; "FIle could not be opened\n";
	}

	std::cin.get();
}
Copy<br><br>#include &lt;iostream&gt;
#include &lt;variant&gt;
#include &lt;optional&gt;

enum class ErrorCode
{
	None = 0, NotFound = 1, NoAccess = 2
};

std::variant&lt;std::string, ErrorCode&gt; ReadFileString()
{
	return {};
}

int main()
{
	std::variant&lt;std::string, int&gt; data;

	std::cout &lt;&lt; sizeof(int) &lt;&lt; "\n";
	std::cout &lt;&lt; sizeof(std::string) &lt;&lt; "\n";
	std::cout &lt;&lt; sizeof(data) &lt;&lt; "\n";

	data = "Cherno";
	std::cout &lt;&lt; std::get&lt;std::string&gt;(data) &lt;&lt; std::endl;
	if (auto value = std::get_if&lt;std::string&gt;(&amp;data))
	{
		std::string&amp; v = *value;		
	}
	

	data = 2;
	data.index(); // 1

	std::cout &lt;&lt; std::get&lt;std::string&gt;(data) &lt;&lt; std::endl;
	std::cout &lt;&lt; std::get&lt;int&gt;(data) &lt;&lt; std::endl;

	std::cin.get();
}
Copy<br><br>#include &lt;iostream&gt;
#include &lt;any&gt;
#include &lt;variant&gt;

struct CustomClass
{
	std::string s0, s1;
};

int main()
{
	std::any data; // å¯¹äºå°ç±»å‹ any å°†å˜é‡å­˜å‚¨ä¸ºä¸€ä¸ª Unionï¼Œå¯¹äºå¤§ç±»å‹ï¼Œä¼šä½¿ç”¨å¤§ç©ºé—´ void *ï¼ŒåŠ¨æ€åˆ†é…å†…å­˜ 
	data = 2;
	data = std::string("Cherno");
	data = CustomClass(); // å½“è¶…è¿‡ 32 å­—èŠ‚ï¼Œä¼šè°ƒç”¨ new åŠ¨æ€åˆ†é…å†…å­˜

	std::string string = std::any_cast&lt;std::string&gt;(data);
	std::string&amp; string = std::any_cast&lt;std::string&amp;&gt;(data);

	std::cin.get();
}
Copy]]></description><link>campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/c++-crash-course.html</link><guid isPermaLink="false">Campus/Chinese-Notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/C++ Crash Course.md</guid><pubDate>Fri, 22 Dec 2023 11:04:20 GMT</pubDate><enclosure url="campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231202214923.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231202214923.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[ä»€ä¹ˆæ˜¯å› ç‰¹ç½‘]]></title><description><![CDATA[ 
 <br><br>
<br>æ ¹æ®æ„æˆå› ç‰¹ç½‘çš„åŸºæœ¬ç¡¬ä»¶å’Œè½¯ä»¶ç»„ä»¶æè¿°
<br>æ ¹æ®ä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›æœåŠ¡çš„äº’è”ç½‘åŸºç¡€è®¾æ–½æè¿°
<br>å› ç‰¹ç½‘æ˜¯ä¸€ä¸ªä¸–ç•ŒèŒƒå›´çš„è®¡ç®—æœºç½‘ç»œ
<br><br><br>
<br>ç½‘ç»œæä¾›è€…ä¸æ¥æ”¶è€…
<br>è®¡ç®—è®¾å¤‡ç±»å‹ï¼šåµŒå…¥å¼è®¾å¤‡ã€è®¡ç®—æœºÂ·Â·Â·
<br>ç«¯ç³»ç»Ÿé€šè¿‡é€šä¿¡é“¾è·¯å’Œåˆ†ç»„äº¤æ¢æœºè¿æ¥åˆ°ä¸€èµ·
<br><br>
<br>ç‰©ç†åª’ä½“æ„æˆ

<br>åŒè½´ç”µç¼† (Coaxial cable)<br>
<img alt="Pasted image 20231101104608.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231101104608.png">
<br>åŒç»é“œçº¿ (æœ«ç«¯å¸¸è¿æ¥ (<a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Registered_jack#RJ45S" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Registered_jack#RJ45S" target="_blank">RJ-45</a>) ç­‰æ¥å£) <img alt="h300" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231101104900.png"> <img alt="Pasted image 20231031154330.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031154330.png"> <img alt="Pasted image 20231031154345.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031154345.png">
<br>å…‰çº¤ï¼šç”¨äºè·¯ç”±ä¸è·¯ç”±ä¹‹é—´çš„ä¼ è¾“ï¼ŒæŠ—å¹²æ‰°æ€§å¥½<img alt="Pasted image 20231101105041.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231101105041.png">

<br>å•æ¨¡å…‰çº¤ï¼šå‘ç”Ÿæ¼«åå°„æ¦‚ç‡ä½ï¼Œæ€§èƒ½æ›´é«˜ä¼ è¾“é€Ÿç‡å¿«
<br>å¤šæ¨¡å…‰çº¤ï¼šä»·æ ¼ä½æ€§ä»·æ¯”é«˜<br>
<img alt="Pasted image 20231101172100.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231101172100.png" style="width: 500px; max-width: 100%;">


<br>æ— çº¿ç”µé¢‘è°±


<br>ä¼ è¾“é€Ÿç‡(transmission rate)

<br>å•ä½ï¼šbit/s or bps


<br><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Duplex_" rel="noopener" class="external-link" title="telecommunications" href="https://en.wikipedia.org/wiki/Duplex_" target="_blank">ä¿¡å·ä¼ è¾“æ–¹å¼</a> (FROM: gpt-4-1106-preview)ï¼š

<br>å•å·¥ (Simplex)ï¼š å•å·¥é€šä¿¡æ˜¯ä¸€ç§å•å‘é€šä¿¡æ–¹å¼ï¼Œæ•°æ®åªèƒ½åœ¨ä¸€ä¸ªæ–¹å‘ä¸ŠæµåŠ¨ï¼Œæ— æ³•å®ç°åŒå‘äº¤æµã€‚æ¥æ”¶æ–¹ä¸å…·å¤‡å‘å‘é€æ–¹å›ä¼ ä¿¡æ¯çš„èƒ½åŠ›ã€‚æ¯”å¦‚ï¼Œç”µè§†å’Œæ— çº¿ç”µå¹¿æ’­å°±æ˜¯å•å·¥é€šä¿¡çš„ä¾‹å­ã€‚è§‚ä¼—åªèƒ½æ¥æ”¶ä¿¡æ¯ï¼Œä¸èƒ½é€šè¿‡åŒæ ·çš„é¢‘é“å‘ç”µè§†å°æˆ–å¹¿æ’­ç«™å‘é€ä¿¡æ¯ 
<br>åŠåŒå·¥ (Half-Duplex)ï¼š åŠåŒå·¥é€šä¿¡å…è®¸æ•°æ®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œä½†æ˜¯åœ¨åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªæ–¹å‘ä¸Šçš„æ•°æ®ä¼ è¾“ã€‚æ¢è¨€ä¹‹ï¼Œé€šä¿¡è®¾å¤‡åœ¨ä¸€æ®µæ—¶é—´å†…åªå‘é€æ•°æ®æˆ–åªæ¥æ”¶æ•°æ®ã€‚è¿™å°±åƒå¯¹è®²æœºçš„å·¥ä½œæ–¹å¼ï¼Œä¸¤ä¸ªäººä¸èƒ½åŒæ—¶è¯´è¯ï¼Œä¸€ä¸ªäººè¯´è¯æ—¶å¦ä¸€ä¸ªäººå¿…é¡»ç­‰å¾…å¹¶å¬ <img alt="Pasted image 20231108105121.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108105121.png">  
<br>å…¨åŒå·¥ (Full-Duplex)ï¼š å…¨åŒå·¥é€šä¿¡å…è®¸æ•°æ®åŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸ŠæµåŠ¨ã€‚åœ¨å…¨åŒå·¥æ¨¡å¼ä¸‹ï¼Œå‘é€å’Œæ¥æ”¶å¯ä»¥åŒæ—¶è¿›è¡Œï¼Œæ¯”å¦‚ï¼Œç”µè¯å°±æ˜¯å…¨åŒå·¥é€šä¿¡çš„ä¾‹å­ï¼ŒåŒæ–¹å¯ä»¥åŒæ—¶è¿›è¡Œå¯¹è¯ï¼Œå½¼æ­¤çš„è¯è¯­å¯ä»¥å®æ—¶äº¤å å¹¶è¢«å¬åˆ° <img alt="Pasted image 20231108105132.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108105132.png"> ^86 d 918


<br><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Channel#Communications" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Channel#Communications" target="_blank">ä¿¡é“</a> (FROM: gpt-4-1106-preview)ï¼šä¿¡æ¯ä»ä¸€ä¸ªåœ°ç‚¹ä¼ è¾“åˆ°å¦ä¸€ä¸ªåœ°ç‚¹çš„è·¯å¾„ï¼Œåœ¨ä¸åŒçš„èƒŒæ™¯ä¸‹ï¼Œä¿¡é“çš„å®šä¹‰ç•¥æœ‰ä¸åŒ

<br>æ— çº¿é€šä¿¡ä¿¡é“ï¼šæŒ‡ç”µç£æ³¢åœ¨ç©ºæ°”ä¸­çš„ä¼ æ’­è·¯å¾„ã€‚åœ¨è¿™ä¸ªè·¯å¾„ä¸Šå¯èƒ½å­˜åœ¨å„ç§è¡°å‡ã€æ•£å°„ã€åå°„ã€æŠ˜å°„å’Œè¡å°„ç°è±¡ï¼Œè¿™äº›ç°è±¡å½±å“ç€ä¿¡å·çš„ä¼ è¾“è´¨é‡
<br>æœ‰çº¿é€šä¿¡ä¿¡é“ï¼šæŒ‡ç”µä¿¡å·åœ¨å¯¼çº¿ï¼ˆå¦‚åŒè½´ç”µç¼†ã€åŒç»çº¿ç­‰ï¼‰æˆ–å…‰ä¿¡å·åœ¨å…‰çº¤ä¸­çš„ä¼ è¾“è·¯å¾„
<br>æ•°å­—é€šä¿¡ä¿¡é“ï¼šåœ¨æ•°å­—é€šè®¯ä¸­ï¼Œä¿¡é“æŒ‡çš„æ˜¯ä¼ è¾“æ¯”ç‰¹åºåˆ—çš„åª’ä»‹ï¼Œå®ƒå¯ä»¥æ˜¯ç‰©ç†çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯é€šè¿‡ç¼–ç å®ç°çš„é€»è¾‘ä¿¡é“


<br><br>
<br>âš ï¸å¦‚æœå¯¹ä¹¦ä¸­çš„åˆ†ç»„ (packet)ï¼ŒæŠ¥æ–‡(message)æ„Ÿåˆ°å›°æƒ‘ï¼Œè¯·çœ‹<a data-tooltip-position="top" aria-label="å› ç‰¹ç½‘ > ^23aa67" data-href="å› ç‰¹ç½‘#^23aa67" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html#^23aa67" class="internal-link" target="_self" rel="noopener">è¿™é‡Œ</a>å’Œé…å›¾
<br>
<br>åˆ†ç»„(packet)ï¼šå‘é€ç«¯ç³»ç»Ÿå°†æ•°æ®åˆ†æ®µï¼Œå¹¶ä¸ºæ¯æ®µåŠ ä¸Šé¦–éƒ¨å­—èŠ‚ï¼Œç”±æ­¤å½¢æˆçš„ä¿¡æ¯åŒ…
<br>ç»„æˆéƒ¨åˆ†ï¼š

<br>è·¯ç”±å™¨ï¼šè·¯ç”±å™¨é€šå¸¸ç”¨äºç½‘ç»œæ ¸å¿ƒ<br>
ä¸­
<br>é“¾è·¯å±‚äº¤æ¢æœºï¼šé€šå¸¸ç”¨äºæ¥å…¥ç½‘ä¸­


<br><br>
<br>ä»å‘é€ç«¯ç³»ç»Ÿåˆ°æ¥æ”¶ç«¯ç³»ç»Ÿï¼Œä¸€ä¸ªåˆ†ç»„ç»è¿‡çš„ä¸€ç³»åˆ—é€šä¿¡é“¾è·¯å’Œåˆ†ç»„äº¤æ¢æœº
<br><br>
<br>ç«¯ç³»ç»Ÿé€šè¿‡ISPæ¥å…¥äº’è”ç½‘ï¼ŒISPè‡ªèº«æ˜¯ä¸€ä¸ªç”±å¤šå°åˆ†ç»„äº¤æ¢æœºå’Œå¤šæ®µé€šä¿¡é“¾è·¯ç»„æˆçš„ç½‘ç»œï¼Œè¿è¡ŒIPåè®®ï¼Œä¸ºç«¯ç³»ç»Ÿæä¾›äº†ä¸åŒç±»å‹çš„ç½‘ç»œæ¥å…¥ï¼Œè¾ƒä½å±‚ISPé€šè¿‡è¾ƒé«˜å±‚ISPäº’è”
<br>è¾ƒé«˜å±‚ISPæ˜¯é€šè¿‡é«˜é€Ÿå…‰çº¤é“¾è·¯äº’è”çš„é«˜é€Ÿè·¯ç”±å™¨ç»„æˆ
<br>äº’è”çš„ISP

<br>åè®®ï¼šæ§åˆ¶å› ç‰¹ç½‘ä¸­ä¿¡æ¯çš„æ¥æ”¶å’Œå‘é€ï¼Œäº’è”ç½‘ä¸»è¦åè®®ç»Ÿç§°ä¸ºTCP/IP

<br>TCP(Transmission Control Protocol)ï¼šä¼ è¾“æ§åˆ¶åè®®
<br>IP(Internet Protocol)ï¼šç½‘é™…åè®®


<br>å› ç‰¹ç½‘æ ‡å‡†ï¼š

<br>ç ”å‘è€…ï¼šäº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„(Internet Engineering Task Force, IETF)
<br>IETFæ ‡å‡†æ–‡æ¡£ï¼šè¯·æ±‚è¯„è®º(Request For Comment, RFC)ï¼Œå®šä¹‰äº†TCPã€IPã€HTTPã€SMTPç­‰åè®®




<br><br><br>
<br>åˆ†å¸ƒå¼åº”ç”¨ç¨‹åº(distributed application)ï¼šæ¶‰åŠå¤šä¸ªç›¸äº’äº¤æ¢æ•°æ®çš„ç«¯ç³»ç»Ÿ
<br><a data-tooltip-position="top" aria-label="åº”ç”¨å±‚ > è¿›ç¨‹å’Œè®¡ç®—æœºç½‘ç»œé—´çš„æ¥å£" data-href="åº”ç”¨å±‚#è¿›ç¨‹å’Œè®¡ç®—æœºç½‘ç»œé—´çš„æ¥å£" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/åº”ç”¨å±‚.html#è¿›ç¨‹å’Œè®¡ç®—æœºç½‘ç»œé—´çš„æ¥å£" class="internal-link" target="_self" rel="noopener">å¥—æ¥å­—æ¥å£</a> (socket interface) ï¼šè§„å®šäº†è¿è¡Œåœ¨ä¸€ä¸ªç«¯ç³»ç»Ÿä¸Šçš„åº”ç”¨ç¨‹åºè¯·æ±‚äº’è”ç½‘åŸºç¡€è®¾æ–½å‘è¿è¡Œåœ¨å¦ä¸€ä¸ªç«¯ç³»ç»Ÿä¸Šçš„ç‰¹å®šç›®çš„åœ°ç¨‹åºäº¤ä»˜æ•°æ®çš„æ–¹å¼ï¼Œæ˜¯ä¸€å¥—å‘é€ç¨‹åºå¿…é¡»éµå¾ªçš„è§„åˆ™é›†åˆ
<br><br>
<br>åè®®å®šä¹‰äº†åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªé€šä¿¡å®ä½“ä¹‹é—´äº¤æ¢æŠ¥æ–‡ (messages) çš„æ ¼å¼å’Œé¡ºåºï¼Œä»¥åŠæŠ¥æ–‡å‘é€å’Œ/æˆ–æ¥æ”¶ä¸€æ¡æŠ¥æ–‡æˆ–å…¶ä»–äº‹ä»¶æ‰€é‡‡å–çš„åŠ¨ä½œ (event) 
<br>Windows CMD ä¸­çš„ ipconfig å‘½ä»¤æ˜¾ç¤ºäº†è¯¸å¤šåè®®å’Œåè®®ä¸­å®šä¹‰çš„åœ°å€

ä»¥å¤ªç½‘é€‚é…å™¨ ä»¥å¤ªç½‘:

è¿æ¥ç‰¹å®šçš„ DNS åç¼€ . . . . . . . : localdomain
æè¿°. . . . . . . . . . . . . . . : Parallels VirtIO Ethernet Adapter
ç‰©ç†åœ°å€. . . . . . . . . . . . . : 00-1C-42-93-74-7A
DHCP å·²å¯ç”¨ . . . . . . . . . . . : æ˜¯
è‡ªåŠ¨é…ç½®å·²å¯ç”¨. . . . . . . . . . : æ˜¯
IPv6 åœ°å€ . . . . . . . . . . . . : fdb2:2c26:f4e4:0:ddc:3de6:d7e:a5d1(é¦–é€‰)
ä¸´æ—¶ IPv6 åœ°å€. . . . . . . . . . : fdb2:2c26:f4e4:0:c432:6bdb:fd11:a161(é¦–é€‰)
æœ¬åœ°é“¾æ¥ IPv6 åœ°å€. . . . . . . . : fe80::ddc:3de6:d7e:a5d1%12(é¦–é€‰)
IPv4 åœ°å€ . . . . . . . . . . . . : 10.211.55.4(é¦–é€‰)
å­ç½‘æ©ç   . . . . . . . . . . . . : 255.255.255.0
è·å¾—ç§Ÿçº¦çš„æ—¶é—´  . . . . . . . . . : Wednesday, September 14, 2022 9:07:05 AM
ç§Ÿçº¦è¿‡æœŸçš„æ—¶é—´  . . . . . . . . . : Wednesday, September 14, 2022 9:48:34 AM
é»˜è®¤ç½‘å…³. . . . . . . . . . . . . : 10.211.55.1
DHCP æœåŠ¡å™¨ . . . . . . . . . . . : 10.211.55.1
DHCPv6 IAID . . . . . . . . . . . : 100670530
DHCPv6 å®¢æˆ·ç«¯ DUID  . . . . . . . : 00-01-00-01-2A-AB-CE-AD-00-1C-42-93-74-7A
DNS æœåŠ¡å™¨  . . . . . . . . . . . : 10.211.55.1
TCPIP ä¸Šçš„ NetBIOS  . . . . . . . : å·²å¯ç”¨
Copy


<br><br><br>
<br>ç«¯ç³»ç»Ÿä¹Ÿç§°ä¸»æœº
<br>ä¸»æœº(host)ï¼šå®¢æˆ·(client)å’ŒæœåŠ¡å™¨(server)
<br><br>
<br>å°†ç«¯ç³»ç»Ÿè¿æ¥åˆ°è¾¹ç¼˜è·¯ç”±å™¨(edge router)çš„ç½‘ç»œ
<br>è¾¹ç¼˜è·¯ç”±å™¨ï¼šç«¯ç³»ç»Ÿåˆ°ä»»ä½•å…¶ä»–è¿œç¨‹ç«¯ç³»ç»Ÿçš„è·¯å¾„ä¸Šçš„ç¬¬ä¸€å°è·¯ç”±å™¨
<br><br>
<br>å®¶åº­æ¥å…¥

<br>æ•°å­—ç”¨æˆ·çº¿æ¥å…¥ (Digital Subscriber Line)ï¼šåˆ©ç”¨ç”µè¯å…¬å¸ç°æœ‰çš„æœ¬åœ°ç”µè¯åŸºç¡€è®¾æ–½

<br>æœ¬åœ°ç”µè¯å…¬å¸ä¸º ISPï¼ŒDSL è°ƒåˆ¶è§£è°ƒå™¨ä½¿ç”¨ç°æœ‰çš„ç”µè¯çº¿ä¸ä½äºç”µè¯å…¬å¸çš„æœ¬åœ°ä¸­å¿ƒå±€ (CO)ä¸­çš„æ•°å­—ç”¨æˆ·çº¿æ¥å…¥å¤ç”¨å™¨ (DSLAM: Digital Subscriber Line Access Multiplexer)äº¤æ¢æ•°æ®
<br>ä½¿ç”¨é¢‘åˆ†å¤ç”¨æŠ€æœ¯ï¼šç°æœ‰ç”µè¯0-4kHz ä¸ºç”µè¯ï¼Œ4-50kHz ä¸ºä¸Šè¡Œæ•°æ®ï¼Œ50kHz-1MHz ä¸ºä¸‹è¡Œæ•°æ®ï¼Œä¸Šè¡Œé€Ÿç‡ä¸ä¸‹è¡Œé€Ÿç‡ä¸å¯¹ç§°


<br>ç”µç¼†å› ç‰¹ç½‘æ¥å…¥ (cable Internet access)ï¼šåˆ©ç”¨æœ‰çº¿ç”µè§†å…¬å¸ç°æœ‰çš„æœ‰çº¿ç”µè§†åŸºç¡€è®¾æ–½ 

<br>é‡‡ç”¨äº†å…‰çº¤å’ŒåŒè½´ç”µç¼†ï¼Œé€šå¸¸è¢«ç§°ä¸º HFC (Hybrid Fiber Coax)æ··åˆå…‰çº¤åŒè½´ç³»ç»Ÿ
<br>å…‰ç¼†å°†ç”µç¼†å¤´ç«¯è¿æ¥åˆ°åœ°åŒºæ¢çº½ï¼Œå†ä½¿ç”¨ä¼ ç»Ÿçš„åŒè½´ç”µç¼†åˆ°è¾¾å®¶åº­
<br>å®¶åº­ç«¯éœ€è¦ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨ (cable modem)ï¼Œå°† HFC ç½‘ç»œåˆ†ä¸ºä¸Šä¸‹ä¸¤ä¸ªä¿¡é“
<br>ç”µç¼†å¤´ç«¯æœ‰ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨ç«¯æ¥ç³»ç»Ÿ (Cable Modem Termination System, CMTS)å°†æ¨¡æ‹Ÿä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å· <img alt="cable-modem.jpeg" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/cable-modem.jpeg">
<br>é‡è¦ç‰¹å¾ï¼šå…±äº«å¹¿æ’­åª’ä½“ï¼Œéœ€è¦åˆ†å¸ƒå¼å¤šè·¯è®¿é—®åè®®æ¥åè°ƒä¼ è¾“å’Œé¿å…ç¢°æ’


<br>å…‰çº¤åˆ°æˆ· (Fiber to the Home, FTTH)

<br>ç›´æ¥å…‰çº¤
<br>ç«äº‰æ€§çš„å…‰çº¤åˆ†å¸ƒä½“ç³»ç»“æ„

<br>ä¸»åŠ¨å…‰çº¤ç½‘ç»œ (Active Optical Network)ï¼šæœ¬è´¨ä¸Šæ˜¯äº¤æ¢å› ç‰¹ç½‘
<br>è¢«åŠ¨å…‰çº¤ç½‘ç»œ (Passive Optical Network)


<br>å…‰çº¤ç½‘ç»œç«¯æ¥å™¨ (Optical Network Terminator, ONT)
<br>å…‰çº¤çº¿è·¯ç«¯æ¥å™¨ (Optical Line Terminator, OLT)
<br>å…‰çº¤åˆ†é…å™¨ (splitter)ï¼šç›¸å½“äºç”µç¼†å¤´ç«¯


<br>å«æ˜Ÿæ¥å…¥
<br>æ‹¨å·æ¥å…¥


<br>ä¼ä¸šæ¥å…¥

<br>ä½¿ç”¨å±€åŸŸç½‘(LAN)å°†ç«¯ç³»ç»Ÿè¿æ¥åˆ°è¾¹ç¼˜è·¯ç”±å™¨
<br>æœ‰çº¿LANï¼šä»¥å¤ªç½‘ç”¨æˆ·ä½¿ç”¨åŒç»é“œçº¿ä¸ä»¥å¤ªç½‘äº¤æ¢æœºç›¸è¿
<br>æ— çº¿LANï¼šæ— çº¿ç”¨æˆ·ä»/åˆ°ä¸€ä¸ªæ¥å…¥ç‚¹(Access Point)å‘é€/æ¥æ”¶åˆ†ç»„ï¼Œæ¥å…¥ç‚¹ä¸ä¼ä¸šç½‘è¿æ¥

<br>WIFIï¼šåŸºäºIEEE802.11æŠ€æœ¯çš„æ— çº¿LANæ¥å…¥ 
<br>ç°åœ¨è®¸å¤šå®¶åº­å°†å®½å¸¦ä½å®…æ¥å…¥(DSLæˆ–ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨æ¥å…¥)å’Œå»‰ä»·æ— çº¿å±€åŸŸç½‘æŠ€æœ¯ç›¸ç»“åˆï¼Œäº§ç”Ÿå®¶åº­ç½‘ç»œ




<br>å¹¿åŸŸæ— çº¿æ¥å…¥

<br>3Gï¼šç¬¬ä¸‰ä»£æ— çº¿æŠ€æœ¯
<br>LTE(Long-Term Evolution)


<br><br>
<br>ç‰©ç†åª’ä½“ï¼šç”¨äºä¼ æ’­ç”µç£æ³¢å’Œå…‰è„‰å†²çš„åª’ä½“
<br>å¯¼å¼•æ€§åª’ä½“(guided media)ï¼šç”µæ³¢æ²¿ç€å›ºå®šåª’ä½“å‰è¡Œ

<br>åŒç»é“œçº¿ï¼šæœ€ä¾¿å®œä¸”æœ€å¸¸ç”¨çš„å¯¼å¼•å‹ä¼ è¾“åª’ä½“

<br>æ— å±è”½åŒç»çº¿(Unshielded Twisted Pair, UTP)å¸¸ç”¨äºLANä¸­
<br>åŒç»çº¿å·²æˆä¸ºé«˜é€ŸLANè”ç½‘çš„ä¸»å¯¼æ€§è§£å†³æ–¹æ¡ˆ


<br>åŒè½´ç”µç¼†ï¼šä¸¤ä¸ªåŒå¿ƒçš„é“œå¯¼ä½“ï¼Œèƒ½è¾¾åˆ°è¾ƒé«˜çš„æ•°æ®ä¼ è¾“é€Ÿç‡

<br>èƒ½è¢«ç”¨ä½œå¯¼å¼•æ€§å…±äº«åª’ä½“


<br>å…‰çº¤ï¼šä¿¡å·è¡°å‡æä½ï¼Œéš¾çªƒå¬ï¼Œä¸ºé•¿é€”å¯¼å¼•æ€§ä¼ è¾“åª’ä½“

<br>å¹¿æ³›ç”¨äºå› ç‰¹ç½‘ä¸»å¹²
<br>å…‰è½½æ³¢æ ‡å‡†(Optical Carrier)é“¾è·¯é€Ÿç‡ï¼š51.8Mbpsï½39.8Gbps




<br>éå¯¼å¼•æ€§åª’ä½“(unguided media)ï¼šç”µæ³¢åœ¨ç©ºæ°”å’Œå¤–å±‚ç©ºæ°”ä¸­ä¼ æ’­

<br>é™†åœ°æ— çº¿ç”µä¿¡é“

<br>çŸ­è·ç¦»
<br>å±€åŸŸï¼šæ— çº¿LANæŠ€æœ¯
<br>å¹¿åŸŸï¼šèœ‚çªæ¥å…¥æŠ€æœ¯


<br>å«æ˜Ÿæ— çº¿ä¿¡é“

<br>åŒæ­¥å«æ˜Ÿ(geostationary satellite)ï¼šä¿¡å·ä¼ æ’­æ—¶å»¶è¾ƒå®¢ã€å¯è§‚
<br>è¿‘åœ°è½¨é“å«æ˜Ÿ(Low-Earth Orbiting)




<br><br>ç”±äº’è”å› ç‰¹ç½‘ç«¯ç³»ç»Ÿçš„åˆ†ç»„äº¤æ¢æœºå’Œé“¾è·¯æ„æˆçš„ç½‘çŠ¶ç½‘ç»œ<br><br>
<br>åœ¨ç½‘ç»œåº”ç”¨ä¸­ç«¯ç³»ç»Ÿå½¼æ­¤äº¤æ¢æŠ¥æ–‡(message)
<br>åˆ†ç»„(packet)ï¼šæºå°†é•¿æŠ¥æ–‡åˆ†æˆçš„è¾ƒå°æ•°æ®å—
<br>åˆ†ç»„ä»¥ç­‰äºè¯¥é“¾è·¯æœ€å¤§ä¼ è¾“é€Ÿç‡çš„ä¼ è¾“é€Ÿåº¦é€šè¿‡é€šä¿¡é“¾è·¯
<br>ç»†èŠ‚

<br>å­˜å‚¨è½¬å‘ä¼ è¾“(store-and-forward transmission):

<br>äº¤æ¢æœºå‘è¾“å‡ºé“¾è·¯è¾“å‡ºç¬¬ä¸€ä¸ªæ¯”ç‰¹ä¹‹å‰ï¼Œå¿…é¡»æ¥æ”¶åˆ°æ•´ä¸ªåˆ†ç»„
<br>è¯¥ä¼ è¾“ä¸­è·¯ç”±å™¨çš„ä»»åŠ¡ï¼šæŠŠä¸€ä¸ªå…¥åˆ†ç»„äº¤æ¢åˆ°ä¸€ä¸ªå‡ºé“¾è·¯
<br>å­˜å‚¨è½¬å‘ä¼ è¾“é€šè¿‡ N æ¡é€Ÿç‡ä¸º R çš„é“¾è·¯ç»„æˆçš„è·¯å¾„ï¼Œç«¯åˆ°ç«¯æ—¶å»¶æ˜¯ 


<br>æ’é˜Ÿæ—¶å»¶å’Œåˆ†ç»„ä¸¢å¤±

<br>è¾“å‡ºç¼“å­˜/é˜Ÿåˆ—(output buffer/queue)ï¼šç”¨äºå­˜å‚¨è·¯ç”±å™¨å³å°†å‘é€çš„åˆ†ç»„
<br>æ’é˜Ÿæ—¶å»¶(queuing delay)ï¼šé“¾è·¯ç¹å¿™æ—¶åˆ†ç»„éœ€è¦åœ¨è¾“å‡ºç¼“å­˜ä¸­ç­‰å¾…
<br>åˆ†ç»„ä¸¢åŒ…(packet loss)ï¼šåˆ†ç»„åˆ°è¾¾åˆ†ç»„äº¤æ¢æœºåå‘ç°è¾“å‡ºç¼“å­˜å·²æ»¡ï¼Œåˆ†ç»„è¢«ä¸¢å¼ƒ


<br>è½¬å‘è¡¨å’Œè·¯ç”±é€‰æ‹©åè®®

<br>åˆ†ç»„é¦–éƒ¨åŒ…å«äº†ç›®çš„åœ°çš„IPåœ°å€
<br>æ¯ä¸ªè·¯ç”±å™¨å…·æœ‰ä¸€ä¸ªè½¬å‘è¡¨(forwarding table)ï¼šå°†ç›®çš„åœ°å€æ˜ å°„ä¸ºè¾“å‡ºé“¾è·¯
<br>äº’è”ç½‘å…·æœ‰ä¸€äº›ç‰¹æ®Šçš„è·¯ç”±é€‰æ‹©åè®®ç”¨äºè‡ªåŠ¨åœ°è®¾ç½®è½¬å‘è¡¨ 




<br><br>
<br>åœ¨ç«¯ç³»ç»Ÿé—´é€šä¿¡ä¼šè¯æœŸé—´ï¼Œé¢„ç•™äº†ç«¯ç³»ç»Ÿæ²¿è·¯å¾„é€šä¿¡æ‰€éœ€è¦çš„èµ„æº(ç¼“å­˜ï¼Œä¼ è¾“é€Ÿç‡)
<br>å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´å»ºç«‹ä¸€æ¡è¿æ¥(ç”µè·¯)ï¼Œå¹¶ä¸ºå‘é€æ–¹å’Œæ¥æ”¶æ–¹é¢„ç•™äº†å¸¦å®½ï¼Œå‘é€æ–¹èƒ½ä»¥ç¡®ä¿çš„æ’å®šé€Ÿç‡å‘æ¥æ”¶æ–¹ä¼ é€æ•°æ®
<br>åœ¨ç”µè·¯äº¤æ¢ç½‘ç»œä¸­åˆ™æ˜¯å»ºç«‹ä¸€æ¡ç«¯åˆ°ç«¯è¿æ¥
<br>ç”µè·¯äº¤æ¢ç½‘ç»œå¤ç”¨

<br>é¢‘åˆ†å¤ç”¨(Frequency-Division Multiplexing, FDM)ï¼šåœ¨è¿æ¥æœŸé—´é“¾è·¯ä¸ºæ¯æ¡é“¾æ¥ä¸“ç”¨ä¸€ä¸ªé¢‘æ®µ

<br>é¢‘æ®µçš„å®½åº¦ç§°ä¸ºå¸¦å®½(band-width)


<br>æ—¶åˆ†å¤ç”¨(Time-Division Multiplexing, TDM)ï¼šæ—¶é—´è¢«åˆ’åˆ†ä¸ºå›ºå®šçš„å¸§ï¼Œæ¯ä¸ªå¸§è¢«åˆ’åˆ†ä¸ºå›ºå®šæ•°é‡çš„æ—¶éš™

<br>ä¼ æ’­é€Ÿç‡ï¼šå¸§é€Ÿç‡âœ–ï¸ä¸€ä¸ªæ—¶éš™ä¸­çš„æ¯”ç‰¹æ•°é‡
<br>ç”µè·¯äº¤æ¢çš„ç«¯åˆ°ç«¯æ—¶å»¶ä¸ä¼ è¾“é€šè¿‡çš„é“¾è·¯æ•°é‡æ— å…³




<br><br>
<br>åˆ†ç»„äº¤æ¢ä¸é€‚åˆå®æ—¶æœåŠ¡ï¼Œç«¯åˆ°ç«¯æ—¶å»¶å¯å˜å’Œä¸å¯é¢„æµ‹
<br>åˆ†ç»„äº¤æ¢æä¾›äº†æ¯”ç”µè·¯äº¤æ¢æ›´å¥½çš„å¸¦å®½å…±äº«
<br>æ¯”ç”µè·¯äº¤æ¢æ›´ç®€å•æ›´æœ‰æ•ˆï¼Œå®ç°æˆæœ¬æ›´ä½
<br>åˆ†ç»„äº¤æ¢æŒ‰éœ€åˆ†é…é“¾è·¯ä½¿ç”¨ï¼Œç”µè·¯äº¤æ¢ä¸è€ƒè™‘éœ€æ±‚
<br><br>
<br>ä¸ºè®©ç«¯ç³»ç»Ÿè¿æ¥è‡³äº’è”ç½‘ISPè‡ªèº«å¿…é¡»äº’è”:å€ŸåŠ©è·¯ç”±å™¨å°†åŒæ„æˆ–å¼‚æ„çš„ç½‘ç»œå®ç°äº’è”äº’é€š
<br>ç½‘ç»œç»“æ„1ï¼šå•ä¸ªå…¨çƒä¼ è¾“ISPäº’è”æ‰€æœ‰æ¥å…¥ISP

<br>æ¥å…¥ISPï¼šå®¢æˆ·(customer)
<br>å…¨çƒä¼ è¾“ISPï¼šæä¾›å•†(provider)


<br>ç½‘ç»œç»“æ„2ï¼šå¤šä¸ªå…¨çƒä¼ è¾“ISPå’Œå¤šä¸ªæ¥å…¥ISP
<br>ç½‘ç»œç»“æ„3ï¼šå¤šä¸ªç«äº‰çš„ç¬¬ä¸€å±‚ISPå’Œå¤šä¸ªç«äº‰çš„åŒºåŸŸISP
<br>ç½‘ç»œç»“æ„4ï¼šè·Ÿä»Šå¤©å› ç‰¹ç½‘æ›´ä¸ºç›¸ä¼¼çš„ç½‘ç»œï¼Œåœ¨ç½‘ç»œç»“æ„3åŸºç¡€ä¸Šå¢åŠ å­˜åœ¨ç‚¹ã€å¤šå®¿ã€å¯¹ç­‰å’Œå› ç‰¹ç½‘äº¤æ¢ 

<br>å­˜åœ¨ç‚¹(Point of Presence)ï¼šæä¾›å•†ç½‘ç»œä¸­ä¸€å°æˆ–å¤šå°ç›¸åŒä½ç½®è·¯ç”±å™¨ç¾¤ç»„
<br>å¤šå®¿(multi-home)ï¼šé™¤äº†ç¬¬ä¸€å±‚ISPä¹‹å¤–ä»»ä½•ISPå¯ä»¥é€‰æ‹©ä¸ä¸¤ä¸ªæˆ–å¤šä¸ªæä¾›å•†ISPè¿æ¥
<br>å¯¹ç­‰(peer)ï¼šä¸ºäº†å‡å°‘å‘æä¾›å•†çš„ä»˜è´¹ï¼Œä½äºç›¸åŒç­‰çº§ç»“æ„å±‚æ¬¡çš„ä¸´è¿‘ä¸€å¯¹ISPèƒ½å¤Ÿå°†ç½‘ç»œè¿åˆ°ä¸€èµ·

<br>å› ç‰¹ç½‘äº¤æ¢ç‚¹(Internet Exchange Point, IXP)ï¼šå¤šä¸ªISPåœ¨ä¸€èµ·å¯¹ç­‰




<br>ç½‘ç»œç»“æ„5ï¼šç°ä»Šçš„äº’è”ç½‘ï¼Œåœ¨ç½‘ç»œç»“æ„4çš„é¡¶éƒ¨å¢åŠ å†…å®¹æä¾›å•†ç½‘ç»œ

<br>å‡å°‘å†…å®¹æä¾›å•†å‘é¡¶å±‚ISPæ”¯ä»˜çš„è´¹ç”¨ï¼Œå¯¹æœåŠ¡æœ€ç»ˆå¦‚ä½•äº¤ä»˜ç»™ç«¯ç”¨æˆ·æœ‰äº†æ›´å¤šçš„æ§åˆ¶


<br><br><br>
<br>èŠ‚ç‚¹å¤„ç†æ—¶å»¶(nodal processing delay)

<br>æ£€æµ‹åˆ†ç»„é¦–éƒ¨å¹¶å†³å®šå°†åˆ†ç»„å¯¼å‘ä½•å¤„
<br>æ£€æŸ¥æ¯”ç‰¹çº§åˆ«çš„å·®é”™


<br>æ’é˜Ÿæ—¶å»¶(queuing delay)

<br>åˆ†ç»„åœ¨é“¾è·¯ä¸Šç­‰å¾…ä¼ è¾“æ—¶é€ æˆçš„æ—¶å»¶


<br>ä¼ è¾“æ—¶å»¶(transmission delay) 

<br>å°†ä¸€ä¸ªåˆ†ç»„çš„æ‰€æœ‰æ¯”ç‰¹æ¨å‘é“¾è·¯æ‰€éœ€è¦çš„æ—¶é—´


<br>ä¼ æ’­æ—¶å»¶(propagation delay)

<br>ä¸€ä¸ªæ¯”ç‰¹ç”±èµ·ç‚¹è·¯ç”±å™¨ä¼ æ’­è‡³ç»ˆç‚¹è·¯ç”±å™¨æ‰€éœ€è¦çš„æ—¶é—´


<br>èŠ‚ç‚¹æ€»æ—¶å»¶ï¼š
<br><br>
<br>æ’é˜Ÿæ—¶å»¶å–å†³äºæµé‡åˆ°è¾¾è¯¥é˜Ÿåˆ—çš„é€Ÿç‡ã€é“¾è·¯çš„å¹³å‡é€Ÿç‡å’Œåˆ°è¾¾æµé‡çš„æ€§è´¨
<br>æµé‡å¼ºåº¦(traffic intensity)ï¼š 

<br>åˆ†ç»„åˆ°è¾¾é˜Ÿåˆ—çš„å¹³å‡é€Ÿåº¦ï¼ša(pkt/s)
<br>ä¼ è¾“é€Ÿç‡ï¼šR(bps)
<br>åˆ†ç»„çš„æ¯”ç‰¹æ•°ï¼šL
<br>è®¾è®¡ç³»ç»Ÿæ—¶æµé‡å¼ºåº¦ä¸èƒ½å¤§äº1
<br>æµé‡å¼ºåº¦è¶Šæ¥è¿‘1é“¾è·¯è¶Šå®¹æ˜“æ‹¥å¡


<br>ä¸¢åŒ…ï¼šè·¯ç”±å™¨æ’é˜Ÿå®¹é‡æœ‰é™ï¼Œè‹¥åˆ†ç»„åˆ°è¾¾æ—¶é˜Ÿåˆ—å·²æ»¡ï¼Œè·¯ç”±å™¨å°†ä¸¢å¼ƒè¯¥åˆ†ç»„
<br>èŠ‚ç‚¹çš„æ€§èƒ½æ ¹æ®æ—¶å»¶å’Œä¸¢åŒ…æ¦‚ç‡æ¥åº¦é‡
<br><br>
<br>å‡å®šæºä¸»æœºå’Œç›®çš„ä¸»æœºä¹‹é—´æœ‰N-1å°è·¯ç”±å™¨ï¼Œç½‘ç»œæ˜¯æ— æ‹¥å¡çš„

<br>ç«¯åˆ°ç«¯æ—¶å»¶ï¼š


<br>ç«¯ç³»ç»Ÿã€åº”ç”¨ç¨‹åºå’Œå…¶ä»–æ—¶å»¶

<br>å¸Œæœ›å‘å…±äº«åª’ä½“(WiFiæˆ–ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨)ä¼ è¾“åˆ†ç»„çš„ç«¯ç³»ç»Ÿ
<br>åª’ä½“çš„åˆ†ç»„åŒ–æ—¶å»¶(VoIP)


<br><br>
<br>ç¬æ—¶ååé‡(instantaneous throughput)å’Œå¹³å‡ååé‡(average throughput)
<br>ç®€å•çš„ä¸¤é“¾è·¯ç½‘ç»œååé‡æ˜¯ç“¶é¢ˆé“¾è·¯(bottleneck link)çš„ä¼ è¾“é€Ÿç‡(è¿‘ä¼¼)
<br>ååé‡ä¸ä»…å–å†³äºæ²¿ç€è·¯å¾„çš„ä¼ è¾“é€Ÿç‡ï¼Œè€Œä¸”å–å†³äºå¹²æ‰°æµé‡
<br><br><br>
<br>åˆ©ç”¨åˆ†å±‚ä½“ç³»ç»“æ„ï¼Œå¯ä»¥è®¨è®ºä¸€ä¸ªå¤§è€Œå¤æ‚ç³»ç»Ÿå®šä¹‰è‰¯å¥½çš„ç‰¹å®šéƒ¨åˆ†
<br><br><img alt="Pasted image 20231031145614.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031145614.png"><img alt="Pasted image 20231108104004.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108104004.png"><br>
<br>åˆ†å±‚(layer)ï¼šä¸ºäº†ç»™ç½‘ç»œè®¾è®¡çš„åè®®æä¾›ä¸€ä¸ªç»“æ„ï¼Œç½‘ç»œè®¾è®¡è€…ä»¥åˆ†å±‚(layer)çš„æ–¹å¼ç»„ç»‡åè®®ä»¥åŠå®ç°è¿™äº›åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶
<br>æœåŠ¡æ¨¡å‹(service model)ï¼šæŸå±‚å‘ä»–çš„ä¸Šä¸€å±‚æä¾›çš„æœåŠ¡
<br>ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚çš„é€šä¿¡é€šå¸¸åœ¨ç½‘ç»œæ¥å£å¡ä¸­å®ç°
<br>ä¼˜ç‚¹ï¼šæ¦‚å¿µåŒ–å’Œç»“æ„åŒ–
<br>ç¼ºç‚¹ï¼šä¸€å±‚å¯èƒ½å†—ä½™è¾ƒä½å±‚çš„åŠŸèƒ½(eg. åœ¨é“¾è·¯å±‚å’Œä¼ è¾“å±‚çš„æŸäº›åè®®å‡å®ç°äº†å·®é”™æ£€æµ‹)ã€æŸå±‚çš„åŠŸèƒ½å¯èƒ½éœ€è¦ä»…åœ¨å…¶ä»–æŸå±‚å‡ºç°çš„ä¿¡æ¯
<br><a data-tooltip-position="top" aria-label="" rel="noopener" class="external-link" href="." target="_blank">åè®®æ•°æ®å•å…ƒ</a> (Protocol data unit)ï¼šâš ï¸æœ¬ä¹¦ç”¨ packet (åˆ†ç»„ï¼Œæˆ‘è®¤ä¸ºç¿»è¯‘ä¸º"å°åŒ…"æ›´åŠ æ°å½“) ç»Ÿç§° Layer 2+ çš„æ‰€æœ‰çš„åè®®æ•°æ®å•å…ƒï¼Œåœ¨ç»™å‡º Protocol çš„ <a data-tooltip-position="top" aria-label="å› ç‰¹ç½‘ > ^845e9d" data-href="å› ç‰¹ç½‘#^845e9d" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html#^845e9d" class="internal-link" target="_self" rel="noopener">å®šä¹‰</a> æ—¶è¿˜ä½¿ç”¨äº†æŠ¥æ–‡ (message) ç»Ÿç§°è¿™äº›æ•°æ®å•å…ƒ (ä½†åœ¨åæ–‡å´ä¸“æŒ‡åº”ç”¨å±‚ PDU)ï¼Œä»‹ç»åè®®åˆ†å±‚æ—¶ç”¨ datagram ç§°å‘¼ç½‘ç»œå±‚åˆ†ç»„ï¼Œè¯·æ³¨æ„åŒºåˆ†ï¼Œé¿å…ä¸é…å›¾å’Œç½‘ç»œèµ„æ–™(ä¸Šé¢ä¸¤å¼ å›¾çš„ç½‘ç»œå±‚ PDU çš„è¡¨ç¤ºæ–¹å¼å°±ä¸åŒï¼Œå›¾ 1 ä¸º Packetï¼Œå›¾ 2 ä¸º IP Datagram)æ··æ·†ï¼Œæ˜¯ TCP/IP 5-layer reference model å’Œ OSI model çš„å·®å¼‚å’Œæ•™æä¸ºäº†æ•™å­¦ä¾¿åˆ©çš„ç®€åŒ–é€ æˆçš„ <a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Internet_protocol_suite#Layering_evolution_and_representations_in_the_literature" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Internet_protocol_suite#Layering_evolution_and_representations_in_the_literature" target="_blank">Layering evolution and representations in the literature</a> 

<br>The Layer 5ï¼šåº”ç”¨å±‚ PDU ç§°ä¸ºæŠ¥æ–‡ (message)ï¼Œä¹Ÿå¯ç§°æ•°æ®(data)
<br>The Layer 4 ï¼šä¼ è¾“å±‚ PDU ç§°ä¸ºæŠ¥æ–‡æ®µ (segment, TCP) æˆ–æ•°æ®æŠ¥ (datagram, UDP)ï¼Œæœ¬ä¹¦ä¸ºäº†é˜²æ­¢ä¸ç½‘ç»œå±‚æ•°æ®æŠ¥æ··æ·†å°†ä¸¤è€…ç»Ÿç§°ä¸ºæŠ¥æ–‡æ®µ (segment)
<br>The Layer 3ï¼šç½‘ç»œå±‚ PDU ç§°ä¸ºåˆ†ç»„ (packet)ï¼Œæœ¬ä¹¦ä¸­ç§°ä¸ºæ•°æ®æŠ¥ (datagram)(IP åè®®ä¸­è¿™ä¹ˆç§°å‘¼å®ƒçš„å°åŒ…)
<br>The Layer 2ï¼šé“¾è·¯å±‚ PDU ç§°ä¸ºå¸§ (frame)
<br>The Layer 1ï¼šç‰©ç†å±‚ PDU ç§°ä¸ºæ¯”ç‰¹ (bit)ï¼Œæˆ–è€…æ›´ä¸€èˆ¬åœ°ç§°ä¸ºç¬¦å· (symbol)


<br>åè®®æ ˆ(protocol stack)ï¼šåè®®åˆ†å±‚åå„å±‚çš„æ‰€æœ‰åè®®ï¼Œå¤§é»‘çš®ä½¿ç”¨äº†è‡ªé¡¶å‘ä¸‹çš„æ–¹æ³•æ¥ç»„ç»‡å†…å®¹

<br>ç‰©ç†å±‚

<br>å°†é“¾è·¯å±‚å¸§ä¸­çš„æ¯”ç‰¹ä»ä¸€ä¸ªèŠ‚ç‚¹ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
<br>ä»¥å¤ªç½‘å…·æœ‰è®¸å¤šç‰©ç†å±‚åè®®ï¼šå…³äºåŒç»é“œçº¿çš„ã€å…³äºåŒè½´ç”µç¼†çš„ã€å…³äºå…‰çº¤çš„Â·Â·Â·Â·Â·Â·


<br>é“¾è·¯å±‚

<br>å¸§(frame)ï¼šé“¾è·¯å±‚åˆ†ç»„
<br>æŸäº›åè®®åŸºäºé“¾è·¯æä¾›å¯é ä¼ é€’ï¼Œä»ä¼ è¾“èŠ‚ç‚¹è·¨è¶Šä¸€æ¡é“¾è·¯åˆ°æ¥æ”¶èŠ‚ç‚¹


<br>ç½‘ç»œå±‚

<br>è´Ÿè´£å°†ç§°ä¸ºæ•°æ®æŠ¥(datagram)çš„ç½‘ç»œå±‚åˆ†ç»„ä»ä¸€å°ä¸»æœºç§»åŠ¨åˆ°å¦ä¸€å°ä¸»æœº
<br>ç½‘é™…åè®®IP
<br>è·¯ç”±é€‰æ‹©åè®®


<br>è¿è¾“å±‚

<br>åœ¨åº”ç”¨å±‚ç«¯ç‚¹(ä¸»æœºä¸Šçš„è¿›ç¨‹)é—´ä¼ é€åº”ç”¨å±‚æŠ¥æ–‡
<br>TCPï¼šæä¾›äº†é¢å‘è¿æ¥çš„æœåŠ¡ï¼ŒåŒ…æ‹¬ç¡®ä¿ä¼ é€’å’Œæµé‡æ§åˆ¶
<br>UDPï¼šæä¾›æ— è¿æ¥æœåŠ¡ï¼Œæ²¡æœ‰æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶
<br>æŠ¥æ–‡æ®µ(segment)ï¼šè¿è¾“å±‚çš„åˆ†ç»„


<br>åº”ç”¨å±‚

<br>å­˜ç•™ç½‘ç»œåº”ç”¨ç¨‹åºåŠåº”ç”¨å±‚åè®®(HTTP/SMTP/FTP/DNS)
<br>æŠ¥æ–‡(message)ï¼šä½äºåº”ç”¨å±‚çš„ä¿¡æ¯åˆ†ç»„




<br>OSIæ¨¡å‹

<br>20ä¸–çºª70å¹´ä»£åæœŸï¼ŒISOæå‡ºå¼€æ”¾ç³»ç»Ÿäº’è”(OSI)æ¨¡å‹
<br>OSIå‚è€ƒçš„7å±‚ï¼šåº”ç”¨å±‚ã€è¡¨ç¤ºå±‚ã€ä¼šè¯å±‚ã€è¿è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚
<br>è¡¨ç¤ºå±‚ï¼šä½¿é€šä¿¡çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿè§£é‡Šäº¤æ¢æ•°æ®çš„å«ä¹‰ï¼ŒåŒ…æ‹¬æ•°æ®å‹ç¼©å’Œæ•°æ®åŠ å¯†ä»¥åŠæ•°æ®æè¿°
<br>ä¼šè¯å±‚ï¼šæä¾›äº†æ•°æ®äº¤æ¢çš„å®šç•Œå’ŒåŒæ­¥åŠŸèƒ½ï¼ŒåŒ…æ‹¬äº†å»ºç«‹æ£€æŸ¥ç‚¹å’Œæ¢å¤æ–¹æ¡ˆçš„æ–¹æ³•


<br><a data-tooltip-position="top" aria-label="https://www.xiaolincoding.com/network/1_base/what_happen_url.html#%E5%AD%A4%E5%8D%95%E5%B0%8F%E5%BC%9F-http" rel="noopener" class="external-link" href="https://www.xiaolincoding.com/network/1_base/what_happen_url.html#%E5%AD%A4%E5%8D%95%E5%B0%8F%E5%BC%9F-http" target="_blank">å›¾è§£è®¡ç®—æœºç½‘ç»œ</a> ç»™å‡ºçš„ç›¸å¯¹é€šä¿—æ˜“æ‡‚çš„è§£é‡Šå¯ä»¥ä½œä¸ºå‚è€ƒ
<br><br>
<br>æ¯ä¸€å±‚æ¯ä¸ªåˆ†ç»„æœ‰ä¸¤ç§ç±»å‹çš„å­—æ®µï¼šé¦–éƒ¨å­—æ®µå’Œæœ‰æ•ˆè·è½½å­—æ®µ(payload field)ï¼Œæœ‰æ•ˆè·è½½å­—æ®µé€šå¸¸æ˜¯æ¥è‡ªä¸Šä¸€å±‚çš„åˆ†ç»„
<br>å‘é€ä¸»æœºç«¯ï¼Œåº”ç”¨å±‚æŠ¥æ–‡(application-layer message)è¢«ä¼ é€ç»™è¿è¾“å±‚
<br>è¿è¾“å±‚æŠ¥æ–‡æ®µ(transport-layer segment)ï¼šè¿è¾“å±‚æ”¶åˆ°åº”ç”¨å±‚æŠ¥æ–‡å¹¶é™„ä¸Šè¿è¾“å±‚é¦–éƒ¨ä¿¡æ¯ï¼Œå°è£…äº†åº”ç”¨å±‚æŠ¥æ–‡
<br>ç½‘ç»œå±‚æ•°æ®æŠ¥(network-layer datagram)ï¼šç½‘ç»œå±‚æ·»åŠ äº†å¦‚æºå’Œç›®çš„ç«¯ç³»ç»Ÿåœ°å€ç­‰ç½‘ç»œå±‚é¦–éƒ¨ä¿¡æ¯
<br>é“¾è·¯å±‚å¸§(link-layer frame)ï¼šé“¾è·¯å±‚æ·»åŠ é“¾è·¯å±‚é¦–éƒ¨ä¿¡æ¯
]]></description><link>campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html</link><guid isPermaLink="false">Campus/Chinese-Notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.md</guid><pubDate>Fri, 22 Dec 2023 11:04:20 GMT</pubDate><enclosure url="campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231101104608.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231101104608.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[åº”ç”¨å±‚åè®®åŸç†]]></title><description><![CDATA[ 
 <br><br>
<br>ç ”å‘ç½‘ç»œåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒæ˜¯å†™å‡ºèƒ½å¤Ÿè¿è¡Œåœ¨ä¸åŒçš„ç«¯ç³»ç»Ÿå’Œé€šè¿‡ç½‘ç»œå½¼æ­¤é€šä¿¡çš„ç¨‹åº
<br>å³å°†åº”ç”¨è½¯ä»¶é™åˆ¶åœ¨ç«¯ç³»ç»Ÿçš„æ–¹æ³•ï¼ä¿ƒè¿›äº†å¤§é‡çš„ç½‘ç»œåº”ç”¨ç¨‹åºçš„è¿…é€Ÿç ”å‘å’Œéƒ¨ç½²
<br><br>
<br>ä»åº”ç”¨ç¨‹åºç ”å‘è€…è§’åº¦çœ‹ï¼Œç½‘ç»œä½“ç³»ç»“æ„æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸ºåº”ç”¨ç¨‹åºæä¾›äº†ç‰¹å®šçš„æœåŠ¡é›†åˆ
<br>åº”ç”¨ç¨‹åºä½“ç³»ç»“æ„ (application architecture) ï¼šç”±åº”ç”¨ç¨‹åºç ”å‘è€…è®¾è®¡ï¼Œè§„å®šäº†å¦‚ä½•åœ¨å„ç«¯ç³»ç»Ÿä¸Šç»„ç»‡è¯¥åº”ç”¨ç¨‹åº
<br><br>
<br>æ€»æ˜¯æ‰“å¼€çš„ä¸»æœºâ€”â€”æœåŠ¡å™¨ï¼Œå®ƒæœåŠ¡äºæ¥è‡ªè®¸å¤šå…¶ä»–ç§°ä¸ºå®¢æˆ·çš„ä¸»æœºçš„è¯·æ±‚
<br>æœåŠ¡å™¨å…·æœ‰å›ºå®šå‘¨çŸ¥çš„ IP åœ°å€
<br>è‘—ååº”ç”¨ç¨‹åº

<br>Web
<br>FTP
<br>Telnet
<br>ç”µå­é‚®ä»¶


<br>é…å¤‡å¤§é‡ä¸»æœºçš„æ•°æ®ä¸­å¿ƒ (data center) å¸¸è¢«ç”¨äºåˆ›å»ºå¼ºå¤§çš„è™šæ‹ŸæœåŠ¡å™¨
<br><br>
<br>åº”ç”¨ç¨‹åºåœ¨é—´æ–­è¿æ¥çš„ä¸»æœºå¯¹ä¹‹é—´ä½¿ç”¨ç›´æ¥é€šä¿¡ï¼Œè¿™äº›ä¸»æœºå¯¹è¢«ç§°ä¸ºå¯¹ç­‰æ–¹ï¼Œè¿™äº›å¯¹ç­‰æ–¹å¹¶ä¸ä¸ºæœåŠ¡æä¾›å•†æ‰€æœ‰
<br>å…·æœ‰è‡ªæ‰©å±•æ€§: æ¯ä¸ªå¯¹ç­‰æ–¹éƒ½ç”±äºè¯·æ±‚æ–‡ä»¶äº§ç”Ÿå·¥ä½œè´Ÿè½½ï¼Œä½†é€šè¿‡å‘å…¶ä»–å¯¹ç­‰æ–¹åˆ†å‘æ–‡ä»¶ä¸ºç³»ç»Ÿå¢åŠ æœåŠ¡èƒ½åŠ›
<br><br><img alt="Pasted image 20231023191228.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231023191228.png"><br>
<br>è¿›ç¨‹ (<a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Process_" rel="noopener" class="external-link" title="computing" href="https://en.wikipedia.org/wiki/Process_" target="_blank">process</a>): In computing, a process is the instance of a computer program that is being excuted by one or many threads.) æ˜¯è¿è¡Œåœ¨ç«¯ç³»ç»Ÿä¸Šçš„ç¨‹åºï¼Œå½“å¤šä¸ªè¿›ç¨‹è¿è¡Œåœ¨ç›¸åŒçš„ç«¯ç³»ç»Ÿä¸Šæ—¶ï¼Œå®ƒä»¬ä½¿ç”¨è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ç›¸äº’é€šä¿¡
<br>ä¸åŒç«¯ç³»ç»Ÿä¸Šçš„è¿›ç¨‹ï¼Œé€šè¿‡è·¨è¶Šè®¡ç®—æœºäº¤æ¢æŠ¥æ–‡ (message) è€Œç›¸äº’é€šä¿¡
<br><br>
<br>åœ¨ä¸€å¯¹è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ä¼šè¯åœºæ™¯ä¸­ï¼Œå‘èµ·é€šä¿¡ï¼ˆå³åœ¨è¯¥ä¼šè¯å¼€å§‹æ—¶å‘èµ·ä¸å…¶ä»–è¿›ç¨‹çš„è”ç³»ï¼‰çš„è¿›ç¨‹è¢«æ ‡è¯†ä¸ºå®¢æˆ·ï¼Œåœ¨ä¼šè¯å¼€å§‹æ—¶ç­‰å¾…è”ç³»çš„è¿›ç¨‹æ˜¯æœåŠ¡å™¨ã€‚
<br><br>
<br>è¿›ç¨‹é€šè¿‡ç§°ä¸ºå¥—æ¥å­— (socket) çš„è½¯ä»¶æ¥å£å‘ç½‘ç»œå‘é€æŠ¥æ–‡å’Œä»ç½‘ç»œæ¥æ”¶æŠ¥æ–‡

<br>å¥—æ¥æ˜¯åŒä¸€å°ä¸»æœºå†…åº”ç”¨å±‚ä¸è¿è¾“å±‚ä¹‹é—´çš„æ¥å£
<br>ç”±äºè¯¥å¥—æ¥å­—æ˜¯å»ºç½‘ç»œåº”ç”¨ç¨‹åºçš„å¯ç¼–ç¨‹æ¥å£ï¼Œå› æ­¤å¥—æ¥å­—ä¹Ÿç§°ä¸ºåº”ç”¨ç¨‹åºå’Œç½‘ç»œä¹‹é—´çš„åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ (Application Programming Interface, API)  


<br>åº”ç”¨ç¨‹åºå¼€å‘è€…å¯¹è¿è¾“å±‚çš„æ§åˆ¶ä»…é™äºäº

<br>é€‰æ‹©è¿è¾“å±‚åè®®
<br>è®¾å®šå‡ ä¸ªå‚æ•°ï¼Œå¦‚æœ€å¤§ç¼“å­˜å’Œæœ€å¤§æŠ¥æ–‡é•¿åº¦ç­‰


<br><br>
<br>ä¸ºäº†æ ‡è¯†æ¥å—è¿›ç¨‹ï¼Œéœ€è¦å®šä¹‰ä¸¤ç§ä¿¡æ¯

<br>ä¸»æœºçš„åœ°å€
<br>åœ¨ç›®çš„ä¸»æœºä¸­æŒ‡å®šæ¥æ”¶è¿›ç¨‹çš„æ ‡è¯†ç¬¦ (ç›®çš„åœ°ç«¯å£å·)


<br><br>
<br>é€šè¿‡ç ”ç©¶å¯ç”¨çš„è¿è¾“å±‚åè®®æä¾›çš„æœåŠ¡ï¼Œé€‰æ‹©ä¸€ä¸ªæœ€èƒ½ä¸ºåº”ç”¨éœ€æ±‚æä¾›æ°å½“æœåŠ¡çš„åè®®
<br>æŒ‰ç…§åº”ç”¨ç¨‹åºæœåŠ¡è¦æ±‚åˆ†ç±»

<br>å¯é æ•°æ®ä¼ è¾“
<br>ååé‡
<br>å®šæ—¶
<br>å®‰å…¨æ€§


<br><br>
<br>å¦‚æœä¸€ä¸ªåè®®æä¾›äº†ç¡®ä¿ç”±åº”ç”¨ç¨‹åºçš„ä¸€ç«¯å‘é€çš„æ•°æ®æ­£ç¡®ã€å®Œå…¨åœ°äº¤ä»˜ç»™è¯¥åº”ç”¨ç¨‹åºçš„å¦ä¸€ç«¯çš„æ•°æ®äº¤ä»˜æœåŠ¡ï¼Œå°±è®¤ä¸ºæä¾›äº†å¯é æ•°æ®ä¼ è¾“æœåŠ¡ (reliable data transfer)
<br>è¿è¾“å±‚åè®®å‘åº”ç”¨ç¨‹åºæä¾›çš„ä¸€ä¸ªé‡è¦æœåŠ¡æ˜¯è¿›ç¨‹åˆ°è¿›ç¨‹çš„å¯é æ•°æ®ä¼ è¾“
<br>å®¹å¿ä¸¢å¤±çš„åº”ç”¨ (loss-tolerant application): ä½¿ç”¨çš„è¿è¾“å±‚åè®®ä¸æä¾›å¯é æ•°æ®ä¼ è¾“ï¼Œå‘é€è¿›ç¨‹çš„æ•°æ®å¯èƒ½
<br><br>
<br>å¯ç”¨ååé‡ï¼šå‘é€è¿›ç¨‹èƒ½å¤Ÿå‘æ¥æ”¶è¿›ç¨‹äº¤ä»˜æ¯”ç‰¹çš„é€Ÿç‡
<br>äº§ç”Ÿäº†ä¸€ç§èƒ½å¤Ÿä»¥æŸç§ç‰¹å®šçš„é€Ÿç‡æä¾›ç¡®ä¿çš„å¯ç”¨ååé‡çš„è¿è¾“å±‚åè®®ï¼Œé€‚ç”¨äºå¸¦å®½æ•æ„Ÿçš„åº”ç”¨
<br>å¸¦å®½æ•æ„Ÿçš„åº”ç”¨ (bandwidth-sensitive application)ï¼šå…·æœ‰ååé‡è¦æ±‚çš„åº”ç”¨ç¨‹åº
<br>å¼¹æ€§åº”ç”¨(elastic application)ï¼šèƒ½å¤Ÿæ ¹æ®å½“æ—¶å¯ç”¨å¸¦å®½æˆ–å¤šæˆ–å°‘åœ°åˆ©ç”¨å¯ä¾›ä½¿ç”¨çš„ååé‡
<br><br>
<br>å¯¹äºäº¤äº’å¼å®æ—¶åº”ç”¨ç¨‹åºæœ‰å¸å¼•åŠ›ï¼Œå¦‚å› ç‰¹ç½‘ç”µè¯ã€è™šæ‹Ÿç¯å¢ƒã€ç”µè¯ä¼šè®®å’Œå¤šæ–¹æ¸¸æˆ
<br>å®šæ—¶ä¿è¯ï¼šå‘é€æ–¹æ³¨å…¥å¥—æ¥å­—çš„æ¯ä¸ªæ¯”ç‰¹åˆ°è¾¾æ¥æ”¶æ–¹çš„å¥—æ¥å­—ä¸è¿Ÿäºç‰¹å®šæ—¶é—´é™åˆ¶
<br><br>
<br>è¿è¾“åè®®èƒ½å¤Ÿä¸ºåº”ç”¨ç¨‹åºæä¾›ä¸€ç§æˆ–å¤šç§å®‰å…¨æ€§æœåŠ¡
<br>å‘é€ä¸»æœºä¸­è¿è¾“åè®®èƒ½å¤ŸåŠ å¯†å‘é€è¿›ç¨‹ä¼ è¾“çš„æ‰€æœ‰æ•°æ®
<br>æ¥æ”¶ä¸»æœºä¸­è¿è¾“å±‚åè®®èƒ½å¤Ÿå°†æ•°æ®äº¤ä»˜ç»™æ¥æ”¶è¿›ç¨‹å‰è§£å¯†è¿™äº›æ•°æ®
<br>è¿è¾“å±‚åè®®èƒ½å¤Ÿæä¾›æœºå¯†æ€§ã€æ•°æ®å®Œæ•´æ€§å’Œç«¯ç‚¹é‰´åˆ«ç­‰å®‰å…¨æ€§æœåŠ¡
<br><br>
<br>å› ç‰¹ç½‘ä¸ºåº”ç”¨ç¨‹åºæä¾›äº†ä¸¤ä¸ªè¿è¾“å±‚åè®®ï¼Œå³ UDP å’Œ TCP
<br><br>
<br>TCP æœåŠ¡æ¨¡å‹åŒ…æ‹¬é¢å‘è¿æ¥æœåŠ¡å’Œå¯é æ•°æ®ä¼ è¾“æœåŠ¡
<br>é¢å‘è¿æ¥çš„æœåŠ¡ï¼š

<br>æ¡æ‰‹è¿‡ç¨‹ï¼šåœ¨åº”ç”¨å±‚æ•°æ®æŠ¥æ–‡å¼€å§‹æµåŠ¨ä¹‹å‰ï¼ŒTCP è®©å®¢æˆ·å’ŒæœåŠ¡å™¨äº’ç›¸äº¤æ¢è¿è¾“å±‚æ§åˆ¶ä¿¡æ¯
<br>æ¡æ‰‹é˜¶æ®µåï¼Œä¸¤ä¸ªè¿›ç¨‹çš„å¥—æ¥å­—ä¹‹é—´å»ºç«‹ä¸€ä¸ª <a data-tooltip-position="top" aria-label="https://zh.wikipedia.org/zh-cn/%E9%9B%99%E5%B7%A5" rel="noopener" class="external-link" href="https://zh.wikipedia.org/zh-cn/%E9%9B%99%E5%B7%A5" target="_blank"><strong></strong></a>å…¨åŒå·¥ çš„ TCP è¿æ¥ (TCP connection)ï¼Œå½“åº”ç”¨ç¨‹åºç»“æŸæŠ¥æ–‡å‘é€æ—¶ï¼Œå¿…é¡»æ‹†é™¤è¯¥è¿æ¥


<br>å¯é çš„æ•°æ®ä¼ é€æœåŠ¡ï¼š<br>
<img alt="Pasted image 20231031150119.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031150119.png">

<br>é€šä¿¡è¿›ç¨‹èƒ½å¤Ÿä¾é  TCPï¼Œæ— å·®é”™ã€æŒ‰é€‚å½“é¡ºåºäº¤ä»˜æ‰€æœ‰å‘é€çš„æ•°æ®


<br>æ‹¥å¡æ§åˆ¶æœºåˆ¶
<br>TCP å®‰å…¨

<br>å®‰å…¨å¥—æ¥å­—å±‚ (Secure Sockets Layerï¼ŒSSL)ï¼šç»è¿‡ SSL å¢å¼ºçš„ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼‰ä¸ä»…å…·å¤‡ä¼ ç»Ÿ TCP çš„åŠŸèƒ½ï¼Œè€Œä¸”è¿˜æä¾›äº†å…³é”®çš„è¿›ç¨‹åˆ°è¿›ç¨‹å®‰å…¨æ€§æœåŠ¡ï¼ŒåŒ…æ‹¬åŠ å¯†ã€æ•°æ®å®Œæ•´æ€§å’Œç«¯ç‚¹é‰´åˆ«
<br>SSL åœ¨åº”ç”¨å±‚ä¸Šå®ç°


<br><br>
<br>UDP æ— è¿æ¥æ²¡æœ‰æ¡æ‰‹è¿‡ç¨‹ï¼Œæ²¡æœ‰æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼ŒUDP åè®®æä¾›ä¸å¯é çš„æ•°æ®ä¼ é€æœåŠ¡<br>
<img alt="Pasted image 20231031152513.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031152513.png">
<br><br>
<br>ä»Šå¤©çš„å› ç‰¹ç½‘é€šå¸¸èƒ½å¤Ÿä¸ºæ—¶é—´æ•æ„Ÿåº”ç”¨æä¾›æ»¡æ„çš„æœåŠ¡ï¼Œä½†å®ƒä¸èƒ½æä¾›ä»»ä½•å®šæ—¶æˆ–å¸¦å®½ä¿è¯
<br><br>
<br>åº”ç”¨å±‚åè®® (application-layer protocol) å®šä¹‰äº†è¿è¡Œåœ¨ä¸åŒç«¯ç³»ç»Ÿä¸Šçš„åº”ç”¨ç¨‹åºè¿›ç¨‹å¦‚ä½•ç›¸äº’ä¼ é€’æŠ¥æ–‡
<br>åº”ç”¨å±‚åè®®å®šä¹‰äº†ï¼š

<br>äº¤æ¢çš„æŠ¥æ–‡ç±»å‹
<br>å„ç§æŠ¥æ–‡ç±»å‹çš„è¯­æ³•
<br>å­—æ®µçš„è¯­ä¹‰
<br>ç¡®å®šä¸€ä¸ªè¿›ç¨‹ä½•æ—¶ä»¥åŠå¦‚ä½•å‘é€æŠ¥æ–‡ï¼Œå¯¹æŠ¥æ–‡è¿›è¡Œå“åº”çš„è§„åˆ™


<br>åº”ç”¨å±‚åè®®åˆ†ä¸ºå®šä¹‰åœ¨å…¬å…±åŸŸä¸­çš„åè®®å’Œä¸“ç”¨çš„åè®®
<br>åº”ç”¨å±‚åè®®åªæ˜¯ç½‘ç»œåº”ç”¨çš„é‡è¦éƒ¨åˆ†<br>
<img alt="network-protocol.gif" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/network-protocol.gif">
<br><br>
<br>ä¸‡ç»´ç½‘ (World Wide Web)æ˜¯ä¸€ä¸ªå› ç‰¹ç½‘åº”ç”¨ï¼Œå…¶ä½¿ç”¨çš„åº”ç”¨å±‚åè®®æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®(HyperText Transfer Protocol, HTTP) <a data-tooltip-position="top" aria-label="" rel="noopener" class="external-link" href="." target="_blank">RFC 1945</a> <a data-tooltip-position="top" aria-label="" rel="noopener" class="external-link" href="." target="_blank">RFC 2616</a>
<br>Web å…·æœ‰æŒ‰éœ€æ“ä½œï¼Œè·å–ä¿¡æ¯ä¾¿æ·ç­‰ç‰¹ç‚¹
<br>Web é¡µé¢ç”±å¯¹è±¡ (object) ç»„æˆï¼Œä¸€ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå¤šæ•° Web é¡µé¢å«æœ‰ä¸€ä¸ª HTML åŸºæœ¬æ–‡ä»¶ä»¥åŠå‡ ä¸ªå¼•ç”¨å¯¹è±¡
<br>White çš„é™æ€åšå®¢çš„æ–‡ä»¶ç»“æ„(å…¥å£æ˜¯ index.html)<br>
<img alt="Pasted image 20231031154854.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031154854.png">
<br>URL åœ°å€ç”±å­˜æ”¾å¯¹è±¡çš„æœåŠ¡å™¨ä¸»æœºåå’Œå¯¹è±¡çš„è·¯å¾„åç»„æˆ
<br><br>
<br>HTTP å®šä¹‰äº† Web å®¢æˆ·å‘ Web æœåŠ¡å™¨è¯·æ±‚ Web é¡µé¢çš„æ–¹å¼ï¼Œä»¥åŠæœåŠ¡å™¨å‘å®¢æˆ·ä¼ é€ Web é¡µé¢çš„æ–¹å¼
<br>HTTP ä½¿ç”¨ TCP ä½œä¸ºå®ƒçš„æ”¯æ’‘è¿è¾“åè®®
<br>HTTP ä¸ä¿å­˜å…³äºå®¢æˆ·çš„ä»»ä½•ä¿¡æ¯ï¼Œæ‰€ä»¥ HTTP æ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®®(stateless protocol)
<br><br>
<br>æ ¹æ®æ¯ä¸ªè¯·æ±‚/ç›¸åº”å¯¹ç»ä¸€ä¸ªå•ç‹¬çš„ TCP è¿æ¥å‘é€è¿˜æ˜¯ç»ç›¸åŒçš„ TCP è¿æ¥å‘é€åˆ’åˆ†
<br>éæŒç»­è¿æ¥ (non-persistent connection)ï¼š<img alt="Pasted image 20231031163253.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031163253.png"> <img alt="Pasted image 20231031164531.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031164531.png"> <img alt="Pasted image 20231031163437.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031163437.png"> <img alt="Pasted image 20231031163454.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031163454.png"> é’ˆå¯¹ä¸åŒçš„ HostName å»ºç«‹äº†ä¸¤ä¸ªå¹¶è¡Œçš„ TCP è¿æ¥ (Q: æ€ä¹ˆé€šè¿‡å·¥å…·è§‚å¯Ÿå›¾ 2 å’Œå›¾ 3 çš„ä¸¤ä¸ªè¿æ¥æ˜¯å¦æ˜¯æŒç»­çš„) 

<br>ç”¨æˆ·å¯ä»¥é…ç½®ç°ä»£æµè§ˆå™¨æ¥æ§åˆ¶è¿æ¥çš„å¹¶è¡Œåº¦
<br>å¾€è¿”æ—¶é—´(Round-Trip Time, RTT)ï¼š 

<br>ä¸€ä¸ªçŸ­åˆ†ç»„ä»å®¢æˆ·åˆ°æœåŠ¡å™¨ç„¶åå†è¿”å›å®¢æˆ·æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ 
<br>RTT åŒ…æ‹¬åˆ†ç»„ä¼ æ’­æ—¶å»¶ã€åˆ†ç»„åœ¨ä¸­é—´è·¯ç”±å™¨å’Œäº¤æ¢æœºä¸Šçš„æ’é˜Ÿæ—¶å»¶ä»¥åŠåˆ†ç»„å¤„ç†æ—¶å»¶
<br>ç‚¹å‡»è¶…é“¾æ¥å¼•èµ·æµè§ˆå™¨å’Œ Web æœåŠ¡å™¨é—´å‘èµ·ä¸€ä¸ª TCP è¿æ¥ï¼Œæ¶‰åŠä¸€æ¬¡"ä¸‰æ¬¡æ¡æ‰‹"çš„è¿‡ç¨‹ <img alt="Pasted image 20231031165751.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031165751.png">
<br>æ€»çš„å“åº”æ—¶é—´æ˜¯ä¸¤ä¸ª RTT åŠ ä¸ŠæœåŠ¡å™¨ä¼ è¾“(?) HTML æ–‡ä»¶çš„æ—¶é—´


<br>ç¼ºç‚¹ï¼š

<br>å¿…é¡»ä¸ºæ¯ä¸€ä¸ªè¯·æ±‚çš„å¯¹è±¡å»ºç«‹å’Œç»´æŠ¤ä¸€ä¸ªå…¨æ–°çš„è¿æ¥
<br>æ¯ä¸€ä¸ªå¯¹è±¡ç»å—ä¸¤å€ RTT çš„äº¤ä»˜æ—¶å»¶




<br>æŒç»­è¿æ¥(persistent connection)

<br>åœ¨é‡‡ç”¨ HTTP1.1 æŒç»­è¿æ¥çš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨åœ¨å‘é€å“åº”åä¿æŒ TCP è¿æ¥æ‰“å¼€ï¼Œåœ¨ç›¸åŒçš„å®¢æˆ·ä¸æœåŠ¡å™¨ä¹‹é—´ï¼Œåç»­çš„è¯·æ±‚å’Œå“åº”æŠ¥æ–‡èƒ½å¤Ÿé€šè¿‡ç›¸åŒçš„è¿æ¥è¿›è¡Œä¼ é€ <img alt="Pasted image 20231031171140.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231031171140.png">


<br><br>
<br><a data-tooltip-position="top" aria-label="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Messages" rel="noopener" class="external-link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Messages" target="_blank">MDN-HTTPæ¶ˆæ¯</a>
<br>
<br>å¯¹ HTTP æŠ¥æ–‡æ ¼å¼çš„å®šä¹‰ï¼š<a data-tooltip-position="top" aria-label="" rel="noopener" class="external-link" href="." target="_blank">RFC 1945</a> <a data-tooltip-position="top" aria-label="" rel="noopener" class="external-link" href="." target="_blank">RFC 2616</a> <a data-tooltip-position="top" aria-label="" rel="noopener" class="external-link" href="." target="_blank">RFC 7540</a>
<br><br>GET / HTTP/1.1
Host: cnhktrz3k5nc.hack-challenge.lug.ustc.edu.cn:13202
Cookie: session=eyJ0b2tlbiI6IjU2ODpNRVVDSVFEOUtzZWdBT2c5ZE9jdGkzUmJPSUVTSTdSTWQ5cDRQaW8vdWNxTXY3V0dhUUlnR0dIMHVROHhISWI4SzBNT2lidlFjVk0xaGoxZEdQZGNOYkpGbXJyZE45az0ifQ.ZUGxTw.PrwGL6P9rTzYpTfdu21r7irxBjQ
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/118.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Upgrade-Insecure-Requests: 1
Sec-Fetch-Dest: document
Sec-Fetch-Mode: navigate
Sec-Fetch-Site: none
Sec-Fetch-User: ?1
Te: trailers
Connection: close


----------------------------------------------------------
ğŸŒŸ åŠ ä¸Šä¸æ˜¾ç¤ºçš„å›è½¦å’Œæ¢è¡Œç¬¦åï¼ŒæŠ¥æ–‡ä¸­çš„ç©ºæ ¼ä¹Ÿæ˜¯çœŸå®å­˜åœ¨çš„ (æ„Ÿè°¢ChatGPTçš„å¸®åŠ©)
GET / HTTP/1.1\r\n
Host: cnhktrz3k5nc.hack-challenge.lug.ustc.edu.cn:13202\r\n
Cookie: session=eyJ0b2tlbiI6IjU2ODpNRVVDSVFEOUtzZWdBT2c5ZE9jdGkzUmJPSUVTSTdSTWQ5cDRQaW8vdWNxTXY3V0dhUUlnR0dIMHVROHhISWI4SzBNT2lidlFjVk0xaGoxZEdQZGNOYkpGbXJyZE45az0ifQ.ZUGxTw.PrwGL6P9rTzYpTfdu21r7irxBjQ\r\n
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/118.0\r\n
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8\r\n
Accept-Language: en-US,en;q=0.5\r\n
Accept-Encoding: gzip, deflate\r\n
Upgrade-Insecure-Requests: 1\r\n
Sec-Fetch-Dest: document\r\n
Sec-Fetch-Mode: navigate\r\n
Sec-Fetch-Site: none\r\n
Sec-Fetch-User: ?1\r\n
Te: trailers\r\n
Connection: close\r\n\r\n ğŸŒŸ åœ¨è¡¨é¢ä¸Šçœ‹æ¥æœ«å°¾æœ‰ä¸¤ä¸ªç©ºè¡Œ
Copy<br>ğŸŒŸ ä½¿ç”¨ASCIIç¼–ç è½¬æ¢ä¸º16è¿›åˆ¶ï¼Œæ•°æ®è¢«æ³¨å…¥å¥—æ¥å­—åç©¿è¿‡ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚(ä¸­é—´å­˜åœ¨åˆ†ç»„(?)ç­‰æƒ…å†µ)ä»¥æ¯”ç‰¹æµçš„å½¢å¼ç»è¿‡ç½‘ç»œåŸºç¡€è®¾æ–½

G  E  T  SP /  SP H  T  T  P  /  1  .  1  CR LF ...
47 45 54 20 2f 20 48 54 54 50 2f 31 2e 31 0d 0a 48 6f 73 74 3a 20 63 6e 68 6b 74 72 7a 33 6b 35 6e 63 2e 68 61 63 6b 2d 63 68 61 6c 6c 65 6e 67 65 2e 6c 75 67 2e 75 73 74 63 2e 65 64 75 2e 63 6e 3a 31 33 32 30 32 0d 0a 43 6f 6f 6b 69 65 3a 20 73 65 73 73 69 6f 6e 3d 65 79 4a 30 62 32 74 6c 62 69 49 36 49 6a 55 32 4f 44 70 4e 52 56 56 44 53 56 46 45 4f 55 74 7a 5a 57 64 42 54 32 63 35 5a 45 39 6a 64 47 6b 7a 55 6d 4a 50 53 55 56 54 53 54 64 53 54 57 51 35 63 44 52 51 61 57 38 76 64 57 4e 78 54 58 59 33 56 30 64 68 55 55 6c 6e 52 30 64 49 4d 48 56 52 4f 48 68 49 53 57 49 34 53 7a 42 4e 54 32 6c 69 64 6c 46 6a 56 6b 30 78 61 47 6f 78 5a 45 64 51 5a 47 4e 4f 59 6b 70 47 62 58 4a 79 5a 45 34 35 61 7a 30 69 66 51 2e 5a 55 47 78 54 77 2e 50 72 77 47 4c 36 50 39 72 54 7a 59 70 54 66 64 75 32 31 72 37 69 72 78 42 6a 51 0d 0a 55 73 65 72 2d 41 67 65 6e 74 3a 20 4d 6f 7a 69 6c 6c 61 2f 35 2e 30 20 28 4d 61 63 69 6e 74 6f 73 68 3b 20 49 6e 74 65 6c 20 4d 61 63 20 4f 53 20 58 20 31 30 2e 31 35 3b 20 72 76 3a 31 30 39 2e 30 29 20 47 65 63 6b 6f 2f 32 30 31 30 30 31 30 31 20 46 69 72 65 66 6f 78 2f 31 31 38 2e 30 0d 0a 41 63 63 65 70 74 3a 20 74 65 78 74 2f 68 74 6d 6c 2c 61 70 70 6c 69 63 61 74 69 6f 6e 2f 78 68 74 6d 6c 2b 78 6d 6c 2c 61 70 70 6c 69 63 61 74 69 6f 6e 2f 78 6d 6c 3b 71 3d 30 2e 39 2c 69 6d 61 67 65 2f 61 76 69 66 2c 69 6d 61 67 65 2f 77 65 62 70 2c 2a 2f 2a 3b 71 3d 30 2e 38 0d 0a 41 63 63 65 70 74 2d 4c 61 6e 67 75 61 67 65 3a 20 65 6e 2d 55 53 2c 65 6e 3b 71 3d 30 2e 35 0d 0a 41 63 63 65 70 74 2d 45 6e 63 6f 64 69 6e 67 3a 20 67 7a 69 70 2c 20 64 65 66 6c 61 74 65 0d 0a 55 70 67 72 61 64 65 2d 49 6e 73 65 63 75 72 65 2d 52 65 71 75 65 73 74 73 3a 20 31 0d 0a 53 65 63 2d 46 65 74 63 68 2d 44 65 73 74 3a 20 64 6f 63 75 6d 65 6e 74 0d 0a 53 65 63 2d 46 65 74 63 68 2d 4d 6f 64 65 3a 20 6e 61 76 69 67 61 74 65 0d 0a 53 65 63 2d 46 65 74 63 68 2d 53 69 74 65 3a 20 6e 6f 6e 65 0d 0a 53 65 63 2d 46 65 74 63 68 2d 55 73 65 72 3a 20 3f 31 0d 0a 54 65 3a 20 74 72 61 69 6c 65 72 73 0d 0a 43 6f 6e 6e 65 63 74 69 6f 6e 3a 20 63 6c 6f 73 65 0d 0a 0d 0a
Copy<br>
<br>ä¸€ä¸ªç®€å• (å¤§å˜˜ï¼Œå¯¹æˆ‘æ¥è¯´å¾ˆå¤æ‚äº†) çš„ HTTP è¯·æ±‚æŠ¥æ–‡ (æ¥è‡ª USTC Hackergame 2023)ï¼Œä½œä¸ºè¿è¾“å±‚çš„è½½è·è¢«æ³¨å…¥å¥—æ¥å­—

<br>ç”±æ™®é€šçš„ ASCII æ–‡æœ¬ä¹¦å†™
<br>è¯·æ±‚è¡Œ (ç¬¬ä¸€è¡Œ)

<br>æ–¹æ³•å­—æ®µ
<br>URL å­—æ®µ
<br>HTTP ç‰ˆæœ¬å­—æ®µ


<br>é¦–éƒ¨è¡Œ (åç»§è¡Œ)


<br>GET / HTTP/1.1
Host: cnhktrz3k5nc.hack-challenge.lug.ustc.edu.cn:13202 ğŸŒŸ Webä»£ç†é«˜é€Ÿç¼“å­˜è¦æ±‚
Cookie: session=eyJ0b2tlbiI6IjU2ODpNRVVDSVFEOUtzZWdBT2c5ZE9jdGkzUmJPSUVTSTdSTWQ5cDRQaW8vdWNxTXY3V0dhUUlnR0dIMHVROHhISWI4SzBNT2lidlFjVk0xaGoxZEdQZGNOYkpGbXJyZE45az0ifQ.ZUGxTw.PrwGL6P9rTzYpTfdu21r7irxBjQ
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/118.0 ğŸŒŸ ç”¨æˆ·ä»£ç†/å‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æµè§ˆå™¨ç±»å‹
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8
Accept-Language: en-US,en;q=0.5 ğŸŒŸ è¡¨ç¤ºç”¨æˆ·æƒ³è·å¾—ç½‘é¡µçš„è¯­è¨€ç‰ˆæœ¬
Accept-Encoding: gzip, deflate
Upgrade-Insecure-Requests: 1
Sec-Fetch-Dest: document
Sec-Fetch-Mode: navigate
Sec-Fetch-Site: none
Sec-Fetch-User: ?1
Te: trailers
Connection: close ğŸŒŸ ä¸éœ€è¦ä½¿ç”¨æŒç»­è¿æ¥ï¼Œå‘é€å®Œè¯·æ±‚çš„å¯¹è±¡åå°±å…³é—­è¿™æ¡è¿æ¥
Copy<br><br><img alt="Pasted image 20231101133831.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231101133831.png"><br>
<br>åœ¨é¦–éƒ¨è¡Œåæœ‰å®ä½“ä½“ï¼Œå½“ä½¿ç”¨ GET æ–¹æ³•æ—¶å®ä½“ä½“ä¸ºç©ºï¼Œä½¿ç”¨ POST æ–¹æ³•æ—¶æ‰ä½¿ç”¨å®ä½“ä½“
<br>
<br>ä¸€æ®µ POST æŠ¥æ–‡
<br>POST / HTTP/1.1
Host: 202.38.93.111:12345
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/118.0
Accept: */*
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
X-Requested-With: XMLHttpRequest ğŸŒŸ é€šå¸¸è¢«ç”¨äºè¯†åˆ«AJAX(Asynchronous JavaScript and XML)è¯·æ±‚
Content-Length: 48 ğŸŒŸ è¯´æ˜å‘é€ç»™æ¥æ”¶æ–¹çš„æ¶ˆæ¯ä¸»ä½“çš„å¤§å°ï¼Œå³ç”¨åè¿›åˆ¶æ•°å­—è¡¨ç¤ºçš„å…«ä½å…ƒç»„çš„æ•°ç›®
Origin: http://202.38.93.111:12345
Connection: close
Referer: http://202.38.93.111:12345/
Cookie: session=eyJ0b2tlbiI6IjU2ODpNRVVDSVFEOUtzZWdBT2c5ZE9jdGkzUmJPSUVTSTdSTWQ5cDRQaW8vdWNxTXY3V0dhUUlnR0dIMHVROHhISWI4SzBNT2lidlFjVk0xaGoxZEdQZGNOYkpGbXJyZE45az0ifQ.ZUHm-g.kVPjkYgY94gYkzV03PmLKCKWuhI

QW5zd2VyMT0yMDIzLTA4LTEwJkFuc3dlcjI9SUNSUg==.txt ğŸŒŸ å®ä½“ä½“
Copy<br>
<br>æœåŠ¡å™¨æ”¶åˆ° HEAD æ–¹æ³•ï¼Œç”¨ä¸€ä¸ª HTTP æŠ¥æ–‡è¿›è¡Œç›¸åº”ä½†ä¸è¿”å›è¯·æ±‚å¯¹è±¡
<br>HEAD / HTTP/2
Host: cnhktrz3k5nc.hack-challenge.lug.ustc.edu.cn:13202
Cookie: session=eyJ0b2tlbiI6IjU2ODpNRVVDSVFEOUtzZWdBT2c5ZE9jdGkzUmJPSUVTSTdSTWQ5cDRQaW8vdWNxTXY3V0dhUUlnR0dIMHVROHhISWI4SzBNT2lidlFjVk0xaGoxZEdQZGNOYkpGbXJyZE45az0ifQ.ZUGxTw.PrwGL6P9rTzYpTfdu21r7irxBjQ
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/118.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Upgrade-Insecure-Requests: 1
Sec-Fetch-Dest: document
Sec-Fetch-Mode: navigate
Sec-Fetch-Site: none
Sec-Fetch-User: ?1
Te: trailers


Copy<br>HTTP/2 200 OK
Server: nginx
Date: Wed, 01 Nov 2023 05:39:21 GMT
Content-Type: text/html; charset=utf-8
Vary: Accept-Encoding
Vary: Cookie
X-Xss-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Referrer-Policy: no-referrer-when-downgrade
Permissions-Policy: interest-cohort=()


Copy<br>
<br>PUT æ–¹æ³•ç”¨äºä¸Šä¼ å¯¹è±¡åˆ° Web æœåŠ¡å™¨ä¸Šçš„æŒ‡å®šè·¯å¾„
<br>PUT /echo/put/json HTTP/1.1
Host: reqbin.com
Content-Type: application/json
Content-Length: 80

{
  "Id": 12345,
  "Customer": "John Smith",
  "Quantity": 1,
  "Price": 10.00
}
Copy<br>
<br>DELETE æ–¹æ³•åˆ é™¤ Web æœåŠ¡å™¨ä¸Šçš„å¯¹è±¡
<br>DELETE /echo/delete/json HTTP/1.1
Host: reqbin.com
Accept: */*
Authorization: Bearer mt0dgHmLJMVQhvjpNXDyA83vA_PxH23Y
Copy<br><br>
<br>è¿™æ˜¯ä¸€æ®µ HTTP å“åº”æŠ¥æ–‡
<br>HTTP/1.1 200 OK ğŸŒŸ åè®®ç‰ˆæœ¬ çŠ¶æ€ç  çŠ¶æ€ä¿¡æ¯
Server: nginx
Content-Length: 90
Via: 1.1 google
Date: Tue, 31 Oct 2023 19:59:05 GMT ğŸŒŸ å“åº”ç”Ÿæˆçš„æ—¶é—´
Age: 36693
Content-Type: text/html ğŸŒŸ å®ä½“ä½“ä¸­çš„å¯¹è±¡ç±»å‹
Cache-Control: public,must-revalidate,max-age=0,s-maxage=3600
Connection: close ğŸŒŸ å‘é€å®ŒæŠ¥æ–‡åå°±å…³é—­TCPè¿æ¥

&lt;meta http-equiv="refresh" content="0;url=https://support.mozilla.org/kb/captive-portal"/&gt;
Copy<br>
<br>æŠ¥æ–‡æœ‰ä¸‰ä¸ªéƒ¨åˆ†

<br>çŠ¶æ€è¡Œ (status line)

<br>åè®®ç‰ˆæœ¬
<br>çŠ¶æ€ç 
<br>çŠ¶æ€ä¿¡æ¯


<br><a data-tooltip-position="top" aria-label="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers" rel="noopener" class="external-link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers" target="_blank">é¦–éƒ¨è¡Œ</a> (header line)
<br>å®ä½“ä½“ (entity body)


<br><a data-tooltip-position="top" aria-label="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status" rel="noopener" class="external-link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status" target="_blank">çŠ¶æ€ç å’ŒçŠ¶æ€ä¿¡æ¯</a>
<br><br>
<br><a data-tooltip-position="top" aria-label="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies" rel="noopener" class="external-link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies" target="_blank">MDN-Cookie</a>
<br>
<br>HTTP æœåŠ¡å™¨æ— çŠ¶æ€ï¼ŒWeb æœåŠ¡å™¨ä¸ºäº†è·Ÿè¸ªç”¨æˆ·ä½¿ç”¨ cookie æŠ€æœ¯
<br>Cookie æŠ€æœ¯çš„ç»„ä»¶

<br>å“åº”æŠ¥æ–‡ä¸­çš„ cookie é¦–éƒ¨è¡Œ
<br>è¯·æ±‚æŠ¥æ–‡ä¸­çš„ cookie é¦–éƒ¨è¡Œ
<br>ç”¨æˆ·ç«¯ç³»ç»Ÿæµè§ˆå™¨ç®¡ç†çš„ cookie æ–‡ä»¶ (macOS ä¿å­˜åœ¨ ~/Library/Application Support/Google/Chrome/Default/Cookies è·¯å¾„ä¸‹)
<br>ä½äº Web ç«™ç‚¹çš„åç«¯æ•°æ®åº“


<br>cookie åœ¨æ— çŠ¶æ€çš„ HTTP ä¹‹ä¸Šå»ºç«‹äº†ä¸€ä¸ªç”¨æˆ·ä¼šè¯å±‚
<br><br>
<br><a data-tooltip-position="top" aria-label="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Proxy_servers_and_tunneling" rel="noopener" class="external-link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Proxy_servers_and_tunneling" target="_blank">MDN-ä»£ç†æœåŠ¡å™¨å’Œéš§é“</a>
<br>
<br>Web ç¼“å­˜å™¨ (Web cache) / ä»£ç†æœåŠ¡å™¨ (proxy server)ï¼šèƒ½å¤Ÿä»£è¡¨åˆå§‹ Web æœåŠ¡å™¨æ¥æ»¡è¶³ HTTP è¯·æ±‚çš„ç½‘ç»œå®ä½“

<br>æ­£å‘ä»£ç†ï¼šä»£ç†æœåŠ¡å™¨é è¿‘å®¢æˆ·ç«¯å¹¶ä»£è¡¨å®¢æˆ·ç«¯å‘é€è¯·æ±‚
<br><a data-tooltip-position="top" aria-label="https://www.cloudflare.com/zh-cn/learning/cdn/glossary/reverse-proxy/" rel="noopener" class="external-link" href="https://www.cloudflare.com/zh-cn/learning/cdn/glossary/reverse-proxy/" target="_blank">åå‘ä»£ç†</a>ï¼šå½“å®¢æˆ·ç«¯å°†è¯·æ±‚å‘é€åˆ°ç½‘ç«™çš„æºæœåŠ¡å™¨æ—¶ï¼Œåå‘ä»£ç†æœåŠ¡å™¨ä¼šåœ¨<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/serverless/glossary/what-is-edge-computing/" rel="noopener" class="external-link" href="https://www.cloudflare.com/learning/serverless/glossary/what-is-edge-computing/" target="_blank">ç½‘ç»œè¾¹ç¼˜</a>æ‹¦æˆªè¿™äº›è¯·æ±‚ã€‚ç„¶åï¼Œåå‘ä»£ç†æœåŠ¡å™¨å°†å‘æºæœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶ä»æºæœåŠ¡å™¨æ¥æ”¶å“åº”ã€‚


<br>Web ç¼“å­˜å™¨çš„ä¼˜ç‚¹

<br>å‡å°‘å¯¹å®¢æˆ·è¯·æ±‚çš„å“åº”æ—¶é—´ï¼Œç‰¹åˆ«æ˜¯å½“å®¢æˆ·ä¸åˆå§‹æœåŠ¡å™¨ä¹‹é—´çš„ç“¶é¢ˆå¸¦å®½è¿œä½äºå®¢æˆ·ä¸ Web ç¼“å­˜å™¨ä¹‹é—´çš„ç“¶é¢ˆå¸¦å®½æ—¶
<br>å¤§å¤§å‡å°‘ä¸€ä¸ªæœºæ„çš„æ¥å…¥åˆ°å› ç‰¹ç½‘çš„é€šä¿¡é‡
<br>å¤§å¤§å‡ä½å› ç‰¹ç½‘ä¸Šçš„ Web æµé‡


<br><br><img alt="h500" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231101163234.png"> <img alt="h500" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231101163308.png"><br>
<br>æ¡ä»¶ï¼šå‡è®¾å¯¹è±¡çš„å¹³å‡é•¿åº¦ä¸º 1Mb ï¼Œæœºæ„å†…çš„æµè§ˆå™¨å¯¹åˆè¯•æœåŠ¡å™¨çš„å¹³å‡è®¿é—®é€Ÿç‡ä¸ºæ¯ç§’ 15 ä¸ªè¯·æ±‚ï¼Œå‡è®¾ HTTP è¯·æ±‚æŠ¥æ–‡å°åˆ°å¯ä»¥å¿½ç•¥ï¼Œä¸»è¦å…³æ³¨ HTTP å“åº”æŠ¥æ–‡
<br>ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼š

<br>å±€åŸŸç½‘ä¸Šçš„ <a data-tooltip-position="top" aria-label="å› ç‰¹ç½‘ > ^8065eb" data-href="å› ç‰¹ç½‘#^8065eb" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html#^8065eb" class="internal-link" target="_self" rel="noopener">æµé‡å¼ºåº¦</a>ï¼š(15 ä¸ªè¯·æ±‚ /s) x (1 Mb / è¯·æ±‚) / (100Mbps) = 0.15
<br>æ¥å…¥é“¾è·¯ä¸Šçš„æµé‡å¼ºåº¦ï¼š(15 ä¸ªè¯·æ±‚ /s) x (1 Mb / è¯·æ±‚) / (15 Mbps) = 1


<br>ä¼˜åŒ–æ–¹æ¡ˆï¼š

<br>å°†æ¥å…¥é“¾è·¯ä» 15Mbps å‡çº§ä¸º 100Mbps
<br>åœ¨æœºæ„ç½‘ç»œä¸­å®‰è£…ä¸€ä¸ª Web ç¼“å­˜å™¨


<br>åœ¨å®‰è£… Web ç¼“å­˜å™¨çš„æƒ…å†µä¸‹

<br>å‡è®¾è¯¥æœºæ„çš„ç¼“å­˜å‘½ä¸­ç‡ä¸º 0.4ï¼Œ40%çš„è¯·æ±‚å‘½ä¸­ç¼“å­˜å“åº”åœ¨ 10ms å†…ï¼Œå‰©ä¸‹ 60%éœ€è¦è¯·æ±‚åˆå§‹æœåŠ¡å™¨ï¼Œå¹³å‡æ—¶å»¶ä¸º 0.4 x ( 0.010 s ) + 0.6 x (2.01 s) = 1.21 s
<br>æ¥å…¥é“¾è·¯ä¸Šçš„æµé‡å¼ºåº¦ä¸‹é™ä¸ºï¼š(15 ä¸ªè¯·æ±‚ /s) x (1 Mb / è¯·æ±‚) x 0.6 / (15 Mbps) = 0.6


<br>é€šè¿‡ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ(Content Distribution Network, CDN)ï¼ŒWeb ç¼“å­˜å™¨åœ¨å› ç‰¹ç½‘ä¸Šå‘æŒ¥ç€è¶Šæ¥è¶Šé‡è¦çš„ä½œç”¨
<br><br>
<br><a data-tooltip-position="top" aria-label="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Conditional_requests" rel="noopener" class="external-link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Conditional_requests" target="_blank">MDN-HTTPæ¡ä»¶è¯·æ±‚</a>
<br>
<br>æ¡ä»¶ GET (conditional GET) æ–¹æ³•ï¼š

<br>è¯·æ±‚æŠ¥æ–‡ä½¿ç”¨ GET æ–¹æ³•
<br>è¯·æ±‚æŠ¥æ–‡ä¸­åŒ…å«ä¸€ä¸ª "If-Modified-Since: " é¦–éƒ¨è¡Œ (?)


<br>æ¡ä»¶è¯·æ±‚ï¼šè¯·æ±‚çš„æ‰§è¡Œç»“æœä¼šå› ç‰¹å®šé¦–éƒ¨çš„å€¼ä¸åŒè€Œä¸åŒ
<br>éªŒè¯å™¨ï¼š

<br>last-modifiedï¼šæ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´
<br>etagï¼šå¯ä»¥ç”¨äºæä¾›èµ„æºæˆ–å…¶è¡ç”Ÿå“çš„ MD5 æ•£åˆ—å€¼


<br>æ£€æŸ¥ç±»å‹ï¼šHTTP åè®®é»˜è®¤ä½¿ç”¨å¼ºéªŒè¯ç±»å‹

<br>å¼ºéªŒè¯ç±»å‹
<br>å¼±éªŒè¯ç±»å‹


<br>æ¡ä»¶é¦–éƒ¨ï¼š

<br>If-Match
<br>If-None-Match
<br>If-Modified-Sinceï¼šå¦‚æœè¿œç«¯èµ„æºçš„&nbsp;<a data-tooltip-position="top" aria-label="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Last-Modified" rel="noopener" class="external-link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Last-Modified" target="_blank"><code></code></a>Last-Modified&nbsp;é¦–éƒ¨æ ‡è¯†çš„æ—¥æœŸæ¯”åœ¨è¯¥é¦–éƒ¨ä¸­åˆ—å‡ºçš„å€¼è¦æ›´æ™šï¼Œè¡¨ç¤ºæ¡ä»¶åŒ¹é…æˆåŠŸã€‚
<br>If-Unmodified-Since
<br>If-Range


<br>ç¼“å­˜æ›´æ–°

<br>å½“ç¼“å­˜ä¸ºç©ºæˆ–è€…æ— ç¼“å­˜æ—¶ï¼Œè¢«è¯·æ±‚èµ„æºé€šè¿‡çŠ¶æ€ç ä¸º 200 OK çš„ HTTP å“åº”æŠ¥æ–‡è¿”å› <img alt="Pasted image 20231102100948.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231102100948.png">
<br>éªŒè¯å™¨é¦–éƒ¨è¡Œä¹Ÿéšç€èµ„æºåœ¨ HTTP å“åº”ä¸­è¿”å›ï¼Œå’Œèµ„æºä¸€èµ·è¢«ç¼“å­˜èµ·æ¥
<br>Cache-Control é¦–éƒ¨æ§åˆ¶ç¼“å­˜æ˜¯å¦å¤±æ•ˆï¼Œä¸€æ—¦å¤±æ•ˆå®¢æˆ·ç«¯å°±å‘èµ·æ¡ä»¶è¯·æ±‚å¦åˆ™ä½¿ç”¨ç¼“å­˜å€¼ï¼ŒéªŒè¯å™¨çš„å€¼ä¼šç”¨ä½œæ¡ä»¶è¯·æ±‚ä¸­&nbsp;<a data-tooltip-position="top" aria-label="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/If-Modified-Since" rel="noopener" class="external-link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/If-Modified-Since" target="_blank"><code></code></a>If-Modified-Since&nbsp;å’Œ&nbsp;<a data-tooltip-position="top" aria-label="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/If-Match" rel="noopener" class="external-link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/If-Match" target="_blank"><code></code></a>If-Match&nbsp;é¦–éƒ¨å­—æ®µçš„å‚æ•°
<br>å¦‚æœèµ„æºæœªå‘ç”Ÿå˜åŒ–ï¼ŒæœåŠ¡å™¨è¿”å›çŠ¶æ€ç ä¸º&nbsp;<a data-tooltip-position="top" aria-label="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/304" rel="noopener" class="external-link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/304" target="_blank"><code></code></a>304&nbsp;Not Modified&nbsp;çš„å“åº”<img alt="Pasted image 20231102103202.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231102103202.png">
<br>å¦‚æœèµ„æºå‘ç”Ÿå˜åŒ–ï¼ŒæœåŠ¡å™¨è¿”å› <a data-tooltip-position="top" aria-label="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/200" rel="noopener" class="external-link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/200" target="_blank"><code></code></a>200&nbsp;OK&nbsp;å“åº”ç ï¼Œè¿åŒæ–°ç‰ˆæœ¬çš„èµ„æºï¼Œå†æ¬¡å›åˆ°æ­¥éª¤ 2 <img alt="Pasted image 20231102103136.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231102103136.png">


<br><br><img alt="Pasted image 20231103092045.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231103092045.png"><br>
<br><a data-tooltip-position="top" aria-label="" rel="noopener" class="external-link" href="." target="_blank">Cloudflare-ä»€ä¹ˆæ˜¯SMTP</a>
<br>
<br>ç»„æˆéƒ¨åˆ†ï¼š

<br>ç”¨æˆ·ä»£ç† (user agent)ï¼šOutlook, Apple Mail
<br>é‚®ä»¶æœåŠ¡å™¨ (mail server)
<br><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol" target="_blank">ç®€å•é‚®ä»¶ä¼ è¾“åè®®</a> (Simple Mail Transfer Protocol, SMTP)
<br>é‚®ä»¶è®¿é—®åè®® (mail access protocol)


<br>ä¸€ä¸ªå…¸å‹çš„é‚®ä»¶å‘é€è¿‡ç¨‹æ˜¯ï¼šä»å‘é€æ–¹çš„ç”¨æˆ·ä»£ç†å¼€å§‹ï¼Œä¼ è¾“åˆ°å‘é€æ–¹çš„é‚®ä»¶æœåŠ¡å™¨ï¼Œå†ä¼ è¾“åˆ°æ¥æ”¶æ–¹çš„é‚®ä»¶æœåŠ¡å™¨ï¼Œç„¶ååœ¨è¿™é‡Œè¢«åˆ†å‘åˆ°æ¥æ”¶æ–¹çš„é‚®ç®±ä¸­
<br>å¦‚æœé‚®ä»¶æœåŠ¡å™¨å®¢æˆ·ç«¯ä¸èƒ½æŠŠé‚®ä»¶äº¤ä»˜ç»™æ¥æ”¶æ–¹ï¼Œåˆ™ä¼šåœ¨æŠ¥æ–‡é˜Ÿåˆ—(message queue)ä¸­ä¿æŒè¯¥æŠ¥æ–‡å¹¶åœ¨ä»¥åå°è¯•å‘é€ï¼Œå¦‚æœä¸€æ®µæ—¶é—´åä»ä¸æˆåŠŸï¼Œåˆ™å®¢æˆ·ç«¯åˆ é™¤æŠ¥æ–‡å¹¶ä»¥ç”µå­é‚®ä»¶å½¢å¼é€šçŸ¥å‘é€æ–¹
<br><br>
<br>ä¸å¦¨è¯•ç€è¿è¡Œä¸€ä¸ªç®€å•çš„ SMTP æœåŠ¡å™¨å¹¶ä¸”ç”¨ telnet äº¤äº’
<br>import smtpd
import asyncore

class CustomSMTPServer(smtpd.SMTPServer):
    def process_message(self, peer, mailfrom, rcpttos, data):
        print('Received message from:', peer)
        print('Message addressed from:', mailfrom)
        print('Message addressed to  :', rcpttos)
        print('Message length        :', len(data))
        print('Data:')
        print(data)

server = CustomSMTPServer(('0.0.0.0', 25), None)

try:
    asyncore.loop()
except KeyboardInterrupt:
    server.close()
Copy<br>&gt; telnet localhost 25
Copy<br>
<br>è¿™æ˜¯ä¸€æ®µ SMTP å®¢æˆ·ç«¯å’Œ SMTP æœåŠ¡ç«¯äº¤äº’æ¡ˆä¾‹
<br>S: 220 smtp.example.com ESMTP Postfix
C: HELO relay.example.org
S: 250 Hello relay.example.org, I am glad to meet you
C: MAIL FROM:&lt;bob@example.org&gt;
S: 250 Ok
C: RCPT TO:&lt;alice@example.com&gt;
S: 250 Ok
C: RCPT TO:&lt;theboss@example.com&gt;
S: 250 Ok
C: DATA
S: 354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;
C: `From: "Bob Example" &lt;bob@example.org&gt;`
C: `To: "Alice Example" &lt;alice@example.com&gt;`
C: `Cc: theboss@example.com`
C: `Date: Tue, 15 Jan 2008 16:02:43 -0500`
C: `Subject: Test message`
C:
C: Hello Alice.
C: This is a test message with 5 header fields and 4 lines in the message body.
C: Your friend,
C: Bob
C: .
S: 250 Ok: queued as 12345
C: QUIT
S: 221 Bye
{The server closes the connection}
Copy<br>
<br>HELO/EHLOï¼šè¿™äº›å‘½ä»¤å‘å‡º â€œHelloâ€ å¹¶åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å¯åŠ¨ SMTP è¿æ¥ã€‚â€œHELOâ€ æ˜¯è¯¥å‘½ä»¤çš„åŸºæœ¬ç‰ˆæœ¬ï¼›â€œEHLOâ€ ç”¨äºä¸€ç§ç‰¹åˆ«ç±»å‹çš„ SMTPã€‚
<br>MAIL FROMï¼šè¿™ä¸ªå‘½ä»¤å‘Šè¯‰æœåŠ¡å™¨è°åœ¨å‘é€è¯¥ç”µå­é‚®ä»¶ã€‚å¦‚æœ Alice è¯•å›¾ç»™å¥¹çš„æœ‹å‹ Bob å‘ç”µå­é‚®ä»¶ï¼Œå®¢æˆ·ç«¯å¯èƒ½ä¼šå‘é€ â€œMAIL FROMï¼š<a data-tooltip-position="top" aria-label="mailto:alice@example.com" rel="noopener" class="external-link" href="mailto:alice@example.com" target="_blank">alice@example.com</a>â€ã€‚
<br>RCPT TOï¼šè¿™ä¸ªå‘½ä»¤ç”¨äºåˆ—å‡ºç”µå­é‚®ä»¶çš„æ”¶ä»¶äººã€‚å¦‚æœæœ‰**å¤šä¸ªæ”¶ä»¶äººï¼Œå®¢æˆ·ç«¯å¯å¤šæ¬¡å‘é€è¯¥å‘½ä»¤ã€‚å¦‚ä¸Šä¾‹å­ä¸­ï¼ŒAlice çš„ç”µå­é‚®ä»¶å®¢æˆ·ç«¯å°†å‘é€ï¼š â€œRCPT TO: <a data-tooltip-position="top" aria-label="mailto:bob@example.com" rel="noopener" class="external-link" href="mailto:bob@example.com" target="_blank">bob@example.com</a>"ã€‚
<br>DATAï¼šè¿™ä¸ªå‘½ä»¤æ”¾åœ¨ç”µå­é‚®ä»¶çš„å†…å®¹å‰ï¼ŒDATA ä¸­çš„å†…å®¹ (é‚®ä»¶æŠ¥æ–‡æ ¼å¼)ç”± <a data-tooltip-position="top" aria-label="https://datatracker.ietf.org/doc/html/rfc5322" rel="noopener" class="external-link" href="https://datatracker.ietf.org/doc/html/rfc5322" target="_blank">RFC 5322 - Internet Message Format</a> è§„å®šï¼Œå¹¶ä»¥ &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt; ç»“å°¾
<br>RSETï¼šè¯¥å‘½ä»¤é‡ç½®è¿æ¥ï¼Œåˆ é™¤æ‰€æœ‰ä»¥å‰ä¼ è¾“çš„ä¿¡æ¯ï¼Œä½†ä¸å…³é—­ SMTP è¿æ¥ã€‚RSET&nbsp;åœ¨å®¢æˆ·ç«¯å‘é€äº†é”™è¯¯ä¿¡æ¯çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚
<br>QUITï¼šç»“æŸè¿æ¥ã€‚
<br>HTTP ä¸»è¦æ˜¯ä¸€ä¸ªæ‹‰åè®® (pull protocol)ï¼ŒSMTP ä¸»è¦æ˜¯ä¸€ä¸ªæ¨åè®® (push protocol)ï¼Œå¯ä»¥æƒ³è±¡ä¸€ä¸‹æœ¨æ¿å’Œç»³å­çš„ä¸åŒä¹‹å¤„ã€‚ä¸€å—æœ¨æ¿å¯å°†æŸç‰©å‘å‰æ¨ï¼Œä½†ä¸èƒ½å°†å®ƒæ‹‰å›æ¥ã€‚ç»³å­å¯ä»¥æ‹‰åŠ¨æŸç‰©ï¼Œä½†ä¸èƒ½æ¨åŠ¨å®ƒã€‚SMTP å°†ç”µå­é‚®ä»¶â€œæ¨â€åˆ°é‚®ä»¶æœåŠ¡å™¨ï¼Œè€Œ HTTP å°† Web å¯¹è±¡â€œæ‹‰â€åˆ°ç”¨æˆ·çš„åº”ç”¨ç¨‹åºä¸­<br><br>
<br>æµè¡Œçš„é‚®ä»¶è®¿é—®åè®®åŒ…æ‹¬ç¬¬ä¸‰ç‰ˆçš„é‚®å±€åè®® ( Post Office Protocolâ€”Version 3, POP3 ) ã€å› ç‰¹ç½‘é‚®ä»¶è®¿é—®åè®® ( Internet Mail Access Protocol, IMAP) ä»¥åŠ HTTP
<br>IMAP å’Œ POP3 çš„åŒºåˆ«ï¼š
<br><br><br>
<br>å·¥ä½œé˜¶æ®µ

<br>ç‰¹è®¸ (authorization)
<br>äº‹åŠ¡å¤„ç†
<br>æ›´æ–°


<br>ä¸‹é¢æ˜¯ä¸€æ®µ POP3 äº¤äº’æ¡ˆä¾‹
<br>S: &lt;wait for connection on TCP port 110&gt;
C: &lt;open connection&gt;
S:    +OK POP3 server ready &lt;1896.697170952@dbc.mtview.ca.us&gt;
C:    APOP mrose c4c9334bac560ecc979e58001b3e22fb
S:    +OK mrose's maildrop has 2 messages (320 octets)
C:    STAT
S:    +OK 2 320
C:    LIST
S:    +OK 2 messages (320 octets)
S:    1 120
S:    2 200
S:    .
C:    RETR 1
S:    +OK 120 octets
S:    &lt;the POP3 server sends message 1&gt;
S:    .
C:    DELE 1
S:    +OK message 1 deleted
C:    RETR 2
S:    +OK 200 octets
S:    &lt;the POP3 server sends message 2&gt;
S:    .
C:    DELE 2
S:    +OK message 2 deleted
C:    QUIT
S:    +OK dewey POP3 server signing off (maildrop empty)
C: &lt;close connection&gt;
S: &lt;wait for next connection&gt;
Copy<br>
<br>APOP ï¼šAPOP å‘½ä»¤ä½¿ç”¨äº†ä¸€ä¸ªåŠ å¯†çš„å“ˆå¸Œå€¼ï¼ˆMD 5 æ•£åˆ—å€¼ï¼‰æ¥éªŒè¯ç”¨æˆ·çš„èº«ä»½ã€‚å½“å®¢æˆ·ç«¯è¿æ¥åˆ°é‚®ä»¶æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå‘é€ä¸€ä¸ªå¸¦æœ‰æ—¶é—´æˆ³çš„éšæœºå­—ç¬¦ä¸²ã€‚ç„¶åå®¢æˆ·ç«¯å°†è¯¥å­—ç¬¦ä¸²å’Œç”¨æˆ·çš„å¯†ç è¿›è¡Œç»„åˆï¼Œå¹¶ä½¿ç”¨ MD5 ç®—æ³•è¿›è¡Œå“ˆå¸Œè¿ç®—ã€‚æœ€åï¼Œå®¢æˆ·ç«¯å‘é€ç”¨æˆ·åå’Œè®¡ç®—å¾—åˆ°çš„å“ˆå¸Œå€¼ç»™æœåŠ¡å™¨ï¼Œä»¥å®Œæˆèº«ä»½éªŒè¯ã€‚
<br>STATï¼šè·å–æ”¶ä»¶ç®±ä¸­é‚®ä»¶çš„ç»Ÿè®¡ä¿¡æ¯
<br>LISTï¼šè¯·æ±‚é‚®ä»¶æœåŠ¡å™¨åˆ—å‡ºæ‰€æœ‰å­˜å‚¨çš„é‚®ä»¶åŠå…¶é•¿åº¦
<br>RETRï¼šå‘é€å¯¹åº”çš„é‚®ä»¶
<br>DELEï¼šç»™é‚®ä»¶åšåˆ é™¤æ ‡è®°
<br>QUITï¼šç»“æŸè¯¥ POP3 ä¼šè¯å¹¶åˆ é™¤æ ‡è®°ä¸ºåˆ é™¤çš„é‚®ä»¶
<br>
<br>POP3 åœ¨æœåŠ¡å™¨ç«¯ä¿ç•™çŠ¶æ€ä¿¡æ¯ï¼Œä½†ä¸åœ¨ä¼šè¯è¿‡ç¨‹ä¸­æºå¸¦çŠ¶æ€ä¿¡æ¯ï¼Œç®€åŒ–äº† POP3 æœåŠ¡çš„å®ç°
<br><br>
<br><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Internet_Message_Access_Protocol" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Internet_Message_Access_Protocol" target="_blank">Wikipedia - IMAP</a>
<br>
<br>IMAP åè®®ä¸ºç”¨æˆ·æä¾›äº†åˆ›å»ºæ–‡ä»¶å¤¹ä»¥åŠå°†é‚®ä»¶ä»ä¸€ä¸ªæ–‡ä»¶å¤¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹çš„å‘½ä»¤
<br>IMAP è¿˜ä¸ºç”¨æˆ·æä¾›äº†åœ¨è¿œç¨‹æ–‡ä»¶å¤¹ä¸­æŸ¥è¯¢é‚®ä»¶çš„å‘½ä»¤ï¼ŒæŒ‰æŒ‡å®šæ¡ä»¶å»æŸ¥è¯¢åŒ¹é…çš„é‚®ä»¶
<br>IMAP å…·æœ‰å…è®¸ç”¨æˆ·ä»£ç†è·å–æŠ¥æ–‡æŸäº›éƒ¨åˆ†çš„å‘½ä»¤
<br>IMAP æœåŠ¡å™¨ç»´æŠ¤äº† IMAP ä¼šè¯çš„ç”¨æˆ·çŠ¶æ€ä¿¡æ¯
<br>C: &lt;open connection&gt;
S:   * OK IMAP4rev1 Service Ready
C:   a001 login mrc secret
S:   a001 OK LOGIN completed
C:   a002 select inbox
S:   * 18 EXISTS
S:   * FLAGS (\Answered \Flagged \Deleted \Seen \Draft)
S:   * 2 RECENT
S:   * OK [UNSEEN 17] Message 17 is the first unseen message
S:   * OK [UIDVALIDITY 3857529045] UIDs valid
S:   a002 OK [READ-WRITE] SELECT completed
C:   a003 fetch 12 full
S:   * 12 FETCH (FLAGS (\Seen) INTERNALDATE "17-Jul-1996 02:44:25 -0700"
      RFC822.SIZE 4286 ENVELOPE ("Wed, 17 Jul 1996 02:23:25 -0700 (PDT)"
      "IMAP4rev1 WG mtg summary and minutes"
      (("Terry Gray" NIL "gray" "cac.washington.edu"))
      (("Terry Gray" NIL "gray" "cac.washington.edu"))
      (("Terry Gray" NIL "gray" "cac.washington.edu"))
      ((NIL NIL "imap" "cac.washington.edu"))
      ((NIL NIL "minutes" "CNRI.Reston.VA.US")
      ("John Klensin" NIL "KLENSIN" "MIT.EDU")) NIL NIL
      "&lt;B27397-0100000@cac.washington.edu&gt;")
      BODY ("TEXT" "PLAIN" ("CHARSET" "US-ASCII") NIL NIL "7BIT" 3028
      92))
S:   a003 OK FETCH completed
C:   a004 fetch 12 body[header]
S:   * 12 FETCH (BODY[HEADER] {342}
S:   `Date: Wed, 17 Jul 1996 02:23:25 -0700 (PDT)`
S:   `From: Terry Gray &lt;gray@cac.washington.edu&gt;`
S:   `Subject: IMAP4rev1 WG mtg summary and minutes`
S:   `To: imap@cac.washington.edu`
S:   `Cc: minutes@CNRI.Reston.VA.US, John Klensin &lt;KLENSIN@MIT.EDU&gt;`
S:   `Message-Id: &lt;B27397-0100000@cac.washington.edu&gt;`
S:   `MIME-Version: 1.0`
S:   `Content-Type: TEXT/PLAIN; CHARSET=US-ASCII`
S:
S:   )
S:   a004 OK FETCH completed
C    a005 store 12 +flags \deleted
S:   * 12 FETCH (FLAGS (\Seen \Deleted))
S:   a005 OK +FLAGS completed
C:   a006 logout
S:   * BYE IMAP4rev1 server terminating connection
S:   a006 OK LOGOUT completed
Copy<br>
<br>From ChatGPT 3.5ï¼šåœ¨ POP3ä¼šè¯ä¸­ï¼ŒçŠ¶æ€ä¿¡æ¯é€šå¸¸åŒ…æ‹¬é‚®ä»¶çš„çŠ¶æ€ï¼Œæ¯”å¦‚å·²è¯»æˆ–æœªè¯»ã€å·²åˆ é™¤æˆ–æœªåˆ é™¤ã€‚è¿™äº›ä¿¡æ¯ä¿å­˜åœ¨é‚®ä»¶æœåŠ¡å™¨ä¸Šï¼Œåœ¨ä¼šè¯æœŸé—´ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤å’Œå“åº”æ¥æŸ¥è¯¢å’Œä¿®æ”¹è¿™äº›çŠ¶æ€ã€‚åœ¨ IMAP ä¼šè¯ä¸­ï¼ŒçŠ¶æ€ä¿¡æ¯æ›´åŠ çµæ´»å’Œä¸°å¯Œã€‚å®ƒåŒ…æ‹¬é‚®ä»¶å¤¹ï¼ˆä¹Ÿç§°ä¸ºé‚®ç®±æˆ–æ–‡ä»¶å¤¹ï¼‰çš„çŠ¶æ€ï¼Œæ¯”å¦‚é‚®ä»¶æ•°ã€æœªè¯»é‚®ä»¶æ•°ç­‰ï¼Œè¿˜åŒ…æ‹¬æ¯å°é‚®ä»¶çš„çŠ¶æ€ï¼Œæ¯”å¦‚å·²è¯»æˆ–æœªè¯»ã€å·²åˆ é™¤æˆ–æœªåˆ é™¤ã€‚IMAP è¿˜å…è®¸å®¢æˆ·ç«¯ä¿å­˜è‡ªå·±çš„ä¼šè¯çŠ¶æ€ï¼Œæ¯”å¦‚å½“å‰é€‰å®šçš„æ–‡ä»¶å¤¹ã€æœç´¢æ¡ä»¶ç­‰ï¼Œä»¥ä¾¿åœ¨æ–­å¼€è¿æ¥åèƒ½å¤Ÿæ¢å¤ä¼šè¯ã€‚
<br>ç°ä»£ç”¨æˆ·ä»£ç†åº”ç”¨ç¨‹åºä¸­æ˜¾ç¤ºçš„ç”¨æˆ·æ–‡ä»¶å¤¹ç»“æ„ (å›¾ç‰‡æ¥è‡ª Apple Mail)<br>
<img alt="h300" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231103114204.png"> <img alt="h300" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231103113920.png"> 
<br><br>
<br><a data-tooltip-position="top" aria-label="https://www.cloudflare.com/zh-cn/learning/dns/what-is-dns/" rel="noopener" class="external-link" href="https://www.cloudflare.com/zh-cn/learning/dns/what-is-dns/" target="_blank">Cloudflare - ä»€ä¹ˆæ˜¯DNS</a>
<br><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/w/index.php?title=Domain_Name_System&amp;oldid=1182387275" rel="noopener" class="external-link" href="https://en.wikipedia.org/w/index.php?title=Domain_Name_System&amp;oldid=1182387275" target="_blank">Wikipedia - Domain Name System</a>
<br><a data-tooltip-position="top" aria-label="" rel="noopener" class="external-link" href="." target="_blank">Cloudflare - ä»€ä¹ˆæ˜¯DNSè®°å½•</a>
<br>
<br>æ ‡è¯†ä¸»æœºçš„ä¸¤ç§æ–¹å¼ï¼šä¸»æœºå (hostname), IP åœ°å€
<br>åŸŸåç³»ç»Ÿ (Domain Name System, DNS)çš„ä¸»è¦ä»»åŠ¡ï¼šè¿›è¡Œ ä¸»æœºååˆ° IP åœ°å€è½¬æ¢ çš„ç›®å½•æœåŠ¡
<br>DNS<img alt="Pasted image 20231103150341.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231103150341.png">

<br>ä¸€ä¸ªç”±åˆ†å±‚çš„ DNS æœåŠ¡å™¨ (DNS server) å®ç°çš„åˆ†å¸ƒå¼æ•°æ®åº“
<br>ä¸€ä¸ªèƒ½å¤Ÿä½¿å¾—ä¸»æœºèƒ½å¤ŸæŸ¥è¯¢åˆ†å¸ƒå¼æ•°æ®åº“çš„åº”ç”¨å±‚åè®®
<br>è¿è¡Œåœ¨ UDP ä¸Šï¼Œä½¿ç”¨ 53 å·ç«¯å£


<br>DNS é€šå¸¸æ˜¯ç”±å…¶ä»–åº”ç”¨å±‚åè®®æ‰€ä½¿ç”¨çš„ï¼ŒåŒ…æ‹¬ HTTPã€SMTP å’Œ FTP å°†ç”¨æˆ·æä¾›çš„ä¸»æœºåè§£æä¸º IP åœ°å€
<br>DNS è¿˜æä¾›ä¸€äº›é‡è¦çš„æœåŠ¡

<br>ä¸»æœºåˆ«å (host aliasing)
<br>é‚®ä»¶æœåŠ¡å™¨åˆ«å (mail server aliasing)
<br>è´Ÿè½½åˆ†é… (load distribution) â¬‡ï¸
<br><img alt="Pasted image 20231103154100.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231103154100.png" style="width: 300px; max-width: 100%;">


<br>åœ¨&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/dns-records/" rel="noopener" class="external-link" href="https://www.cloudflare.com/learning/dns/dns-records/" target="_blank">DNS è®°å½•</a>çš„ç¯å¢ƒä¸­ï¼ŒTTL (å•ä½ second) æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œå®ƒç¡®å®š DNS ç¼“å­˜æœåŠ¡å™¨åœ¨è¿æ¥åˆ°æƒå¨æ€§ DNS æœåŠ¡å™¨å¹¶è·å–è®°å½•çš„æ–°å‰¯æœ¬ä¹‹å‰å¯ä»¥ä¸º DNS è®°å½•æä¾›æœåŠ¡çš„æ—¶é—´
<br><br><img alt="Pasted image 20231106084448.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231106084448.png"><br>
<br>å‰ 12 å­—èŠ‚ï¼šé¦–éƒ¨åŒºåŸŸ

<br>æ ‡è¯†ç¬¦ï¼šç”¨äºæ ‡è¯†æŸ¥è¯¢ï¼Œä¼šè¢«å¤åˆ¶åˆ°å¯¹æŸ¥è¯¢çš„å›ç­”æŠ¥æ–‡ä¸­ (16 bit)
<br>æ ‡å¿—å­—æ®µï¼š(16 bit)
<br>æœ‰å…³æ•°é‡çš„å­—æ®µï¼šé—®é¢˜æ•°ï¼Œå›ç­” RR æ•°ï¼Œæƒå¨ RR æ•°ï¼Œé™„åŠ  RR æ•°ï¼ˆå¯¹åº”ä¸‹æ–¹çš„é—®é¢˜åŒºåŸŸå’Œå›ç­”åŒºåŸŸï¼Œå„ 16 bitï¼‰


<br>é—®é¢˜åŒºåŸŸï¼š

<br>åå­—å­—æ®µï¼šåŒ…å«æ­£åœ¨è¢«æŸ¥è¯¢çš„ä¸»æœºåå­—
<br>ç±»å‹å­—æ®µï¼šæŒ‡å‡ºæœ‰å…³è¯¥åå­—æ­£åœ¨è¢«è¯¢é—®çš„é—®é¢˜ç±»å‹
<br>Class å­—æ®µï¼šä¸»è¦ç”¨æ¥æŒ‡å®šç½‘ç»œç±»åˆ«


<br>å›ç­”åŒºåŸŸï¼šåŒ…å«äº†å¯¹æœ€åˆè¯·æ±‚çš„åå­—çš„èµ„æºè®°å½•
<br>
æ ‡å¿—å­—æ®µæ ¼å¼

<br>
é—®é¢˜ RR æ ¼å¼

<br>
å›ç­” RR æ ¼å¼

<br><br>
<br>æ³¨å†Œç™»è®°æœºæ„ (registrar) æ˜¯ä¸€ä¸ªå•†ä¸šå®ä½“ï¼Œå®ƒéªŒè¯è¯¥åŸŸåçš„å”¯ä¸€æ€§ï¼Œå°†è¯¥åŸŸåè¾“å…¥ DNS æ•°æ®åº“ï¼ˆå¦‚ä¸‹é¢æ‰€è®¨è®ºçš„é‚£æ ·ï¼‰ï¼Œå¯¹æä¾›çš„æœåŠ¡æ”¶å–å°‘é‡è´¹ç”¨ã€‚
<br>å› ç‰¹ç½‘åå­—å’Œåœ°å€åˆ†é…æœºæ„ (Internet Corporation for Assigned Names and Numbers, ICANN) å‘å„ç§æ³¨å†Œç™»è®°æœºæ„æˆæƒ
<br>å½“æ³¨å†Œä¸€ä¸ªåŸŸåæ—¶å¹¶æä¾› Web å’Œ Mail æœåŠ¡æ—¶

<br>å‘åŸŸåç™»è®°æ³¨å†Œæœºæ„æä¾›åŸºæœ¬å’Œè¾…åŠ©æƒå¨æœåŠ¡å™¨çš„åå­—å’Œ IP åœ°å€
<br>å‘æƒå¨ DNS æœåŠ¡å™¨ä¸­æ’å…¥ Web æœåŠ¡å™¨ <a data-tooltip-position="top" aria-label="http://www.example.com" rel="noopener" class="external-link" href="http://www.example.com" target="_blank">www.example.com</a> çš„ç±»å‹ A èµ„æºè®°å½•å’Œç”¨äºé‚®ä»¶æœåŠ¡å™¨ mail.example.com çš„ MX èµ„æºè®°å½•


<br><br>
<br>åœ¨æœ¬èŠ‚ä¸­æˆ‘ä»¬å°†ç ”ç©¶ä¸€ä¸ªéå¸¸è‡ªç„¶çš„ P2P åº”ç”¨ï¼Œå³ä»å•ä¸€æœåŠ¡å™¨å‘å¤§é‡ä¸»æœº (ç§°ä¸ºå¯¹ç­‰æ–¹) åˆ†å‘ä¸€ä¸ªå¤§æ–‡ä»¶
<br>åœ¨ P2P æ–‡ä»¶åˆ†å‘ä¸­ï¼Œæ¯ä¸ªå¯¹ç­‰æ–¹èƒ½å¤Ÿå‘ä»»ä½•å…¶ä»–å¯¹ç­‰æ–¹é‡æ–°åˆ†å‘å®ƒå·²ç»æ”¶åˆ°çš„è¯¥æ–‡ä»¶çš„ä»»ä½•éƒ¨åˆ†ï¼Œä»è€Œåœ¨åˆ†å‘è¿‡ç¨‹ä¸­ååŠ©è¯¥æœåŠ¡å™¨
<br><br>
<br>è€ƒè™‘ä¸€ä¸ªç”¨äºä¸¤ç§ä½“ç³»ç»“æ„ç±»å‹çš„ç®€å•å®šé‡æ¨¡å‹ï¼Œå°†ä¸€ä¸ªæ–‡ä»¶åˆ†å‘ç»™ä¸€ä¸ªå›ºå®šå¯¹ç­‰æ–¹é›†åˆ <img alt="Pasted image 20231106155558.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231106155558.png" style="width: 500px; max-width: 100%;">
<br> æœåŠ¡å™¨çš„ä¸Šè½½é€Ÿç‡ï¼Œ ç¬¬ i å¯¹ç­‰æ–¹æ¥å…¥é“¾è·¯çš„ä¸Šè½½é€Ÿç‡ï¼Œ ç¬¬ i å¯¹ç­‰æ–¹æ¥å…¥é“¾è·¯çš„ä¸‹è½½é€Ÿç‡
<br> è¢«åˆ†å‘çš„æ–‡ä»¶é•¿åº¦ï¼Œ è¦è·å¾—çš„è¯¥æ–‡ä»¶å‰¯æœ¬çš„å¯¹ç­‰æ–¹çš„æ•°é‡
<br>åˆ†å‘æ—¶é—´ (distribution time)ï¼šæ‰€æœ‰ N ä¸ªå¯¹ç­‰æ–¹å¾—åˆ°è¯¥æ–‡ä»¶å‰¯æœ¬æ‰€éœ€è¦çš„æ—¶é—´
<br>å‡è®¾äº’è”ç½‘æ ¸å¿ƒå…·æœ‰è¶³å¤Ÿçš„å¸¦å®½ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ²¡æœ‰å‚åŠ ä»»ä½•å…¶ä»–ç½‘ç»œåº”ç”¨ï¼Œæ‰€æœ‰ä¸Šä¼ å’Œä¸‹è½½è®¿é—®è´·æ¬¾èƒ½è¢«å…¨éƒ¨ç”¨äºåˆ†å‘è¯¥æ–‡ä»¶
<br><br>
<br>æœåŠ¡å™¨å¿…é¡»å‘  ä¸ªå¯¹ç­‰æ–¹çš„æ¯ä¸ªä¼ è¾“è¯¥æ–‡ä»¶çš„ä¸€ä¸ªå‰¯æœ¬ã€‚å› æ­¤è¯¥æœåŠ¡å™¨å¿…é¡»ä¼ è¾“  æ¯”ç‰¹ã€‚å› ä¸ºè¯¥æœåŠ¡å™¨çš„ä¸Šè½½é€Ÿç‡æ˜¯ , , åˆ†å‘è¯¥æ–‡ä»¶çš„æ—¶é—´å¿…å®šæ˜¯è‡³å°‘ä¸º 
<br>ä»¤  è¡¨ç¤ºå…·æœ‰æœ€å°ä¸‹è½½é€Ÿç‡çš„å¯¹ç­‰æ–¹çš„ä¸‹è½½é€Ÿç‡ï¼Œå³ ã€‚å…·æœ‰æœ€å°ä¸‹è½½é€Ÿç‡çš„å¯¹ç­‰æ–¹ä¸å¯èƒ½åœ¨å°‘äº  ç§’æ—¶é—´å†…è·å¾—è¯¥æ–‡ä»¶çš„æ‰€æœ‰ F æ¯”ç‰¹ã€‚å› æ­¤æœ€å°åˆ†å‘æ—¶é—´è‡³å°‘ä¸º 
<br>è§‚å¯Ÿå¾—åˆ° 
<br>å¯¹äºè¶³å¤Ÿå¤§çš„ Nï¼Œå®¢æˆ·-æœåŠ¡å™¨åˆ†å‘æ—¶é—´ç”±  ç¡®å®šï¼Œæ‰€ä»¥åˆ†å‘æ—¶é—´éšç€å¯¹ç­‰æ–¹  çš„æ•°é‡çº¿æ€§å¢åŠ 
<br><br>
<br>è¯¥æœåŠ¡å™¨å¿…é¡»ç»è¿‡å…¶æ¥å…¥é“¾è·¯è‡³å°‘å‘é€è¯¥æ–‡ä»¶çš„æ¯ä¸ªæ¯”ç‰¹ä¸€æ¬¡ï¼Œæœ€å°åˆ†å‘æ—¶é—´è‡³å°‘æ˜¯ 
<br>å…·æœ‰æœ€ä½ä¸‹è½½é€Ÿç‡çš„å¯¹ç­‰æ–¹ä¸èƒ½ä»¥å°äº  ç§’çš„åˆ†å‘æ—¶é—´è·å¾—æ‰€æœ‰  æ¯”ç‰¹
<br>ç³»ç»Ÿæ•´ä½“çš„æ€»ä¸Šè½½èƒ½åŠ›ç­‰äºæœåŠ¡å™¨çš„ä¸Šè½½é€Ÿç‡åŠ ä¸Šæ¯ä¸ªå•ç‹¬çš„å¯¹ç­‰æ–¹çš„ä¸Šè½½é€Ÿç‡ï¼Œ ï¼Œç³»ç»Ÿå¿…é¡»å‘è¿™  ä¸ªå¯¹ç­‰æ–¹çš„æ¯ä¸ªäº¤ä»˜  æ¯”ç‰¹ï¼Œæ€»å…±äº¤ä»˜  æ¯”ç‰¹ï¼Œä¸”ä¸èƒ½ä»¥å¿«äº  çš„é€Ÿç‡å®Œæˆï¼Œå› æ­¤æœ€å°çš„åˆ†å‘æ—¶é—´è‡³å°‘æ˜¯ 
<br>åŒä¸Šå¾—
<br>å¦‚æœæˆ‘ä»¬è®¤ä¸ºä¸€æ—¦æ¯ä¸ªå¯¹ç­‰æ–¹æ¥æ”¶åˆ°ä¸€ä¸ªæ¯”ç‰¹å°±èƒ½å¤Ÿé‡åˆ†å‘ä¸€ä¸ªæ¯”ç‰¹çš„è¯ï¼Œåˆ™å­˜åœ¨ä¸€ä¸ªé‡æ–°åˆ†å‘æ–¹æ¡ˆèƒ½å®é™…å–å¾—è¿™ç§ä¸‹ç•Œ
<br>å‡è®¾æ‰€æœ‰å¯¹ç­‰æ–¹å…·æœ‰ç›¸åŒçš„ä¸Šè½½é€Ÿç‡ ï¼Œè®¾ç½®  å°æ—¶ï¼Œï¼Œ <img alt="Pasted image 20231106172311.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231106172311.png" style="width: 500px; max-width: 100%;">
<br>å¯¹äº P2P ä½“ç³»ç»“æ„æœ€å°åˆ†å‘æ—¶é—´ä¸ä»…æ€»æ˜¯å°äºå®¢æˆ·ï¼æœåŠ¡å™¨ä½“ç³»ç»“æ„çš„åˆ†å‘æ—¶é—´ï¼Œå¹¶ä¸”å¯¹äºä»»æ„ 0.5 çš„å¯¹ç­‰æ–¹æ•°é‡ N, æ€»æ˜¯å°äº 1 å°æ—¶
<br><br>
<br>æœ¯è¯­

<br>æ´ªæµ (torrent)ï¼šå‚ä¸ä¸€ä¸ªç‰¹å®šæ–‡ä»¶åˆ†å‘çš„æ‰€æœ‰å¯¹ç­‰æ–¹çš„é›†åˆ
<br>æ´ªæµä¸­çš„å¯¹ç­‰æ–¹å½¼æ­¤ä¸‹è½½ç­‰é•¿åº¦çš„æ–‡ä»¶å— (chunk)
<br>è¿½è¸ªå™¨ (tracker)ï¼šæ¯ä¸ªæ´ªæµå…·æœ‰çš„åŸºç¡€è®¾æ–½èŠ‚ç‚¹ï¼Œå½“ä¸€ä¸ªå¯¹ç­‰æ–¹åŠ å…¥æŸæ´ªæµæ—¶ï¼Œå®ƒå‘è¿½è¸ªå™¨æ³¨å†Œè‡ªå·±ï¼Œå¹¶å‘¨æœŸæ€§åœ°é€šçŸ¥è¿½è¸ªå™¨å®ƒä»åœ¨è¯¥æ´ªæµä¸­ã€‚ä»¥è¿™ç§æ–¹å¼ï¼Œè¿½è¸ªå™¨è·Ÿè¸ªå‚ä¸åœ¨æ´ªæµä¸­çš„å¯¹ç­‰æ–¹
<br>ç–é€š (unchoked)ï¼šä½¿æ•°æ®çš„å‘é€å’Œæ¥æ”¶æµç•…è¿›è¡Œçš„å¯¹ç­‰æ–¹


<br>é¢†è¿‘å¯¹ç­‰æ–¹ï¼šæ–°å¯¹ç­‰æ–¹åŠ å…¥æ´ªæµæ—¶ï¼Œè¿½è¸ªå™¨éšæœºä»å‚ä¸å¯¹ç­‰æ–¹çš„é›†åˆä¸­é€‰æ‹©å¯¹ç­‰æ–¹çš„ä¸€ä¸ªå­é›†ï¼Œå¹¶å°†è¿™äº›å¯¹ç­‰æ–¹çš„ IP åœ°å€å‘é€ç»™ Aliceï¼ŒAlice æŒæœ‰å¯¹ç­‰æ–¹çš„è¿™å¼ åˆ—è¡¨ï¼Œè¯•å›¾ä¸è¯¥åˆ—è¡¨ä¸Šçš„æ‰€æœ‰å¯¹ç­‰æ–¹åˆ›å»ºå¹¶è¡Œçš„ TCP è¿æ¥ï¼Œæ‰€æœ‰è¿™æ ·ä¸ Alice æˆåŠŸåœ°åˆ›å»ºä¸€ä¸ª TCP è¿æ¥çš„å¯¹ç­‰æ–¹ä¸ºï¼‚é‚»è¿‘å¯¹ç­‰æ–¹â€
<br>æœ€ç¨€ç¼ºä¼˜å…ˆ (rarest first) æŠ€æœ¯ï¼šé’ˆå¯¹ Alice æ²¡æœ‰çš„å—åœ¨å¥¹çš„é‚»å±…ä¸­å†³å®šæœ€ç¨€ç¼ºçš„å—ï¼ˆæœ€ç¨€ç¼ºçš„å—å°±æ˜¯é‚£äº›åœ¨å¥¹çš„é‚»å±…ä¸­å‰¯æœ¬æ•°é‡æœ€å°‘çš„å—ï¼‰ï¼Œå¹¶é¦–å…ˆè¯·æ±‚é‚£äº›æœ€ç¨€ç¼ºçš„å—
<br><br>
<br><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Dynamic_Adaptive_Streaming_over_HTTP" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Dynamic_Adaptive_Streaming_over_HTTP" target="_blank">Wikipedia - Dynamic Adaptive Streaming over HTTP</a>
<br>
<br>è§†é¢‘åª’ä½“ï¼šè§†é¢‘æ˜¯ä¸€ç³»åˆ—çš„å›¾åƒï¼Œé€šå¸¸ä»¥ä¸€ç§æ’å®šçš„é€Ÿç‡  (å¦‚æ¯ç§’ 24 æˆ– 30 å¼ å›¾åƒ) æ¥å±•ç°ã€‚ä¸€å¹…æœªå‹ç¼©ã€æ•°å­—ç¼–ç çš„å›¾åƒç”±åƒç´ é˜µåˆ—ç»„æˆï¼Œå…¶ä¸­æ¯ä¸ªåƒç´ æ˜¯ç”±ä¸€äº›æ¯”ç‰¹ç¼–ç æ¥è¡¨ç¤ºäº®åº¦å’Œé¢œè‰²ã€‚è§†é¢‘çš„ä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯å®ƒèƒ½å¤Ÿè¢«å‹ç¼©ï¼Œå› è€Œå¯ç”¨æ¯”ç‰¹ç‡æ¥æƒè¡¡è§†é¢‘è´¨é‡
<br>å¯¹æµå¼è§†é¢‘æœ€ä¸ºé‡è¦çš„æ€§èƒ½åº¦é‡æ˜¯ç«¯åˆ°ç«¯ååé‡
<br>HTTP çš„åŠ¨æ€é€‚åº”æµ (Dynamic Adaptive Streaming over HTTP, DASH)ï¼šè§†é¢‘ç¼–ç ä¸ºå‡ ä¸ªä¸åŒçš„ç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬å…·æœ‰ä¸åŒçš„æ¯”ç‰¹ç‡ï¼Œå¯¹åº”äºä¸åŒçš„è´¨é‡æ°´å¹³ã€‚å®¢æˆ·åŠ¨æ€åœ°è¯·æ±‚æ¥è‡ªä¸åŒç‰ˆæœ¬ä¸”é•¿åº¦ä¸ºå‡ ç§’çš„è§†é¢‘æ®µæ•°æ®å—ã€‚å½“å¯ç”¨å¸¦å®½é‡è¾ƒé«˜æ—¶ï¼Œå®¢æˆ·è‡ªç„¶åœ°é€‰æ‹©æ¥è‡ªé«˜é€Ÿç‡ç‰ˆæœ¬çš„å—ï¼›å½“å¯ç”¨å¸¦å®½é‡è¾ƒä½æ—¶ï¼Œå®¢æˆ·è‡ªç„¶åœ°é€‰æ‹©æ¥è‡ªä½é€Ÿç‡ç‰ˆæœ¬çš„å—ã€‚å®¢æˆ·ç”¨ HTTP GET è¯·æ±‚æŠ¥æ–‡ä¸€æ¬¡é€‰æ‹©ä¸€ä¸ªä¸åŒçš„å—
<br>HTTP æœåŠ¡å™¨å­˜åœ¨ä¸€ä¸ªå‘Šç¤ºæ–‡ä»¶ (manifest file)ï¼Œä¸ºæ¯ä¸ªç‰ˆæœ¬æä¾›äº†ä¸€ä¸ª URL åŠå…¶æ¯”ç‰¹ç‡
<br><br>
<br><a data-tooltip-position="top" aria-label="http://ieeexplore.ieee.org/document/6195531/" rel="noopener" class="external-link" href="http://ieeexplore.ieee.org/document/6195531/" target="_blank">Unreeling netflix: Understanding and improving multi-CDN movie delivery</a><br>
<img alt="Pasted image 20231108103623.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108103623.png">
<br>
<br>æä¾›æµå¼è§†é¢‘æœåŠ¡å»ºç«‹å•ä¸€å¤§è§„æ¨¡æ•°æ®ä¸­å¿ƒçš„é—®é¢˜

<br>ç”¨æˆ·è¿œç¦»æ•°æ®ä¸­å¿ƒï¼Œç«¯åˆ°ç«¯ååé‡å—ç“¶é¢ˆé“¾è·¯çš„ååé‡é™åˆ¶ï¼Œè‹¥ååé‡å°äºè§†é¢‘æ¶ˆè€—é€Ÿç‡ï¼Œå®¹æ˜“äº§ç”Ÿåœæ»æ—¶å»¶
<br>æµè¡Œçš„è§†é¢‘å¯èƒ½ç»ç›¸åŒçš„é€šä¿¡é“¾è·¯å‘é€å¤šæ¬¡
<br>å•ç‚¹æ•…éšœï¼Œå¦‚æœæ•°æ®ä¸­å¿ƒæˆ–å…¶é€šå‘å› ç‰¹ç½‘çš„é“¾è·¯å´©æºƒï¼Œå®ƒå°†ä¸èƒ½å¤Ÿåˆ†å‘ä»»ä½•è§†é¢‘æµ


<br>å†…å®¹åˆ†å‘ç½‘ (Content Distribution Network, CDN)ï¼šCDN ç®¡ç†åˆ†å¸ƒåœ¨å¤šä¸ªåœ°ç†ä½ç½®ä¸Šçš„æœåŠ¡å™¨ï¼Œåœ¨å®ƒçš„æœåŠ¡å™¨ä¸­å­˜å‚¨è§†é¢‘ï¼ˆå’Œå…¶ä»–ç±»å‹çš„ Web å†…å®¹ï¼ŒåŒ…æ‹¬æ–‡æ¡£ã€å›¾ç‰‡å’ŒéŸ³é¢‘ï¼‰çš„å‰¯æœ¬ï¼Œå¹¶ä¸”æ‰€æœ‰è¯•å›¾å°†æ¯ä¸ªç”¨æˆ·è¯·æ±‚å®šå‘åˆ°ä¸€ä¸ªå°†æä¾›æœ€å¥½çš„ç”¨æˆ·ä½“éªŒçš„ CDN ä½ç½®
<br>CDN æœåŠ¡å™¨å®‰ç½®åŸåˆ™

<br>æ·±å…¥ï¼šè¯¥åŸåˆ™æ˜¯é€šè¿‡åœ¨éåŠå…¨çƒçš„æ¥å…¥ ISP ä¸­éƒ¨ç½²æœåŠ¡å™¨é›†ç¾¤æ¥æ·±å…¥åˆ° ISP çš„æ¥å…¥ç½‘ä¸­ï¼Œä½†å› ä¸ºè¿™ç§é«˜åº¦åˆ†å¸ƒå¼è®¾è®¡ï¼Œç»´æŠ¤å’Œç®¡ç†é›†ç¾¤çš„ä»»åŠ¡æˆä¸ºæŒ‘æˆ˜
<br>é‚€è¯·åšå®¢ï¼šé€šè¿‡åœ¨å°‘é‡å…³é”®ä½ç½®å»ºé€ å¤§é›†ç¾¤æ¥é‚€è¯·åˆ° ISP åšå®¢ï¼Œé‚€è¯·åšå®¢è®¾è®¡é€šå¸¸äº§ç”Ÿè¾ƒä½çš„ç»´æŠ¤å’Œç®¡ç†å¼€é”€ï¼Œå¯èƒ½ä»¥å¯¹ç«¯ç”¨æˆ·çš„è¾ƒé«˜æ—¶å»¶å’Œè¾ƒä½ååé‡ä¸ºä»£ä»·


<br><br><br>
<br><a data-tooltip-position="top" aria-label="https://blog.skk.moe/post/i-have-my-unique-dns-setup/#Zhong-Chang-Xiu-Xi-Di-Gui-DNS-Shi-Zen-Me-Zhi-Dao-Na-Ge-CDN-Jie-Dian-Ju-Chi-Wo-Zui-Jin-De" rel="noopener" class="external-link" href="https://blog.skk.moe/post/i-have-my-unique-dns-setup/#Zhong-Chang-Xiu-Xi-Di-Gui-DNS-Shi-Zen-Me-Zhi-Dao-Na-Ge-CDN-Jie-Dian-Ju-Chi-Wo-Zui-Jin-De" target="_blank">Sukka - æˆ‘æœ‰ç‰¹åˆ«çš„ DNS é…ç½®å’Œä½¿ç”¨æŠ€å·§</a>
<br>
<br>é›†ç¾¤é€‰æ‹©ç­–ç•¥ (cluster selection strategy)ï¼šåŠ¨æ€åœ°å°†å®¢æˆ·å®šå‘åˆ° CDN ä¸­çš„æŸä¸ªæœåŠ¡å™¨é›†ç¾¤æˆ–æ•°æ®ä¸­å¿ƒ

<br>åœ°ç†ä¸Šæœ€ä¸ºé¢†è¿‘ (geographically closest)

<br>ä¸€ç§æ‰€æœ‰åŸºäº DNS çš„æ–¹æ³•éƒ½å†…åœ¨å…·æœ‰çš„é—®é¢˜æ˜¯ï¼ŒæŸäº›ç«¯ç”¨æˆ·é…ç½®ä½¿ç”¨ä½äºè¿œåœ°çš„ LONS
<br>å°±ç½‘ç»œè·¯å¾„çš„é•¿åº¦æˆ–è·³æ•°è€Œè¨€ï¼Œåœ°ç†æœ€é‚»è¿‘çš„é›†ç¾¤å¯èƒ½å¹¶ä¸æ˜¯æœ€è¿‘çš„é›†ç¾¤


<br>å®æ—¶æµ‹é‡ (real-time measurement)

<br>CDN èƒ½å¤Ÿè®©å®ƒçš„æ¯ä¸ªé›†ç¾¤å‘¨æœŸæ€§åœ°å‘ä½äºå…¨ä¸–ç•Œçš„æ‰€æœ‰ LDNS å‘é€æ¢æµ‹åˆ†ç»„
<br>ä½†æ˜¯è®¸å¤š LDNS è¢«é…ç½®ä¸ºä¸ä¼šå“åº”è¿™äº›æ¢æµ‹




]]></description><link>campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/åº”ç”¨å±‚.html</link><guid isPermaLink="false">Campus/Chinese-Notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/åº”ç”¨å±‚.md</guid><pubDate>Fri, 22 Dec 2023 11:04:20 GMT</pubDate><enclosure url="campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231023191228.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231023191228.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢]]></title><description><![CDATA[ 
 <br><br>
<br>æ§åˆ¶å¹³é¢ä¸ä»…æ§åˆ¶æ²¿ç€ä»æºä¸»æœºåˆ°ç›®çš„ä¸»æœºçš„ç«¯åˆ°ç«¯è·¯å¾„é—´çš„è·¯ç”±å™¨å¦‚ä½•è½¬å‘æ•°æ®æŠ¥ï¼Œè€Œä¸”æ§åˆ¶ç½‘ç»œå±‚ç»„ä»¶å’ŒæœåŠ¡å¦‚ä½•é…ç½®å’Œç®¡ç†
<br>OSPF æ˜¯ä¸€ç§è¿è¡Œåœ¨å•ä¸€ ISP ç½‘ç»œä¸­çš„è·¯ç”±é€‰æ‹©ç®—æ³•ï¼ŒBGP æ˜¯ä¸€ç§åœ¨å› ç‰¹ç½‘ä¸­ç”¨äºäº’è”æ‰€æœ‰ç½‘ç»œçš„è·¯ç”±é€‰æ‹©ç®—æ³•
<br><br>
<br>è®¡ç®—ã€ç»´æŠ¤å’Œå®‰è£…è½¬å‘è¡¨ä¸æµè¡¨çš„æ–¹æ³•ï¼š

<br>æ¯è·¯ç”±å™¨æ§åˆ¶ï¼šæ¯å°è·¯ç”±å™¨æœ‰ä¸€ä¸ªè·¯ç”±é€‰æ‹©ç»„ä»¶ï¼Œç”¨äºä¸å…¶ä»–è·¯ç”±å™¨ä¸­çš„è·¯ç”±é€‰æ‹©ç»„ä»¶é€šä¿¡ï¼Œä»¥è®¡ç®—å…¶è½¬å‘è¡¨çš„å€¼ï¼ŒOSPF å’Œ BGP åè®®éƒ½åŸºäºè¿™ç§æ–¹æ³• 
<br>é€»è¾‘é›†ä¸­å¼æ§åˆ¶ï¼š<a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ•°æ®å¹³é¢ > ^7fd436" data-href="ç½‘ç»œå±‚-æ•°æ®å¹³é¢#^7fd436" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ•°æ®å¹³é¢.html#^7fd436" class="internal-link" target="_self" rel="noopener">é€šç”¨è½¬å‘</a> å…è®¸æ‰§è¡Œé™¤äº†ä¼ ç»Ÿ IP è½¬å‘å¤–çš„å…¶ä»–åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½åŸæ¥é€šå¸¸æ˜¯åœ¨å•ç‹¬çš„<a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ•°æ®å¹³é¢ > ^cebafe" data-href="ç½‘ç»œå±‚-æ•°æ®å¹³é¢#^cebafe" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ•°æ®å¹³é¢.html#^cebafe" class="internal-link" target="_self" rel="noopener">ä¸­é—´ç›’</a> ä¸­å®ç°çš„


<br>æ¯è·¯ç”±å™¨æ§åˆ¶å’Œé€»è¾‘é›†ä¸­å¼æ§åˆ¶ä¹‹é—´çš„å…³é”®å·®å¼‚ï¼šè·¯ç”±å™¨ä¸­çš„æ§åˆ¶ç»„ä»¶èƒ½å¦ç›¸äº’äº¤äº’å¹¶ä¸»åŠ¨å‚ä¸è®¡ç®—è½¬å‘è¡¨ <img alt="Pasted image 20231122115215.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231122115215.png">
<br>é€»è¾‘é›†ä¸­å¼æ§åˆ¶è·¯ç”±é€‰æ‹©æ§åˆ¶æœåŠ¡å‡ºäºå®¹é”™å’Œæ€§èƒ½æ‰©å±•æ€§çš„åŸå› ï¼Œå¾ˆå¯èƒ½ç”±å¤šä¸ªæœåŠ¡å™¨å®ç°
<br><br>
<br>è·¯ç”±é€‰æ‹©ç®—æ³• (routing algorithm) çš„ç›®çš„ï¼šä»å‘é€æ–¹åˆ°æ¥æ”¶æ–¹çš„è¿‡ç¨‹ä¸­ç¡®å®šä¸€æ¡é€šè¿‡è·¯ç”±å™¨ç½‘ç»œçš„å¥½çš„è·¯å¾„ <img alt="Pasted image 20231122120530.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231122120530.png">
<br>å›¾ (graph)  æ˜¯ä¸€ä¸ª  ä¸ªèŠ‚ç‚¹å’Œ  æ¡è¾¹çš„é›†åˆï¼Œæ¯æ¡è¾¹æ˜¯å–è‡ª  çš„ä¸€å¯¹èŠ‚ç‚¹ï¼Œç”¨  è¡¨ç¤ºè¿æ¥èŠ‚ç‚¹  å’Œ  è¾¹çš„å¼€é”€ï¼Œå¦‚æœ  ä¸å±äº ï¼Œåˆ™  ï¼Œå¦‚æœå±äº  åˆ™èŠ‚ç‚¹  ä¸ºèŠ‚ç‚¹  çš„é¢†å±…(neighbor)  <img alt="Pasted image 20231122161720.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231122161720.png" style="width: 400px; max-width: 100%;">
<br>è·¯ç”±é€‰æ‹©ç®—æ³•çš„ç›®æ ‡æ‰¾å‡ºä»æºåˆ°ç›®çš„åœ°é—´çš„æœ€ä½å¼€é”€è·¯å¾„ (least-cost path)ï¼Œè‹¥å›¾ä¸­çš„æ‰€æœ‰è¾¹å…·æœ‰ç›¸åŒçš„å¼€é”€ï¼Œåˆ™æœ€ä½å¼€é”€è·¯å¾„ä¹Ÿæ˜¯æœ€çŸ­è·¯å¾„ (shortest path)
<br>è·¯ç”±é€‰æ‹©ç®—æ³•åˆ†ç±»ï¼š

<br>æ ¹æ®é›†ä¸­å¼è¿˜æ˜¯åˆ†æ•£å¼

<br>é›†ä¸­å¼è·¯ç”±é€‰æ‹©ç®—æ³•(centralized routing algorithm)ï¼šç”¨å®Œæ•´çš„ã€å…¨å±€æ€§çš„ç½‘ç»œçŸ¥è¯†è®¡ç®—å‡ºä»æºåˆ°ç›®çš„åœ°ä¹‹é—´çš„æœ€ä½å¼€é”€è·¯å¾„ï¼Œå…·æœ‰å…¨å±€çŠ¶æ€ä¿¡æ¯çš„ç®—æ³•å¸¸è¢«ç§°ä½œé“¾è·¯çŠ¶æ€ (Link State, LS) ç®—æ³•
<br>åˆ†æ•£å¼è·¯ç”±é€‰æ‹©ç®—æ³•(decetralized routing algorithm)ï¼šè·¯ç”±å™¨ä»¥è¿­ä»£ã€åˆ†å¸ƒå¼çš„æ–¹å¼è®¡ç®—å‡ºæœ€ä½å¼€é”€è·¯å¾„ã€‚æ²¡æœ‰èŠ‚ç‚¹æ‹¥æœ‰å…³äºæ‰€æœ‰ç½‘ç»œé“¾è·¯å¼€é”€çš„å®Œæ•´ä¿¡æ¯ï¼Œä¹‹åå­¦ä¹ çš„è·ç¦»å‘é‡ (Distance-Vector, DV) ç®—æ³•å°±æ˜¯åˆ†æ•£å¼è·¯ç”±é€‰æ‹©ç®—æ³•


<br>æ ¹æ®é™æ€çš„è¿˜æ˜¯åŠ¨æ€çš„

<br>é™æ€è·¯ç”±é€‰æ‹©ç®—æ³•(static routing algorithm)ï¼šè·¯ç”±éšæ—¶é—´å˜åŒ–æ…¢ï¼Œé€šå¸¸æ˜¯äººå·¥è°ƒæ•´
<br>åŠ¨æ€è·¯ç”±é€‰æ‹©ç®—æ³•(dynamic routing algorithm)ï¼šéšç€ç½‘ç»œæµé‡è´Ÿè½½æˆ–æ‹“æ‰‘å‘ç”Ÿå˜åŒ–è€Œå˜åŒ–


<br>æ ¹æ®è´Ÿè½½æ•æ„Ÿè¿˜æ˜¯è´Ÿè½½è¿Ÿé’

<br>è´Ÿè½½æ•æ„Ÿç®—æ³•(load-sensitive algorithm)ï¼šé“¾è·¯å¼€é”€åŠ¨æ€å˜åŒ–ä»¥åæ˜ å‡ºåº•å±‚é“¾è·¯çš„å½“å‰æ‹¥å¡æ°´å¹³
<br>è´Ÿè½½è¿Ÿé’ç®—æ³•(load-insentitive algorithm)ï¼šé“¾è·¯å¼€é”€ä¸æ˜ç¡®åæ˜ æ‹¥å¡æ°´å¹³




<br><br>
<br>å®è·µä¸­æ˜¯è®©æ¯ä¸ªèŠ‚ç‚¹å‘ç½‘ç»œä¸­çš„æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹å¹¿æ’­é“¾è·¯çŠ¶æ€åˆ†ç»„æ¥å®ç° (é“¾è·¯çŠ¶æ€å¹¿æ’­ link state broadcast ç®—æ³•)
<br>æ‰€æœ‰èŠ‚ç‚¹éƒ½æ‹¥æœ‰ç½‘ç»œçš„å®Œæ•´è§†å›¾
<br>Dijkstra ç®—æ³• [@TuWenXiangJieDijkstraZuiDuanLuJingSuanFa2021][@DijkstraAlgorithm2023]ï¼šè®¡ç®—ä»æŸèŠ‚ç‚¹åˆ°è¾¾ç½‘ç»œä¸­æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹çš„æœ€ä½å¼€é”€è·¯å¾„ <img style="max-width:800px; " class="excalidraw-svg excalidraw-embedded-img excalidraw-canvas-immersive" src="blob://313944e7-bc71-4966-a242-fb5ff3e7758b" filesource="Campus/Chinese-Notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/Excalidraw/Dijkstra.excalidraw.md" w="800" draggable="false" oncanvas="false">

<br>ç»è¿‡ç®—æ³•çš„  æ¬¡è¿­ä»£åï¼Œå¯çŸ¥é“  ä¸ªç›®çš„èŠ‚ç‚¹çš„æœ€ä½å¼€é”€è·¯å¾„


<br>å½“ LS ç®—æ³•ä¸­æ­¢æ—¶ï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéƒ½å¯ä»¥å¾—åˆ°ä»æºèŠ‚ç‚¹æ²¿ç€æœ€ä½å¼€é”€è·¯å¾„çš„å‰ä¸€èŠ‚ç‚¹ (å¯å›æº¯)ï¼Œé€šè¿‡å¯¹æ¯ä¸ªç›®çš„èŠ‚ç‚¹å­˜æ”¾ä»  åˆ°ç›®çš„åœ°çš„æœ€ä½å¼€é”€è·¯å¾„ä¸Šçš„ä¸‹ä¸€è·³èŠ‚ç‚¹ï¼Œä»è€Œå¯ä»¥æ„å»ºè½¬å‘è¡¨ <img alt="Pasted image 20231123163847.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231123163847.png" style="width: 600px; max-width: 100%;">
<br>æ‹¥å¡æ•æ„Ÿçš„è·¯ç”±é€‰æ‹©çš„æŒ¯è¡ <img alt="Pasted image 20231123165211.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231123165211.png">

<br>è€ƒè™‘å›¾ä¸­çš„æƒ…å†µï¼ŒèŠ‚ç‚¹  å’Œ  å‘èŠ‚ç‚¹  å‘å‡ºé€ æˆé“¾è·¯å¼€é”€ä¸º 1 çš„æµé‡ï¼ŒèŠ‚ç‚¹  å‘èŠ‚ç‚¹  å‘å‡ºå¼€é”€ä¸º e çš„æµé‡äº†
<br>å¦‚æœè·¯ç”±é€‰æ‹©ç®—æ³•æ‹¥å¡æ•æ„Ÿï¼Œåˆ™åœ¨ç¬¬äºŒæ¬¡æ¥æ”¶åˆ°åŒæ ·å¼€é”€çš„æµé‡è¿è¡Œ LS ç®—æ³•æ—¶ï¼ŒèŠ‚ç‚¹  ä¼šæ ¹æ®ç¬¬ä¸€æ¬¡çš„é“¾è·¯å¼€é”€é€‰æ‹© y -&gt; z -&gt; w çš„è·¯å¾„ï¼Œç”±äºåœ¨ç¬¬ä¸€æ¬¡æƒ…å†µä¸‹ y -&gt; x -&gt; w æ€»å¼€é”€ä¸º  è€Œ y -&gt; z -&gt; w çš„æ€»å¼€é”€åªæœ‰  ï¼Œç›¸ç±»ä¼¼çš„èŠ‚ç‚¹  å’Œ  éƒ½ä¼šé€‰æ‹©é¡ºæ—¶é’ˆæ–¹å‘å‘é€æµé‡
<br>åŒæ ·å½“ç¬¬ä¸‰æ¬¡æ‰§è¡Œ LS ç®—æ³•æ—¶æ‰€æœ‰çš„æµé‡å‡é€†æ—¶é’ˆå‘å‡ºï¼Œç¬¬å››æ¬¡åˆ™å…¨ä¸ºé¡ºæ—¶é’ˆï¼Œé€ æˆæŒ¯è¡
<br>é˜²æ­¢è¿™ç§æƒ…å†µå‡ºç°çš„æ–¹æ³•æ˜¯è®©æ‰€æœ‰çš„è·¯ç”±å™¨åœ¨åŒä¸€å‘¨æœŸçš„ä¸åŒæ—¶åˆ»è¿è¡Œ LS ç®—æ³•ï¼Œä½†æ˜¯åœ¨è¿è¡Œä¸€æ®µæ—¶é—´åè·¯ç”±å™¨ä¼šå‘ç”Ÿè‡ªåŒæ­¥ç°è±¡ï¼Œé¿å…è¿™ç§ç°è±¡çš„æ–¹æ³•æ˜¯è®©æ¯å°è·¯ç”±å™¨å‘é€é“¾è·¯é€šå‘Šçš„æ—¶é—´éšæœºåŒ–


<br><br>
<br>åˆ†å¸ƒå¼ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦ä»ä¸€ä¸ªæˆ–å¤šä¸ªç›´æ¥ç›¸è¿é‚»å±…æ¥æ”¶æŸäº›ä¿¡æ¯ï¼Œæ‰§è¡Œè®¡ç®—ï¼Œç„¶åå°†å…¶è®¡ç®—ç»“æœåˆ†å‘ç»™é‚»å±…
<br>è¿­ä»£ï¼šæ­¤è¿‡ç¨‹ä¸€ç›´è¦æŒç»­åˆ°é‚»å±…ä¹‹é—´æ— æ›´å¤šä¿¡æ¯è¦äº¤æ¢ä¸ºæ­¢
<br>å¼‚æ­¥ï¼šä¸è¦æ±‚æ‰€æœ‰èŠ‚ç‚¹ç›¸äº’ä¹‹é—´æ­¥ä¼ä¸€è‡´åœ°æ“ä½œ
<br>Bellman-Ford æ–¹ç¨‹ 

<br>éå†  çš„æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹ ï¼Œä»  åˆ°  çš„æœ€ä½å¼€é”€æ—¶æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹  çš„  çš„æœ€å°å€¼ (å¾…è¡¥å……)
<br>ä»¤  ä¸ºå–å¾—æ–¹ç¨‹æœ€å°å€¼çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œè‹¥èŠ‚ç‚¹  è¦æ²¿ç€æœ€ä½å¼€é”€è·¯å¾„å‘èŠ‚ç‚¹  å‘é€ä¸€ä¸ªåˆ†ç»„ï¼Œå®ƒåº”å½“å…ˆå‘  å‘é€åˆ†ç»„ï¼Œæ‰€ä»¥èŠ‚ç‚¹  çš„è½¬å‘è¡¨æŒ‡å®šèŠ‚ç‚¹  ä½œä¸ºä¸‹ä¸€è·³è·¯ç”±å™¨


<br>ä½¿ç”¨ DV ç®—æ³•ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤ä¸€ä¸ªä¸‹åˆ—è·¯ç”±é€‰æ‹©ä¿¡æ¯

<br>åˆ°æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹çš„å¼€é”€  
<br>èŠ‚ç‚¹  çš„è·ç¦»å‘é‡  åŒ…å«  åˆ°  ä¸­æ‰€æœ‰ç›®çš„åœ°  çš„å¼€é”€ä¼°è®¡å€¼ï¼Œæ³¨æ„  åªæ˜¯è¯¥è·ç¦»å‘é‡çš„ä¸€ä¸ªåˆ†é‡ (ä¹‹åçš„å™è¿°ä¸­å¯èƒ½ä¼šå°†è¿™ä¸¤ä¸ªæ¦‚å¿µæ··æ·†ï¼Œå› ä¸ºå‘é€çš„æ˜¯å®Œæ•´çš„è·ç¦»å‘é‡ï¼Œç„¶è€Œåœ¨ä¸‹æ–‡çš„ä¾‹å­ä¸­é€šå¸¸åªæ›´æ–°å…¶ä¸­ä¸€ä¸ªåˆ†é‡)
<br>æ¯ä¸ªé‚»å±…çš„è·ç¦»å‘é‡ 


<br>æ¯ä¸ªèŠ‚ç‚¹ä¸æ—¶å‘æ¯ä¸ªé‚»å±…å‘é€è·ç¦»å‘é‡ï¼Œå½“èŠ‚ç‚¹  ä»ä»»ä½•ä¸€ä¸ªé‚»å±…  æ¥æ”¶åˆ°æ–°è·ç¦»å‘é‡æ—¶ï¼Œå®ƒä¿å­˜è¯¥è·ç¦»å‘é‡ï¼Œç„¶åä½¿ç”¨ Bellman-Ford æ–¹ç¨‹æ›´æ–°è‡ªå·±çš„è·ç¦»å‘é‡ï¼Œå¦‚æœ  çš„è·ç¦»å‘é‡å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™  å‘æ‰€æœ‰çš„é‚»å±…å‘é€æ›´æ–°åçš„è·ç¦»å‘é‡ï¼Œä»è€Œè®©æ‰€æœ‰é‚»å±…æ›´æ–°è‡ªèº«çš„è·ç¦»å‘é‡ï¼Œåªè¦æ‰€æœ‰çš„èŠ‚ç‚¹ä»¥å¼‚æ­¥æ–¹å¼äº¤æ¢è‡ªå·±çš„è·ç¦»å‘é‡ï¼Œåˆ™æ¯ä¸ªå¼€é”€ä¼°è®¡å€¼  ä¼šæ”¶æ•›åˆ°  (èŠ‚ç‚¹  åˆ°èŠ‚ç‚¹  çš„æœ€ä½å¼€é”€è·¯å¾„çš„å¼€é”€)
<br>ä¸ºäº†ä¸€ä¸ªç»™å®šè·¯å¾„  è€Œæ›´æ–°è½¬å‘è¡¨ï¼ŒèŠ‚ç‚¹  å…³æ³¨çš„æ˜¯æ²¿ç€æœ€çŸ­è·¯å¾„åˆ°  çš„ä¸‹ä¸€è·³è·¯ç”±å™¨é‚»å±…èŠ‚ç‚¹  
<br><br>
<br>å¦‚æœè¿è¡Œ DV ç®—æ³•çš„èŠ‚ç‚¹æ£€æµ‹åˆ°ä»è‡ªå·±åˆ°é‚»å±…çš„é“¾è·¯å¼€é”€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒå°±æ›´æ–°è‡ªå·±çš„è·ç¦»å‘é‡ï¼Œå¦‚æœåˆ°è¯¥é‚»å±…çš„è·ç¦»å‘é‡åˆ†é‡å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™å‘æ‰€æœ‰é‚»å±…é€šçŸ¥æ–°çš„è·ç¦»å‘é‡
<br>è·¯ç”±é€‰æ‹©ç¯è·¯ (routing loop) <img alt="Pasted image 20231124103355.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231124103355.png" style="width: 500px; max-width: 100%;">

<br>å‡è®¾é“¾è·¯å¼€é”€å˜åŒ–æ—¶ï¼Œï¼Œï¼Œï¼Œ ï¼Œåˆ™  æ—¶åˆ»å½“  æ£€æµ‹åˆ°é“¾è·¯å¼€é”€å˜åŒ–æ—¶ (ä»å¼€é”€ 4 å˜ä¸º 60)ï¼Œ è®¡ç®—åˆ°  çš„æ–°çš„è·ç¦»å‘é‡çš„åˆ†é‡ y -&gt; x -&gt; x å’Œ y -&gt; z -&gt; x ç›¸æ¯”è¾ƒ 
<br>è¿™æ—¶é‡åˆ°äº†è·¯ç”±é€‰æ‹©ç¯è·¯ï¼Œå‘å‡ºçš„åˆ†ç»„ä¸ºäº†åˆ°è¾¾  ï¼Œ è®¤ä¸ºåº”è¯¥å‘  è½¬å‘ï¼Œè€Œ  è®¤ä¸ºåº”è¯¥å‘  è½¬å‘ï¼Œåˆ†ç»„äºæ˜¯åœ¨è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¸åœåœ°æ¥å›åå¤
<br>æ­¤æ—¶èŠ‚ç‚¹  è®¡ç®—å‡º  æ‰€ä»¥åœ¨  æ—¶åˆ»å°†æ›´æ–°åçš„è·ç¦»å‘é‡å‘Šè¯‰ 
<br>åœ¨  æ—¶åˆ»ï¼Œ æ”¶åˆ°  çš„æ–°è·ç¦»å‘é‡ï¼ŒæŒ‡ç¤ºäº†  åˆ°  çš„æœ€ä½å¼€é”€æ˜¯ 6 ï¼Œ è®¡ç®—åˆ°  çš„æœ€ä½å¼€é”€  (è¿™æ—¶  å·²ç»çŸ¥é“äº† z -&gt; x çš„é“¾è·¯å¼€é”€å‘ç”Ÿäº†å˜åŒ–)ï¼Œå¹¶åœ¨è®¡ç®—å®Œå  æ—¶åˆ»é€šçŸ¥  å…¶æ–°å¼€é”€
<br>å½“  åœ¨  æ—¶åˆ»æ”¶åˆ°  çš„é€šçŸ¥æ—¶ï¼Œè®¡ç®—åˆ°  çš„æœ€ä½å¼€é”€  å¹¶å‘  å‘é€è·ç¦»å‘é‡ï¼Œéšå  è®¡ç®—å¾—åˆ°  å¹¶å‘  å‘é€è·ç¦»å‘é‡
<br>å¦‚æ­¤åå¤ç›´åˆ°  å‘  å‘é€è·ç¦»å‘é‡  ï¼Œæ­¤æ—¶  åˆ°  çš„æœ€ä½å¼€é”€é“¾è·¯åˆ‡æ¢ä¸º z â€”&gt; xï¼Œå†å‘é€æ¥æ”¶ä¸€ä¸ªè¿­ä»£åï¼Œè¿›å…¥é™æ­¢çŠ¶æ€ï¼Œæ­¤æ—¶ä¸ºäº†è®©åˆ†ç»„åˆ°è¾¾  ï¼Œ ä¼šç›´æ¥é€‰æ‹©ç›´æ¥å‘  è½¬å‘ï¼Œè·¯ç”±é€‰æ‹©ç¯è·¯çŠ¶æ€ç»“æŸ


<br><br>
<br>å¦‚æœ  é€šè¿‡  è·¯ç”±é€‰æ‹©åˆ°ç›®çš„åœ°  ï¼Œåˆ™  å°†é€šå‘Š    ï¼Œæ­¤æ—¶  ç›¸ä¿¡  æ²¡æœ‰åˆ°  çš„è·¯å¾„ï¼Œé€šè¿‡è¿™ä¸ªå–„æ„çš„è°è¨€ï¼Œ å°†ä¸ä¼šè¯•å›¾ç»ç”±  è·¯ç”±é€‰æ‹©åˆ°  
<br> æ›´æ–°å…¶è·ç¦»å‘é‡ï¼Œåˆ†é‡  ï¼Œå¹¶å°†æ–°çš„è·ç¦»å‘é‡å‘é€ç»™  
<br>æ­¤æ—¶  æ›´æ–°è·ç¦»å‘é‡å¹¶é€šçŸ¥   
<br>æ”¶åˆ°  çš„æ›´æ–°å  ç”¨  æ›´æ–°è·ç¦»è¡¨ï¼Œä½†æ˜¯ä¸ºäº†æ¯’åŒ–é€†å‘è·¯å¾„ï¼Œ å‘  é€šå‘Š 
<br>æ³¨æ„å¦‚æœæ¶‰åŠ 3 ä¸ªæˆ–æ›´å¤šèŠ‚ç‚¹æ— æ³•ç”¨æ¯’æ€§é€†è½¬æŠ€æœ¯æ£€æµ‹
<br><br>
<br>LS è¦æ±‚æ¯ä¸ªèŠ‚ç‚¹é€šè¿‡å¹¿æ’­ä¸æ‰€æœ‰èŠ‚ç‚¹é€šä¿¡ï¼Œä½†åªå‘Šè¯‰æ‰€æœ‰èŠ‚ç‚¹ä¸è¯¥èŠ‚ç‚¹ä¹‹é—´ç›¸è¿çš„é“¾è·¯å¼€é”€ï¼Œä»¥ä¾¿ç¡®å®šå…¨å±€ä¿¡æ¯
<br>DV ä¸­æ¯ä¸ªèŠ‚ç‚¹ä»…ä¸æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹é€šä¿¡ï¼Œä½†ä¸ºç›¸é‚»èŠ‚ç‚¹æä¾›äº†è‡ªå·±åˆ°ç½‘ç»œä¸­æ‰€æœ‰èŠ‚ç‚¹çš„æœ€ä½å¼€é”€ä¼°è®¡
<br>LS ç®—æ³•çš„çš„å¤æ‚æ€§ä¸º 
<br>LS ç”±äºå„èŠ‚ç‚¹æ‰§è¡Œå„è‡ªçš„è®¡ç®—ï¼Œæä¾›äº†ä¸€å®šç¨‹åº¦çš„å¥å£®æ€§ï¼Œè€Œ DV ç®—æ³•ä¸€ä¸ªä¸æ­£ç¡®çš„èŠ‚ç‚¹è®¡ç®—å€¼ä¼šæ‰©æ•£åˆ°æ•´ä¸ªç½‘ç»œ
<br><br>
<br>å®è·µä¸­ä¸Šæ–‡ä»‹ç»çš„æ¨¡å‹æœ‰ä¸€äº›ç®€å•åŒ–ï¼ŒåŸå› æœ‰

<br>è§„æ¨¡ï¼šéšç€è·¯ç”±å™¨æ•°ç›®å˜å¾—å¾ˆå¤§ï¼Œæ¶‰åŠè·¯ç”±é€‰æ‹©ä¿¡æ¯çš„é€šä¿¡ã€è®¡ç®—å’Œå­˜å‚¨çš„å¼€é”€å°†é«˜å¾—ä¸å¯å®ç°
<br>ç®¡ç†è‡ªæ²»ï¼šåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç»„ç»‡åº”å½“èƒ½å¤ŸæŒ‰è‡ªå·±çš„æ„¿æœ›è¿è¡Œå’Œç®¡ç†å…¶ç½‘ç»œï¼Œè¿˜è¦èƒ½å°†å…¶ç½‘ç»œä¸å…¶ä»–å¤–éƒ¨ç½‘ç»œè¿æ¥èµ·æ¥


<br>è‡ªæ²»ç³»ç»Ÿ (Autonomous System, AS)ï¼šæ¯ä¸ª AS ç”±ä¸€ç»„é€šå¸¸å¤„åœ¨ç›¸åŒç®¡ç†æ§åˆ¶ä¸‹çš„è·¯ç”±å™¨ç»„æˆï¼ŒISP å¯å°†å…¶ç½‘ç»œåˆ’åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ª AS ï¼ŒAS å·ç”± ICANN æ‰€åˆ†é…<img alt="Pasted image 20231128111008.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231128111008.png">
<br>åœ¨ä¸€ä¸ª AS ä¸­è¿è¡Œçš„è·¯ç”±é€‰æ‹©ç®—æ³•å«åšè‡ªæ²»ç³»ç»Ÿå†…éƒ¨è·¯ç”±é€‰æ‹©åè®® (intra-autonomous system routing protocol)
<br>å¼€æ”¾æœ€çŸ­è·¯ä¼˜å…ˆ (OSPF) æ˜¯ä¸€ç§é“¾è·¯çŠ¶æ€åè®®[@moyOSPFVersion1998]ï¼Œä½¿ç”¨æ´ªæ³›é“¾è·¯çŠ¶æ€ä¿¡æ¯å’Œ Dijkstra æœ€ä½å¼€é”€è·¯å¾„ç®—æ³•ï¼Œè·¯ç”±å™¨æ„å»ºäº†å…³äºæ•´ä¸ªè‡ªæ²»ç³»ç»Ÿçš„å®Œæ•´æ‹“æ‰‘å›¾ï¼Œé€šè¿‡ Dijkstra ï¼Œè·¯ç”±å™¨å¯ä»¥ç¡®å®šä¸€ä¸ªä»¥è‡ªèº«ä¸ºæ ¹èŠ‚ç‚¹åˆ°æ‰€æœ‰å­ç½‘çš„æœ€çŸ­è·¯å¾„æ ‘
<br>å„æ¡é“¾è·¯çš„å¼€é”€å¯ä»¥ç”±ç½‘ç»œç®¡ç†å‘˜é…ç½®ï¼Œä½† OSPF ä¸å¼ºåˆ¶ä½¿ç”¨è®¾ç½®é“¾è·¯æƒå€¼çš„ç­–ç•¥

<br>å°†æ¯æ¡é“¾è·¯å¼€é”€è®¾ç½®ä¸º 1 å¯ä»¥å®ç°æœ€å°‘è·³è·¯ç”±é€‰æ‹©
<br>å°†é“¾è·¯æƒå€¼ä¸é“¾è·¯å®¹é‡è®¾ä¸ºåæ¯”ï¼Œä¸é¼“åŠ±æµé‡ä½¿ç”¨ä½å¸¦å®½é“¾è·¯


<br>ä½¿ç”¨ OSPF æ—¶ï¼Œè·¯ç”±å™¨å‘è‡ªæ²»ç³»ç»Ÿå†…æ‰€æœ‰å…¶ä»–è·¯ç”±å™¨å¹¿æ’­è·¯ç”±é€‰æ‹©ä¿¡æ¯

<br>æ¯å½“é“¾è·¯çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œè·¯ç”±å™¨å¹¿æ’­é“¾è·¯çŠ¶æ€ä¿¡æ¯
<br>é“¾è·¯çš„çŠ¶æ€ä¸å‘ç”Ÿå˜åŒ–ï¼Œè·¯ç”±å™¨ä¹Ÿè¦å‘¨æœŸå¹¿æ’­é“¾è·¯çŠ¶æ€ï¼Œå¯ä»¥å¢åŠ é“¾è·¯çŠ¶æ€ç®—æ³•çš„å¥å£®æ€§


<br>OSPF åè®®æŠ¥æ–‡ç›´æ¥ç”± IP æ‰¿è½½ï¼Œæ‰€ä»¥ OSPF éœ€è¦è‡ªå·±å®ç°å¯é æŠ¥æ–‡ä¼ è¾“ï¼Œé“¾è·¯çŠ¶æ€å¹¿æ’­ç­‰åŠŸèƒ½
<br>OSPF çš„ä¼˜ç‚¹

<br>å®‰å…¨ï¼šä½¿ç”¨é‰´åˆ«æœºåˆ¶
<br>å¤šæ¡ç›¸åŒå¼€é”€çš„è·¯å¾„
<br>å¯¹å•æ’­å’Œå¤šæ’­è·¯ç”±é€‰æ‹©çš„æ€»å’Œæ”¯æŒ
<br>æ”¯æŒåœ¨å•ä¸ª AS ä¸­çš„å±‚æ¬¡ç»“æ„ï¼šåœ¨æ¯ä¸ªåŒºåŸŸå†…ï¼Œä¸€å°æˆ–å¤šå°åŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨å‘è¯¥åŒºåŸŸå†…æ‰€æœ‰å…¶ä»–è·¯ç”±å™¨å¹¿æ’­å…¶é“¾è·¯çŠ¶æ€


<br><br>
<br>åˆ†ç»„è·¨è¶Šå¤šä¸ª AS è¿›è¡Œè·¯ç”±æ—¶ï¼Œéœ€è¦è‡ªæ²»ç³»ç»Ÿé—´è·¯ç”±é€‰æ‹©åè®® (inter-autonomous system routing protocol)
<br>å› ç‰¹ç½‘ä¸­ï¼Œæ‰€æœ‰çš„ AS è¿è¡Œç›¸åŒçš„ AS é—´é€‰æ‹©åè®®ï¼Œç§°ä¸ºè¾¹ç•Œç½‘å…³åè®® (Broader Gateway Protocol, BGP)
<br><br>
<br>å¯¹äºç›¸åŒ AS ä¸­çš„ç›®çš„åœ°è€Œè¨€ï¼Œåœ¨è·¯ç”±å™¨è½¬å‘è¡¨ä¸­çš„è¡¨é¡¹ç”± AS å†…éƒ¨è·¯ç”±é€‰æ‹©åè®®å†³å®š
<br>BGP ä¸­åˆ†ç»„ä¸æ˜¯è·¯ç”±åˆ°ä¸€ä¸ªç‰¹å®šçš„ç›®çš„åœ°å€ï¼Œè€Œæ˜¯è·¯ç”±åˆ° <a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ•°æ®å¹³é¢ > ^821595" data-href="ç½‘ç»œå±‚-æ•°æ®å¹³é¢#^821595" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ•°æ®å¹³é¢.html#^821595" class="internal-link" target="_self" rel="noopener">CIDR</a> åŒ–çš„å‰ç¼€
<br>BGP ä¸ºæ¯å°è·¯ç”±å™¨æä¾›äº†ä¸€ç§å®Œæˆä»¥ä¸‹ä»»åŠ¡çš„æ‰‹æ®µ

<br>ä»é‚»å±… AS è·å¾—å‰ç¼€çš„å¯è¾¾æ€§ä¿¡æ¯
<br>ç¡®å®šè¯¥å‰ç¼€çš„"æœ€å¥½çš„"è·¯ç”±


<br><br><img alt="Pasted image 20231127104059.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231127104059.png"><br>
<br>å¯¹äºæ¯ä¸ª AS ï¼Œæ¯å°è·¯ç”±å™¨è¦ä¹ˆæ˜¯ä¸€å°ç½‘å…³è·¯ç”±å™¨ (gateway router)ï¼Œè¦ä¹ˆæ˜¯ä¸€å°å†…éƒ¨è·¯ç”±å™¨ (internal router)ï¼Œç½‘å…³è·¯ç”±å™¨ä½äº AS è¾¹ç¼˜ï¼Œå†…éƒ¨è·¯ç”±å™¨ä»…è¿æ¥è‡ªå·± AS ä¸­çš„ä¸»æœºå’Œè·¯ç”±å™¨[@ShiMeShiBGPBGP]
<br>ä»é«˜å±‚æ¬¡ (AS) ä¸Šè€ƒè™‘ï¼Œè‹¥è¦å‘æ‰€æœ‰è·¯ç”±å™¨é€šå‘Šå‰ç¼€  çš„å¯è¾¾æ€§ä¿¡æ¯

<br>AS3 å‘ AS2 å‘é€ä¸€ä¸ª BGP æŠ¥æ–‡ AS3 xï¼Œå‘Šè¯‰  å­˜åœ¨å¹¶ä½äº AS3 ä¸­
<br>AS2 å‘ AS1 å‘é€ä¸€ä¸ªæŠ¥æ–‡ AS2 AS3 xï¼Œå‘Šè¯‰  å­˜åœ¨å¯é€šè¿‡ -&gt; AS2 -&gt; AS3 çš„é€”å¾„åˆ°è¾¾ 


<br>BGP ä¸­ï¼Œæ¯å¯¹è·¯ç”±å™¨é€šè¿‡ä½¿ç”¨ 179 ç«¯å£çš„åŠæ°¸ä¹… (?) TCP äº¤æ¢è·¯ç”±é€‰æ‹©ä¿¡æ¯
<br>æ¯æ¡ä¹‹é—´è¿æ¥ä»¥åŠé€šè¿‡è¯¥è¿æ¥å‘é€çš„ BGP æŠ¥æ–‡ç§°ä¸º BGP è¿æ¥ (BGP Connection)ï¼Œè·¨è¶Šä¸¤ä¸ª AS çš„ BGP è¿æ¥ç§°ä¸ºå¤–éƒ¨ BGP (eBGP)è¿æ¥ï¼Œç›¸åŒ AS ä¸­çš„ä¸¤å°è·¯ç”±å™¨ä¹‹é—´çš„ä¼šè¯è¢«ç§°ä¸ºå†…éƒ¨ BGP (iBGP) è¿æ¥ï¼Œæ¯ä¸ªè·¯ç”±å™¨ä¹‹é—´è¿˜æœ‰å¤šæ¡ iBGP è¿æ¥ï¼Œåº”è¯¥æŒ‡å‡ºçš„æ˜¯ï¼Œä½¿ç”¨ iBGP å¹¶éä½¿ç”¨ eBGP çš„å‰ææ¡ä»¶ã€‚è‡ªæ²»ç³»ç»Ÿå¯ä»å¤šç§å†…éƒ¨åè®®ä¸­é€‰æ‹©ï¼Œæ¥è¿æ¥å†…éƒ¨ç½‘ç»œä¸Šçš„è·¯ç”±å™¨ <img alt="Pasted image 20231127110509.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231127110509.png">
<br>å†æ¬¡è€ƒè™‘ä¸Šè¿°è¿‡ç¨‹

<br>è·¯ç”±å™¨ 3a å…ˆå‘ç½‘å…³è·¯ç”±å™¨ 2c å‘é€ä¸€ä¸ª eBGP æŠ¥æ–‡ AS3 x
<br>ç½‘å…³ 2c å‘ AS ä¸­æ‰€æœ‰å…¶ä»–è·¯ç”±å™¨å‘é€ iBGP æŠ¥æ–‡ AS3 x
<br>ç½‘å…³ 2a å‘ 1c å‘é€ä¸€ä¸ª eBGP æŠ¥æ–‡ AS2 AS3 x
<br>ç½‘å…³ 1c å‘ AS1 ä¸­æ‰€æœ‰è·¯ç”±å™¨å‘é€ iBGP æŠ¥æ–‡ AS2 AS3 x


<br>å®é™…ç½‘ç»œä¸­ä»æŸä¸ªç»™å®šçš„è·¯ç”±å™¨åˆ°ç›®çš„åœ°å¯èƒ½æœ‰å¤šæ¡ä¸åŒçš„è·¯å¾„
<br><br>
<br>è·¯ç”±å™¨é€šè¿‡è¿æ¥é€šå‘Šå‰ç¼€æ—¶ï¼Œåœ¨å‰ç¼€ä¸­åŒ…æ‹¬ä¸€äº› BGP å±æ€§ (BGP  attribute)
<br>æŒ‰ BGP æœ¯è¯­æ¥è¯´ï¼Œå‰ç¼€åŠå…¶å±æ€§ç§°ä¸ºè·¯ç”± (route) 

<br>AS-PATHï¼šåŒ…å«äº†é€šå‘Šå·²ç»é€šè¿‡çš„ AS çš„åˆ—è¡¨ï¼Œå¦‚æœè·¯ç”±å™¨åœ¨è·¯å¾„åˆ—è¡¨ä¸­çœ‹è§äº†åŒ…å«è‡ªå·±çš„ AS åˆ™ä¼šæ‹’ç»è¯¥é€šå‘Šï¼Œä»¥é˜²æ­¢ç¯è·¯
<br>NEXT-HOPï¼šAS-PATH ä»å·¦åˆ°å³èµ·å§‹çš„è·¯ç”±å™¨æ¥å£çš„ IP åœ°å€ï¼Œå³æœ€åç»è¿‡çš„ AS (AS2) çš„ç½‘å…³è·¯ç”±å™¨å‡ºç«¯å£çš„ IP åœ°å€ï¼Œè™½ç„¶æ˜¯ä¸å±äºå½“å‰ AS (AS1) çš„è·¯ç”±å™¨çš„ IP åœ°å€ï¼Œä½†æ˜¯åŒ…å«è¯¥ IP åœ°å€çš„å­ç½‘ç›´æ¥è¿æ¥åˆ° AS1


<br>ä¸€æ®µå®é™…çš„ BGP æ¶ˆæ¯ <img alt="Pasted image 20231127172612.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231127172612.png">
<br>BGP Message
    Type: UPDATE Message
    Path Attributes:
        Path Attribute - Origin: IGP
        Path Attribute - AS_PATH: 64500 64496
        Path Attribute - NEXT_HOP: 198.51.100.1
        Path Attribute - COMMUNITIES: 64500:13335
        Path Attribute - Multi Exit Discriminator (MED): 100
    Network Layer Reachability Information (NLRI):
        192.0.2.0/24
Copy<br><br>
<br>è¿è¡Œçƒ­åœŸè±†è·¯ç”±é€‰æ‹©ç®—æ³•çš„è·¯ç”±ï¼Œå½“è·¯ç”±å™¨æ”¶åˆ°åˆ°è¾¾å‰ç¼€ x çš„å¤šæ¡ BGP è·¯ç”±æ—¶ï¼Œé€šè¿‡ AS å†…éƒ¨è·¯ç”±é€‰æ‹©ä¿¡æ¯é€‰æ‹©åˆ°è¾¾æ¯ä¸ªç½‘å…³çš„æœ€ä½å¼€é”€è·¯å¾„ (å‡ ä¸ªç½‘å…³å°±æœ‰å‡ æ¡)ï¼Œå¹¶é€‰æ‹©è¿™äº›è·¯å¾„ä¸­å…·æœ‰æœ€ä½å¼€é”€çš„é‚£æ¡ï¼Œå°†é€šå¾€è¿™æ¡è·¯å¾„çš„æ¥å£ I çš„è½¬å‘è¡¨é¡¹ (x, I) åŠ å…¥è½¬å‘è¡¨ä¸­ <img alt="Pasted image 20231128095437.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231128095437.png">
<br>çƒ­åœŸè±†è·¯ç”±é€‰æ‹©æ˜¯è‡ªç§çš„ç®—æ³•ï¼Œè¯•å›¾å‡å°åœ¨è‡ªèº« AS ä¸­çš„å¼€é”€ï¼Œå°½å¯èƒ½å¿«åœ°ä»¥æœ€ä½å¼€é”€å°†åˆ†ç»„é€å‡ºè‡ªèº« AS 
<br><br>
<br>å¯¹äºä»»ä½•ç»™å®šçš„ç›®çš„åœ°å‰ç¼€ï¼Œè¿›å…¥ BGP çš„è·¯ç”±é€‰æ‹©è¾“å…¥æ˜¯åˆ°æŸå‰ç¼€çš„æ‰€æœ‰<a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢ > ^a1cf89" data-href="ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢#^a1cf89" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢.html#^a1cf89" class="internal-link" target="_self" rel="noopener">è·¯ç”±</a>çš„é›†åˆï¼Œå¦‚æœåˆ°ç›¸åŒçš„å‰ç¼€æœ‰ä¸€æ¡è¿™æ ·çš„è·¯ç”±ï¼ŒBGP é€‰æ‹©è¯¥è·¯ç”±ï¼Œå¦‚æœæœ‰å¤šæ¡è¿™æ ·çš„è·¯ç”±ï¼Œåˆ™é¡ºåºåœ°è°ƒç”¨ä¸‹åˆ—æ¶ˆé™¤è§„åˆ™ç›´åˆ°åªå‰©ä¸€æ¡è·¯ç”± <img alt="Pasted image 20231128100312.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231128100312.png">

<br>Local-preferenceï¼šå–å†³äºç½‘ç»œç®¡ç†å‘˜çš„è®¾ç½®ï¼Œå¯èƒ½ç”±è·¯ç”±å™¨è®¾ç½®æˆ–ä»ç›¸åŒ AS ä¸­çš„å…¶å®ƒè·¯ç”±å™¨å­¦ä¹ åˆ°
<br>AS-PATHï¼šä»å…·æœ‰ç›¸åŒçš„ local-preference çš„è·¯ç”±ä¸­ï¼Œé€‰æ‹©å…·æœ‰æœ€çŸ­ AS-PATH çš„è·¯å¾„ï¼Œå¦‚æœè¯¥è§„åˆ™æ˜¯è·¯ç”±é€‰æ‹©çš„å”¯ä¸€è§„åˆ™ï¼ŒBGP ä½¿ç”¨<a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢ > DV ç®—æ³•" data-href="ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢#DV ç®—æ³•" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢.html#DV_ç®—æ³•" class="internal-link" target="_self" rel="noopener">è·ç¦»å‘é‡ç®—æ³•</a>å†³å®šè·¯å¾„ï¼Œå…¶ä¸­è·ç¦»æµ‹åº¦ä½¿ç”¨ AS è·³çš„è·³æ•°è€Œä¸æ˜¯è·¯ç”±å™¨è·³çš„è·³æ•°
<br>Hot Potato Routing (å›¾ä¸­æ²¡æœ‰å‘ˆç°)ï¼šé€‰æ‹©æœ€é è¿‘ NEXT-HOP è·¯ç”±å™¨çš„è·¯ç”±
<br>å…¶ä»– BGP æ ‡è¯†ç¬¦


<br><br><img alt="Pasted image 20231128101839.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231128101839.png"><br>
<br>åŠ¨æœº

<br>åœ¨è®¸å¤šåˆ†æ•£çš„ä¸åŒåœ°ç†ä½ç½®ï¼Œæ›¿æ¢ä¸åŒæœåŠ¡å™¨ä¸Šçš„ç›¸åŒå†…å®¹
<br>è®©æ¯ä¸ªç”¨æˆ·ä»æœ€é è¿‘çš„æœåŠ¡å™¨è®¿é—®å†…å®¹


<br>é…ç½®æ—¶ï¼ŒCDN å…¬å¸ä¸ºå¤šå°æœåŠ¡å™¨æŒ‡æ´¾ç›¸åŒçš„ IP åœ°å€ï¼Œå¹¶ä½¿ç”¨æ ‡å‡† BGP ä»è¿™äº›æœåŠ¡å™¨çš„æ¯å°æ¥é€šå‘Š IP åœ°å€ï¼Œå½“ BGP è·¯ç”±å™¨æ”¶åˆ°å¯¹è¯¥ IP åœ°å€çš„å¤šä¸ªè·¯ç”±é€šå‘Šï¼Œä»–å°†è¿™äº›é€šå‘Šå¤„ç†ä¸ºå¯¹ç›¸åŒçš„ç‰©ç†ä½ç½®æä¾›ä¸ç”¨çš„è·¯å¾„ï¼Œé…ç½®è·¯ç”±é€‰æ‹©è¡¨æ—¶ï¼Œè·¯ç”±å™¨å°†æœ¬åœ°åŒ–ä½¿ç”¨ <a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢ > è·¯ç”±å™¨é€‰æ‹©ç®—æ³•" data-href="ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢#è·¯ç”±å™¨é€‰æ‹©ç®—æ³•" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢.html#è·¯ç”±å™¨é€‰æ‹©ç®—æ³•" class="internal-link" target="_self" rel="noopener">BGP è·¯ç”±é€‰æ‹©ç®—æ³•</a> æ‰¾åˆ°åˆ° IP åœ°å€æœ€å¥½çš„è·¯ç”±
<br>å½“æŸå®¢æˆ·è¯·æ±‚è§†é¢‘æ—¶ï¼ŒCDN å‘å®¢æˆ·è¿”å›ç”±åœ°ç†ä¸Šåˆ†æ•£çš„æœåŠ¡å™¨ä½¿ç”¨çš„å…±åŒçš„ IP åœ°å€ (æ³¨æ„å’Œ<a data-tooltip-position="top" aria-label="åº”ç”¨å±‚ > é›†ç¾¤é€‰æ‹©ç­–ç•¥" data-href="åº”ç”¨å±‚#é›†ç¾¤é€‰æ‹©ç­–ç•¥" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/åº”ç”¨å±‚.html#é›†ç¾¤é€‰æ‹©ç­–ç•¥" class="internal-link" target="_self" rel="noopener">é›†ç¾¤é€‰æ‹©ç­–ç•¥</a>åŒºåˆ†)ï¼Œæœ€è¿‘çš„æœåŠ¡å™¨æ˜¯ BGP è·¯ç”±é€‰æ‹©ç®—æ³•å®šä¹‰çš„
<br>ç”±äº BGP è·¯ç”±é€‰æ‹©çš„å˜åŒ–ä¼šå¯¼è‡´ TCP è¿æ¥çš„ä¸åŒåˆ†ç»„åˆ°è¾¾ Web æœåŠ¡å™¨çš„ä¸åŒå®ä¾‹ï¼Œæ‰€ä»¥å®è·µä¸­ CDN é€šå¸¸é€‰æ‹©ä¸ä½¿ç”¨ Anycastï¼Œä½† IP ä»»æ’­è¢«å¹¿æ³›ç”¨äºå°† DNS è¯·æ±‚æŒ‡å‘æœ€è¿‘çš„ DNS æ ¹æœåŠ¡å™¨ï¼ŒAnycast å¯ä»¥å°†è¯·æ±‚è·¯ç”±åˆ°è´Ÿè´£è¯¥åœ°å€çš„æœ€è¿‘çš„ DNS æœåŠ¡å™¨
<br>ä¸å¦¨åœ¨é¡µé¢ä¸ŠæŸ¥æ‰¾ä¸€ä¸‹è·ç¦»æœ€è¿‘çš„ DNS æœåŠ¡å™¨
<br><br><br><img alt="Pasted image 20231128111424.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231128111424.png"><br><br>
<br>åœ¨è·¯ç”±é€‰æ‹©ç®—æ³•ä¸­ï¼Œé¦–å…ˆæ ¹æ®æœ¬åœ°åå¥½å±æ€§é€‰æ‹©è·¯ç”±ï¼Œæœ¬åœ°åå¥½å€¼ç”±æœ¬åœ° AS çš„ç­–ç•¥å†³å®š
<br>å¦‚å›¾æ‰€ç¤ºçš„è‡ªæ²»ç³»ç»Ÿï¼Œå‡è®¾ W X Y æ˜¯æ¥å…¥ ISP ï¼ŒA B C æ˜¯ä¸»å¹²æä¾›å•†ç½‘ç»œï¼Œå¹¶ä¸”å½¼æ­¤å‘é€æµé‡å¹¶å‘å®¢æˆ·ç½‘ç»œæä¾›å…¨éƒ¨çš„ BGP ä¿¡æ¯ï¼Œæ‰€æœ‰è¿›å…¥ä¸€ä¸ªæ¥å…¥ ISP ç½‘ç»œçš„æµé‡å¿…å®šæ˜¯ä»¥è¯¥ç½‘ç»œä¸ºç›®çš„åœ°ï¼Œæ‰€æœ‰ç¦»å¼€ä¸€ä¸ªæ¥å…¥ ISP ç½‘ç»œçš„æµé‡å¿…å®šæºäºè¯¥ç½‘ç»œ<img alt="Pasted image 20231128142543.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231128142543.png">
<br>X æ˜¯ä¸€ä¸ª<a data-tooltip-position="top" aria-label="å› ç‰¹ç½‘ > ^2dad47" data-href="å› ç‰¹ç½‘#^2dad47" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html#^2dad47" class="internal-link" target="_self" rel="noopener">å¤šå®¿</a>æ¥å…¥ ISPï¼ŒX å¦‚æœå‘ B å’Œ C é€šå‘Šå®ƒæ²¡æœ‰é€šå‘é™¤è‡ªèº«å¤–ä»»ä½•å…¶ä»–ç›®çš„åœ°çš„è·¯å¾„ï¼Œé‚£ä¹ˆå®ƒå°†èµ·åˆ°ä¸€ä¸ªæ¥å…¥ ISP çš„ä½œç”¨
<br>å•†ä¸š ISP éµä»çš„ç»éªŒæ³•åˆ™ï¼šä»»ä½•ç©¿è¶ŠæŸ ISP ä¸»å¹²ç½‘çš„æµé‡å¿…é¡»æ˜¯å…¶æºæˆ–è€…ç›®çš„ (æˆ–ä¸¤è€…) ä½äºè¯¥ ISP çš„æŸä¸ªç½‘ç»œä¸­
<br><br>
<br>SDN ä½“ç³»ç»“æ„çš„å››ä¸ªå…³é”®ç‰¹å¾

<br>åŸºäºæµçš„è½¬å‘
<br>æ•°æ®å¹³é¢å’Œæ§åˆ¶å¹³é¢åˆ†ç¦»ï¼šç½‘ç»œäº¤æ¢æœºåœ¨æµè¡¨ä¸­æ‰§è¡Œ"åŒ¹é…åŠ åŠ¨ä½œ"è§„åˆ™ï¼Œæ§åˆ¶å¹³é¢ç”±æœåŠ¡å™¨å’Œå†³å®šç®¡ç†äº¤æ¢æœºæµè¡¨çš„è½¯ä»¶ç»„æˆ
<br>ç½‘ç»œæ§åˆ¶åŠŸèƒ½ï¼šæ§åˆ¶å¹³é¢è‡ªèº«ç”± SDN æ§åˆ¶å™¨å’Œç½‘ç»œæ§åˆ¶åº”ç”¨ç¨‹åºç»„æˆ
<br>å¯ç¼–ç¨‹çš„ç½‘ç»œ


<br>SDN ä¸­æ•°æ®å¹³é¢äº¤æ¢æœºã€SDN æ§åˆ¶å™¨å’Œç½‘ç»œæ§åˆ¶åº”ç”¨ç¨‹åºæ˜¯åˆ†ç¦»çš„å®ä½“ï¼Œå¯ä»¥ç”±ä¸åŒçš„å‚å•†å’Œç»„ç»‡æœºæ„æä¾›
<br><br>
<br>æ§åˆ¶å™¨çš„åŠŸèƒ½å±‚æ¬¡

<br>é€šä¿¡å±‚ï¼šSDN æ§åˆ¶å™¨å’Œå—æ§è®¾å¤‡é—´çš„é€šä¿¡ï¼Œè®¾å¤‡éœ€è¦æƒ³æ§åˆ¶å™¨ä¼ é€’æœ¬åœ°è§‚å¯Ÿåˆ°çš„äº‹ä»¶ï¼Œé€šè¿‡"å—å‘"æ¥å£ä¸å—æ§è®¾å¤‡é€šä¿¡
<br>ç½‘ç»œèŒƒå›´çŠ¶æ€ç®¡ç†å±‚
<br>å¯¹äºç½‘ç»œæ§åˆ¶åº”ç”¨ç¨‹åºå±‚çš„æ¥å£ ï¼šé€šè¿‡"åŒ—å‘"æ¥å£ä¸ç½‘ç»œæ§åˆ¶åº”ç”¨ç¨‹åºäº¤äº’ï¼Œå…è®¸ç½‘ç»œæ§åˆ¶åº”ç”¨ç¨‹åºåœ¨çŠ¶æ€ç®¡ç†å±‚ä¹‹é—´è¯» / å†™ç½‘ç»œçŠ¶æ€å’Œæµè¡¨


<br>å‡ºäºæ•…éšœå®¹å¿ã€é«˜å¯ç”¨æ€§æˆ–æ€§èƒ½ç­‰æ–¹é¢çš„è€ƒè™‘ï¼Œåœ¨å®è·µä¸­è¿™äº›æœåŠ¡å’Œç”¨äºä¿æŒçŠ¶æ€ä¿¡æ¯çš„æ•°æ®åº“ä¸€èˆ¬é€šè¿‡åˆ†å¸ƒå¼æœåŠ¡å™¨é›†åˆå®ç°
<br><br>
<br>OpenFlow åè®®è¿è¡Œåœ¨ SDN æ§åˆ¶å™¨å’Œ SDN æ§åˆ¶çš„äº¤æ¢æœºæˆ–å…¶ä»–å®ç° OpenFlow API çš„è®¾å¤‡ä¹‹é—´
<br>OpenFlow åè®®è¿è¡Œåœ¨ TCP ä¹‹ä¸Šï¼Œä½¿ç”¨ 6653 é»˜è®¤ç«¯å£å·
<br>åœ¨æ§åˆ¶å™¨ -&gt; å—æ§äº¤æ¢æœºæµåŠ¨çš„é‡è¦æŠ¥æ–‡

<br>é…ç½®ï¼šè®¾ç½®äº¤æ¢æœºçš„é…ç½®å‚æ•°
<br>ä¿®æ”¹çŠ¶æ€ï¼šå¢åŠ  / åˆ é™¤æˆ–ä¿®æ”¹äº¤æ¢æœºæµè¡¨ä¸­çš„è¡¨é¡¹ï¼Œå¹¶è®¾ç½®äº¤æ¢æœºçš„ç«¯å£ç‰¹æ€§
<br>è¯»çŠ¶æ€ï¼šä»äº¤æ¢æœºçš„æµè¡¨å’Œç«¯å£æ‰‹æœºç»Ÿè®¡æ•°æ®å’Œè®¡æ•°å™¨å€¼
<br>å‘é€åˆ†ç»„ï¼šä»¤å—æ§äº¤æ¢æœºåœ¨ç‰¹å®šçš„ç«¯å£å‘é€ä¸€ä¸ªç‰¹å®šçš„æŠ¥æ–‡


<br>ä»å—æ§äº¤æ¢æœº -&gt; æ§åˆ¶å™¨æµåŠ¨çš„æŠ¥æ–‡ 

<br>æµåˆ é™¤ï¼šé€šçŸ¥æ§åˆ¶å™¨å·²åˆ é™¤ä¸€ä¸ªæµè¡¨é¡¹
<br>ç«¯å£çŠ¶æ€ï¼šå‘æ§åˆ¶å™¨é€šçŸ¥ç«¯å£çŠ¶æ€å˜åŒ– 
<br>åˆ†ç»„å…¥ï¼š<a data-href="ç½‘ç»œå±‚-æ•°æ®å¹³é¢#åŠ¨ä½œ" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ•°æ®å¹³é¢.html#åŠ¨ä½œ" class="internal-link" target="_self" rel="noopener">ç½‘ç»œå±‚-æ•°æ®å¹³é¢ &gt; åŠ¨ä½œ</a> åˆ°è¾¾äº¤æ¢æœºç«¯å£çš„åˆ†ç»„ä¸èƒ½ä¸ä»»ä½•æµè¡¨é¡¹åŒ¹é…ï¼Œåˆ†ç»„ä¼šè¢«å‘é€ç»™æ§åˆ¶å™¨è¿›è¡Œé¢å¤–å¤„ç†


<br><br><img alt="Pasted image 20231129100416.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231129100416.png" style="width: 500px; max-width: 100%;"><br>
<br>ä¸ <a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢ > ^2d047c" data-href="ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢#^2d047c" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢.html#^2d047c" class="internal-link" target="_self" rel="noopener">æ¯è·¯ç”±å™¨æ§åˆ¶</a> ä¸åŒçš„æ˜¯ï¼Œåœ¨ä¸Šå›¾çš„ SDN åœºæ™¯ä¸­

<br>Dijkstra ç®—æ³•ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ç¨‹åºæ‰§è¡Œï¼Œä½äºåˆ†ç»„äº¤æ¢æœºå¤–éƒ¨
<br>åˆ†ç»„äº¤æ¢æœºç›¸ SDN æ§åˆ¶å™¨å‘é€é“¾è·¯æ›´æ–°ä¸”ä¸ç›¸äº’å‘é€


<br>å‡è®¾è·¯ç”±å™¨ S1 å’Œ S2 ä¹‹é—´çš„é“¾è·¯çŠ¶æ€å‘ç”Ÿå˜åŒ–

<br>S1 ç»å†äº†é“¾è·¯æ•…éšœï¼Œé€šè¿‡<a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢ > ^47cfcb" data-href="ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢#^47cfcb" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢.html#^47cfcb" class="internal-link" target="_self" rel="noopener">ç«¯å£çŠ¶æ€</a>æŠ¥æ–‡é€šçŸ¥ SDN æ§åˆ¶å™¨é“¾è·¯çŠ¶æ€çš„æ›´æ–°
<br>SDN æ§åˆ¶å™¨æ¥æ”¶åˆ°äº†æŠ¥æ–‡ï¼Œé€šå‘Šé“¾è·¯çŠ¶æ€ç®¡ç†å™¨æ›´æ–°é“¾è·¯çŠ¶æ€åº“
<br>Dijkstra é“¾è·¯çŠ¶æ€è·¯ç”±é€‰æ‹©åº”ç”¨ç¨‹åºè¿›è¡Œäº†æ³¨å†Œï¼Œå½“é“¾è·¯çŠ¶æ€æ›´æ–°æ—¶ï¼Œåº”ç”¨ç¨‹åºæ¥æ”¶åˆ°å…³äºé“¾è·¯çŠ¶æ€æ›´æ–°çš„é€šå‘Š
<br>åº”ç”¨ç¨‹åºä¸é“¾è·¯çŠ¶æ€ç®¡ç†å™¨ç›¸äº’ä½œç”¨ï¼Œå¾—åˆ°æ›´æ–°çš„é“¾è·¯çŠ¶æ€ï¼Œå‚è€ƒçŠ¶æ€ç®¡ç†å±‚ä¸­çš„å…¶ä»–ç»„ä»¶ï¼Œè®¡ç®—æ–°çš„æœ€ä½å¼€é”€è·¯å¾„
<br>é“¾è·¯çŠ¶æ€è·¯ç”±é€‰æ‹©åº”ç”¨äºæµè¡¨ç®¡ç†å™¨äº¤äº’ï¼Œæµè¡¨ç®¡ç†å™¨å†³å®šæ›´æ–°çš„æµè¡¨
<br>æµè¡¨ç®¡ç†å™¨ä½¿ç”¨ OpenFlow åè®®æŠ¥æ–‡æ›´æ–° s1ã€s2 å’Œ s4 çš„æµè¡¨


<br><br>
<br>ICMP çš„å…¸å‹ç”¨é€”æ˜¯å·®é”™æŠ¥å‘Š
<br>ICMP æŠ¥æ–‡ä½œä¸º IP æœ‰æ•ˆè½½è·æ‰¿è½½
<br>ICMP å¤§éƒ¨åˆ†ç±»å‹æŠ¥æ–‡æ ¼å¼ (è¯¦è§ RFC )
<br>	0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Type      |     Code      |          Checksum             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             unused                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Internet Header + 64 bits of Original Data Datagram      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
Copy<br>
<br>Traceroute ç”¨ ICMP æŠ¥æ–‡å®ç°ï¼Œåœ¨åº”ç”¨ nexttrace ä¸­å‘ç›®çš„åœ°ä¸»æœºå‘é€ä¸€ç³»åˆ— ttl é€’å¢çš„ ICMP æŠ¥æ–‡ï¼Œå½“ç¬¬ n å’Œæ•°æ®æŠ¥åˆ°è¾¾ç¬¬ n å°è·¯ç”±å™¨æ—¶ï¼Œæ•°æ®æŠ¥ TTL è¿‡æœŸï¼Œè·¯ç”±å™¨ä¸¢å¼ƒæ•°æ®æŠ¥å¹¶å›é€ä¸€ä¸ª ICMP å‘Šè­¦æŠ¥æ–‡ (Type 11 Code 0) ï¼Œå½“æ•°æ®æŠ¥åˆ°è¾¾ç›®çš„åœ°ç›®çš„ä¸»æœºä¼šé€ä¸€ä¸ª ICMP å›æ˜¾æŠ¥æ–‡ (Type 0 Code 0)ï¼Œç¨‹åºä¸å†å‘é€æ¢æµ‹åˆ†ç»„ <img alt="Pasted image 20231129115455.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231129115455.png"> <img alt="Pasted image 20231129115749.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231129115749.png"> <img alt="Pasted image 20231129115525.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231129115525.png">
<br>RFC 4443 [@guptaInternetControlMessage2006] ï¼Œæ–°å¢äº† IPv6 æ‰€éœ€çš„æ–°ç±»å‹å’Œç¼–ç ï¼ŒåŒ…æ‹¬"åˆ†ç»„å¤ªå¤§"ç±»å‹å’Œ"æœªè¢«æ‰¿è®¤çš„ IPv6 é€‰é¡¹"å·®é”™ç¼–ç 
<br><br>
<br>ç½‘ç»œç®¡ç†çš„å®šä¹‰ï¼šç½‘ç»œç®¡ç†åŒ…æ‹¬äº†ç¡¬ä»¶ã€è½¯ä»¶å’Œäººç±»å…ƒç´ çš„è®¾ç½®ã€ç»¼åˆå’Œåè°ƒï¼Œä»¥ç›‘è§†ã€æµ‹è¯•ã€è½®è¯¢ã€é…ç½®ã€åˆ†æã€è¯„ä»·å’Œæ§åˆ¶ç½‘ç»œåŠç½‘å…ƒèµ„æºï¼Œç”¨åˆç†çš„æˆæœ¬æ»¡è¶³å®æ—¶æ€§ã€è¿è¥æ€§èƒ½å’ŒæœåŠ¡è´¨é‡çš„è¦æ±‚
<br><br><img alt="Pasted image 20231129154719.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231129154719.png" style="width: 500px; max-width: 100%;"><br>
<br>ç®¡ç†æœåŠ¡å™¨ (managing server)ï¼šè¿è¡Œåœ¨ç½‘ç»œè¿è¥ä¸­å¿ƒ (NOC) çš„é›†ä¸­å¼ç½‘ç»œç®¡ç†å·¥ä½œç«™ä¸Šï¼Œæ‰§è¡Œç½‘ç»œç®¡ç†æ´»åŠ¨
<br>è¢«ç®¡è®¾å¤‡ (managed device)ï¼šä¸€ä¸ªè¢«ç®¡è®¾å¤‡åŒ…å«å‡ ä¸ªè¢«ç®¡å¯¹è±¡ (managed object)ï¼Œè¢«ç®¡å¯¹è±¡å¯ä»¥æ˜¯è¢«ç®¡è®¾å¤‡ä¸­ç¡¬ä»¶çš„å®é™…éƒ¨åˆ†æˆ–ç”¨äºè¿™äº›ç¡¬ä»¶åŠè½¯ä»¶ç»„ä»¶çš„é…ç½®å‚æ•°
<br>ç®¡ç†ä¿¡æ¯åº“ (Management Information baseBase, MIB)ï¼šæ”¶é›†è¢«ç®¡è®¾å¤‡ä¸­æ¯ä¸ªè¢«ç®¡å¯¹è±¡çš„å…³è”ä¿¡æ¯ï¼ŒMIB å¯¹è±¡ç”±ç§°ä¸º SMI (Structure of Management Information) çš„æ•°æ®æè¿°è¯­è¨€æ‰€å®šä¹‰
<br>ç½‘ç»œç®¡ç†ä»£ç† (network management agent)ï¼šä¸ç®¡ç†æœåŠ¡å™¨é€šä¿¡ï¼Œåœ¨ç®¡ç†æœåŠ¡å™¨çš„å‘½ä»¤å’Œæ§åˆ¶ä¸‹åœ¨è¢«ç®¡è®¾å¤‡ä¸­é‡‡å–æœ¬åœ°åŠ¨ä½œ
<br>ç½‘ç»œç®¡ç†åè®® (network management protocol)
<br><br>
<br>ç®€å•ç½‘ç»œç®¡ç†åè®® (Simple Network Management Protocol)ï¼šåº”ç”¨å±‚åè®®ï¼Œç”¨äºåœ¨ç®¡ç†æœåŠ¡å™¨å’Œä»£ç†ä¹‹é—´ä¼ é€’ç½‘ç»œç®¡ç†æ§åˆ¶å’Œä¿¡æ¯æŠ¥æ–‡
<br>æœ€å¸¸ä½¿ç”¨çš„æ˜¯è¯·æ±‚å“åº”æ¨¡å¼ï¼ŒSNMP ç®¡ç†æœåŠ¡å™¨å‘ SNMP ä»£ç†å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œä»£ç†æ”¶åˆ°è¯·æ±‚åï¼Œæ‰§è¡ŒåŠ¨ä½œå¹¶å›é€æŠ¥æ–‡
<br>ä»£ç†å‘æœåŠ¡å™¨å‘é€é™·é˜±æŠ¥æ–‡ (trap message)ï¼Œç”¨äºé€šçŸ¥ç®¡ç†æœåŠ¡å™¨å¼‚å¸¸çš„å‘ç”Ÿå¯¼è‡´äº† MIB å¯¹è±¡å€¼çš„æ”¹å˜
<br>SNMP æŠ¥æ–‡ç±»å‹å¦‚ä¸‹ <img alt="Pasted image 20231129160250.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231129160250.png">

<br>æŠ¥æ–‡ä¸€èˆ¬è¢«ç§°ä¸ºåè®®æ•°æ®å•å…ƒ (PDU)
<br>GetRequestã€GetNextRequest å’Œ GetBulkRequest PDU éƒ½æ˜¯ç”±ç®¡ç†æœåŠ¡å™¨å‘ä»£ç†å‘é€ï¼Œç”¨äºè¯·æ±‚ä¸€ä¸ªæˆ–å¤šä¸ª MIB å¯¹è±¡å€¼
<br>ç®¡ç†æœåŠ¡å™¨ä½¿ç”¨ SetRequest PDUï¼Œæ¥è®¾ç½®è¢«ç®¡è®¾å¤‡çš„ä¸€ä¸ªæˆ–å¤šä¸ª MIB å¯¹è±¡å€¼ï¼Œä»£ç†ç”¨å¸¦æœ‰"noError"çš„ Response PDU è¿›è¡Œåº”ç­”
<br>InformRequest PDU ç”¨äºé€šçŸ¥å¦ä¸€ä¸ª MIB ä¿¡æ¯ç®¡ç†æœåŠ¡å™¨
<br>é™·é˜±æŠ¥æ–‡å¼‚æ­¥äº§ç”Ÿï¼Œä¸ºäº†å“åº”ç®¡ç†æœåŠ¡å™¨è¦æ±‚çš„äº‹ä»¶


]]></description><link>campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢.html</link><guid isPermaLink="false">Campus/Chinese-Notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ§åˆ¶å¹³é¢.md</guid><pubDate>Fri, 22 Dec 2023 11:04:20 GMT</pubDate><enclosure url="campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231122115215.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231122115215.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[ç½‘ç»œå±‚æ¦‚è¿°]]></title><description><![CDATA[ 
 <br><br>
<br>ç½‘ç»œå±‚çš„åˆ†è§£

<br>æ•°æ®å¹³é¢
<br>æ§åˆ¶å¹³é¢


<br>æ•°æ®å¹³é¢åŠŸèƒ½:ç½‘ç»œä¸­æ¯å°è·¯ç”±å™¨çš„åŠŸèƒ½ï¼Œå†³å®šåˆ°è¾¾è·¯ç”±å™¨è¾“å…¥é“¾è·¯ä¹‹ä¸€çš„æ•°æ®æŠ¥å¦‚ä½•è½¬å‘åˆ°è¯¥è·¯ç”±å™¨çš„è¾“å‡ºé“¾è·¯ä¹‹ä¸€

<br>ä¼ ç»Ÿ IP è½¬å‘ (è½¬å‘åŸºäºæ•°æ®æŠ¥çš„ç›®çš„åœ°å€)
<br>é€šç”¨è½¬å‘ (ä½¿ç”¨æ•°æ®æŠ¥é¦–éƒ¨ä¸­å‡ ä¸ªä¸åŒåŸŸæ‰§è¡Œè½¬å‘å’Œå…¶ä»–åŠŸèƒ½)


<br>æ§åˆ¶å¹³é¢åŠŸèƒ½:ç½‘ç»œèŒƒå›´çš„é€»è¾‘ï¼Œæ§åˆ¶æ•°æ®æŠ¥æ²¿ç€ä»æºä¸»æœºæ²¿ç€åˆ°ç›®çš„ä¸»æœºçš„ç«¯åˆ°ç«¯è·¯å¾„ä¸­è·¯ç”±å™¨çš„è·¯ç”±æ–¹å¼

<br>è·¯ç”±é€‰æ‹©ç®—æ³•


<br>è½¯ä»¶å®šä¹‰ç½‘ç»œ(Software-Defined Networking, SDN):å°†æ§åˆ¶å¹³é¢åŠŸèƒ½ä½œä¸ºä¸€ç§å•ç‹¬æœåŠ¡ï¼Œæ˜ç¡®åœ°åˆ†ç¦»æ•°æ®å¹³é¢å’Œæ§åˆ¶å¹³é¢
<br><br>
<br>è½¬å‘(forwarding):å°†åˆ†ç»„ä»ä¸€ä¸ªè¾“å…¥é“¾è·¯æ¥å£è½¬ç§»åˆ°é€‚å½“çš„è¾“å‡ºé“¾è·¯æ¥å£çš„è·¯ç”±å™¨æœ¬åœ°åŠ¨ä½œ

<br>æ•°æ®å¹³é¢ä¸­å®ç°çš„å”¯ä¸€åŠŸèƒ½
<br>åˆ†ç»„æœ‰å¯èƒ½è¢«ç°æœ‰çš„è·¯ç”±å™¨é˜»æŒ¡ä¹Ÿæœ‰å¯èƒ½å†—ä½™çš„ç»è¿‡å¤šæ¡é“¾è·¯å‘é€


<br>è·¯ç”±é€‰æ‹©(routing):ç¡®å®šåˆ†ç»„ä»æºåˆ°ç›®çš„åœ°æ‰€é‡‡å–çš„ç«¯åˆ°ç«¯è·¯å¾„çš„ç½‘ç»œèŒƒå›´å¤„ç†è¿‡ç¨‹ï¼Œé€šå¸¸ç”¨è½¯ä»¶æ¥å®ç°

<br>è·¯ç”±é€‰æ‹©ç®—æ³•(routing algorithm):è®¡ç®—åˆ†ç»„ä»å‘é€æ–¹æµå‘æ¥æ”¶æ–¹æ—¶é‡‡ç”¨çš„è·¯ç”±æˆ–è·¯å¾„
<br>åœ¨æ§åˆ¶å¹³é¢ä¸­å®ç°


<br>è½¬å‘è¡¨(forwarding table):è·¯ç”±å™¨æ£€æŸ¥åˆ°è¾¾åˆ†ç»„é¦–éƒ¨çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µå€¼ï¼Œè¿›è€Œä½¿ç”¨è¿™äº›é¦–éƒ¨å€¼åœ¨å…¶è½¬å‘è¡¨ä¸­ç´¢å¼•
<br>è½¬å‘è¡¨çš„é…ç½®

<br>æ§åˆ¶å¹³é¢:ä¼ ç»Ÿæ–¹æ³•

<br>è·¯ç”±é€‰æ‹©ç®—æ³•å†³å®šäº†æ’å…¥è·¯ç”±å™¨è½¬å‘è¡¨çš„å†…å®¹ï¼Œåœ¨ä¸€å°è·¯ç”±å™¨ä¸­çš„è·¯ç”±é€‰æ‹©ç®—æ³•ä¸å…¶ä»–è·¯ç”±å™¨é‡çš„ç®—æ³•é€šä¿¡ï¼Œè®¡ç®—å‡ºè½¬å‘è¡¨çš„å€¼


<br>æ§åˆ¶å¹³é¢:SDNæ–¹æ³•<img alt="Pasted image 20231116172535.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231116172535.png">

<br>è·¯ç”±é€‰æ‹©è®¾å¤‡ä»…æ‰§è¡Œè½¬å‘ï¼Œè€Œè¿œç¨‹æ§åˆ¶å™¨è®¡ç®—å¹¶åˆ†å‘è½¬å‘è¡¨




<br>è½¯ä»¶å®šä¹‰ç½‘ç»œ (Software-Defined Networking, SDN) çš„æœ¬è´¨ï¼šè®¡ç®—è½¬å‘è¡¨å¹¶ä¸è·¯ç”±å™¨äº¤äº’çš„æ§åˆ¶å™¨æ˜¯ç”¨è½¯ä»¶å®ç°çš„ (æ§åˆ¶å™¨å¯èƒ½å®ç°åœ¨å…·æœ‰é«˜å¯é æ€§å’Œå†—ä½™çš„è¿œç¨‹æ•°æ®ä¸­å¿ƒä¸­)
<br><br>
<br>ç½‘ç»œæœåŠ¡æ¨¡å‹(network service model)å®šä¹‰äº†åˆ†ç»„åœ¨å‘é€å’Œæ¥æ”¶ç«¯ç³»ç»Ÿä¹‹é—´çš„ç«¯åˆ°ç«¯è¿è¾“ç‰¹æ€§
<br>è€ƒè™‘å‡ ç§ç½‘ç»œå±‚èƒ½æä¾›çš„å¯èƒ½çš„æœåŠ¡ï¼šå‚è€ƒ<a data-href="åº”ç”¨å±‚#å¯ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„è¿è¾“æœåŠ¡" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/åº”ç”¨å±‚.html#å¯ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„è¿è¾“æœåŠ¡" class="internal-link" target="_self" rel="noopener">åº”ç”¨å±‚ &gt; å¯ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„è¿è¾“æœåŠ¡</a>

<br>ç¡®ä¿äº¤ä»˜
<br>å…·æœ‰æ—¶å»¶ä¸Šç•Œçš„ç¡®ä¿äº¤ä»˜
<br>æœ‰åºåˆ†ç»„äº¤ä»˜
<br>ç¡®ä¿æœ€å°å¸¦å®½
<br>å®‰å…¨æ€§
<br>å¾ˆé—æ†¾çš„æ˜¯ï¼Œä»¥ä¸Šæåˆ°çš„æœåŠ¡ï¼Œå› ç‰¹ç½‘çš„ç½‘ç»œå±‚ä¸€ä¸ªä¹Ÿä¸æä¾›ï¼Œå› ç‰¹ç½‘çš„ç½‘ç»œå±‚æä¾›äº†å•ä¸€çš„æœåŠ¡ï¼Œç§°ä¸ºå°½åŠ›è€Œä¸ºæœåŠ¡ (best-effort service) æ²¡æœ‰æœåŠ¡å°±æ˜¯æœ€å¥½çš„æœåŠ¡


<br>å°½åŠ›è€Œä¸ºæœåŠ¡(best-effort service):å› ç‰¹ç½‘ç½‘ç»œå±‚æä¾›çš„å•ä¸€æœåŠ¡ï¼Œä¼ é€çš„åˆ†ç»„æ—¢ä¸èƒ½ä¿è¯ä»¥å‘é€çš„é¡ºåºè¢«æ¥æ”¶ï¼Œä¹Ÿä¸èƒ½ä¿è¯æœ€ç»ˆäº¤ä»˜ï¼Œæ—¢ä¸èƒ½ä¿è¯ç«¯åˆ°ç«¯æ—¶å»¶ï¼Œä¹Ÿä¸èƒ½ä¿è¯æœ‰æœ€å°çš„å¸¦å®½
<br>âš ï¸è½¬å‘å’Œäº¤æ¢è¿™ä¸¤ä¸ªæœ¯è¯­ç»å¸¸è¢«äº’æ¢ä½¿ç”¨
<br>åˆ†ç»„äº¤æ¢æœº:é€šç”¨åˆ†ç»„äº¤æ¢è®¾å¤‡ï¼Œæ ¹æ®åˆ†ç»„é¦–éƒ¨å­—æ®µä¸­çš„å€¼ï¼Œä»è¾“å…¥é“¾è·¯æ¥å£åˆ°è¾“å‡ºé“¾è·¯æ¥å£è½¬ç§»åˆ†ç»„

<br>é“¾è·¯å±‚äº¤æ¢æœº(link-layer switch):åŸºäºé“¾è·¯å±‚å¸§ä¸­çš„å­—æ®µå€¼åšå‡ºè½¬å‘å†³å®š
<br>è·¯ç”±å™¨(router):åŸºäºç½‘ç»œæ•°æ®æŠ¥ä¸­çš„é¦–éƒ¨å­—æ®µå€¼åšå‡ºè½¬å‘å†³å®š


<br><br>
<br>è·¯ç”±å™¨ç»„ä»¶<img alt="Pasted image 20231117111524.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231117111524.png">

<br>è¾“å…¥ç«¯å£(input port)

<br>ç»ˆç»“å…¥ç‰©ç†é“¾è·¯çš„ç‰©ç†å±‚åŠŸèƒ½
<br>ä¸ä½äºè¿œç«¯çš„æ•°æ®é“¾è·¯å±‚äº¤äº’æ¥æ‰§è¡Œæ•°æ®é“¾è·¯å±‚åŠŸèƒ½
<br>æŸ¥è¯¢è½¬å‘è¡¨å†³å®šè·¯ç”±å™¨çš„è¾“å‡ºç«¯å£
<br>æ§åˆ¶åˆ†ç»„ä»è¾“å…¥ç«¯å£(æŒ‡ç‰©ç†IOæ¥å£ï¼Œä¸è½¯ä»¶ç«¯å£ä¸åŒ)è½¬å‘åˆ°è·¯ç”±é€‰æ‹©å¤„ç†å™¨


<br>äº¤æ¢ç»“æ„:å°†è·¯ç”±å™¨çš„è¾“å…¥ç«¯å£è¿æ¥åˆ°è¾“å‡ºç«¯å£ï¼Œè¿™ç§äº¤æ¢ç»“æ„æ—¶ç½‘ç»œè·¯ç”±å™¨ä¸­çš„ç½‘ç»œ
<br>è¾“å‡ºç«¯å£:å­˜å‚¨ä»äº¤æ¢ç»“æ„æ¥æ”¶çš„åˆ†ç»„ï¼Œé€šè¿‡æ‰§è¡Œå¿…è¦çš„é“¾è·¯å±‚å’Œç‰©ç†å±‚åŠŸèƒ½åœ¨è¾“å‡ºé“¾è·¯ä¸Šä¼ è¾“è¿™äº›åˆ†ç»„(åŒå‘é“¾è·¯è¾“å‡ºç«¯å£æ€»æ˜¯å’Œè¾“å…¥ç«¯å£æˆå¯¹å‡ºç°åœ¨åŒä¸€çº¿è·¯å¡ä¸Š)
<br>è·¯ç”±é€‰æ‹©å¤„ç†å™¨:æ‰§è¡Œæ§åˆ¶å¹³é¢åŠŸèƒ½ï¼Œ

<br>ä¼ ç»Ÿè·¯ç”±å™¨:æ‰§è¡Œè·¯ç”±é€‰æ‹©åè®®ï¼Œç»´æŠ¤è·¯ç”±é€‰æ‹©è¡¨ä¸å…³è”é“¾è·¯çŠ¶æ€ä¿¡æ¯
<br>SDN è·¯ç”±å™¨:è´Ÿè´£ä¸è¿œç«¯æ§åˆ¶å™¨é€šä¿¡ï¼Œæ¥æ”¶ç”±è¿œç¨‹æ§åˆ¶å™¨è®¡ç®—çš„è½¬å‘è¡¨é¡¹




<br>è·¯ç”±å™¨çš„è¾“å…¥ç«¯å£ã€è¾“å‡ºç«¯å£å’Œäº¤æ¢ç»“æ„å‡ ä¹æ€»æ˜¯ç”¨ç¡¬ä»¶å®ç°
<br><br><img alt="Pasted image 20231117152150.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231117152150.png" style="width: 500px; max-width: 100%;"><br>
<br>è¾“å…¥ç«¯å£çš„çº¿è·¯ç«¯æ¥åŠŸèƒ½ä¸é“¾è·¯å±‚å¤„ç†å®ç°äº†ç”¨äºå„ä¸ªè¾“å…¥é“¾è·¯çš„ç‰©ç†å±‚å’Œé“¾è·¯å±‚
<br>è½¬å‘è¡¨ä»è·¯ç”±é€‰æ‹©å¤„ç†å™¨ç»è¿‡ç‹¬ç«‹æ€»çº¿ (eg. PCI) å¤åˆ¶åˆ°çº¿è·¯å¡
<br>ä½¿ç”¨æ¯ä¸ªè¾“å…¥ç«¯å£çš„å½±å­å‰¯æœ¬ï¼Œè½¬å‘å†³ç­–å¯åœ¨æ¯ä¸ªè¾“å…¥ç«¯å£æœ¬åœ°åšå‡ºï¼Œé¿å…äº†é›†ä¸­å¼å¤„ç†ç“¶é¢ˆ
<br>è·¯ç”±å™¨é€šè¿‡å‰ç¼€(prefix)åŒ¹é…æ¥è½¬å‘åˆ†ç»„ï¼Œå½“æœ‰å¤šä¸ªåŒ¹é…æ—¶ä½¿ç”¨æœ€é•¿å‰ç¼€åŒ¹é…è§„åˆ™(longest prefix matching rule) 
<br>åœ¨å‰æ¯”ç‰¹é€Ÿç‡ä¸‹ï¼ŒæŸ¥æ‰¾è½¬å‘è¡¨å¿…é¡»åœ¨çº³ç§’çº§æ‰§è¡Œï¼Œéœ€è¦å¯¹å¤§å‹è½¬å‘è¡¨ä½¿ç”¨è¶…å‡ºç®€å•çº¿æ€§æœç´¢çš„æŠ€æœ¯ï¼Œå®è·µä¸­å¸¸ç”¨ä¸‰æ€å†…å®¹å¯å¯»å€å­˜å‚¨å™¨(Tenary Content Address Memory, TCAM) æ¥æŸ¥æ‰¾ï¼Œä½¿ç”¨ TCAM ä¸€ä¸ª 32 ä½ IP åœ°å€å¯åœ¨å¸¸æ•°æ—¶é—´å†…è¿”å›å¯¹åº”çš„è½¬å‘è¡¨é¡¹ 
<br>åœ¨æŸäº›è®¾è®¡ä¸­ï¼Œå¦‚æœæ¥è‡ªå…¶ä»–è¾“å…¥è¾“å‡ºç«¯å£çš„åˆ†ç»„å½“å‰æ­£åœ¨ä½¿ç”¨è¯¥äº¤æ¢ç»“æ„ï¼Œä¸€ä¸ªåˆ†ç»„å¯èƒ½åœ¨è¿›å…¥äº¤æ¢ç»“æ„æ—¶è¢«é˜»å¡ï¼Œè¿™ä¸ªè¢«é˜»å¡çš„åˆ†ç»„éœ€è¦åœ¨è¾“å…¥ç«¯å£å¤„æ’é˜Ÿ
<br>è¾“å…¥ç«¯å£é™¤äº†æŸ¥æ‰¾ä»éœ€è¦å¤„ç†çš„äº‹æƒ…

<br>ç‰©ç†å±‚å’Œé“¾è·¯å±‚å¤„ç†
<br>æ£€æŸ¥åˆ†ç»„çš„ç‰ˆæœ¬å·ã€æ£€éªŒå’Œä»¥åŠå¯¿å‘½å­—æ®µï¼Œå¹¶é‡å†™æœ€åä¸¤ä¸ªå­—æ®µ
<br>æ›´æ–°ç”¨äºç½‘ç»œç®¡ç†çš„è®¡æ•°å™¨


<br><br>
<br>è·¯ç”±å™¨é€šè¿‡äº¤æ¢ç»“æ„ä½¿åˆ†ç»„å®é™…åœ°ä»ä¸€ä¸ªè¾“å…¥ç«¯å£äº¤æ¢åˆ°å¦ä¸€ä¸ªè¾“å‡ºç«¯å£ä¸­
<br>äº¤æ¢å¯ä»¥ç”¨è®¸å¤šæ–¹å¼å®Œæˆï¼š

<br>ç»å†…å­˜äº¤æ¢ <img alt="Pasted image 20231117163834.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231117163834.png" style="width: 400px; max-width: 100%;">

<br>æœ€ç®€å•ã€æœ€æ—©çš„è·¯ç”±å™¨ä½¿ä¼ ç»Ÿçš„è®¡ç®—æœºï¼Œè¾“å…¥ç«¯å£å’Œè¾“å‡ºæ®µå£ä¹‹é—´çš„äº¤æ¢æ˜¯åœ¨ CPU (è·¯ç”±é€‰æ‹©å¤„ç†å™¨) çš„æ§åˆ¶ä¸‹å®Œæˆçš„
<br>å¤„ç†é¦–éƒ¨æ—¶åˆ†ç»„éœ€è¦è¢«å¤åˆ¶åˆ°å†…å­˜ä¸­ï¼Œæ‰€ä»¥è½¬å‘ååé‡å—åˆ°å†…å­˜å¸¦å®½é™åˆ¶
<br>å…±äº«ç³»ç»Ÿæ€»çº¿ä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªå†…å­˜è¯» / å†™ï¼Œæ‰€ä»¥ä¸èƒ½åŒæ—¶è½¬å‘ä¸¤ä¸ªåˆ†ç»„
<br>ç°ä»£è·¯ç”±å™¨ç”±è¾“å…¥çº¿è·¯å¡æŸ¥æ‰¾ç›®çš„åœ°å€å’Œå°†åˆ†ç»„å­˜å‚¨è¿›é€‚å½“çš„å†…å­˜å­˜å‚¨ä½ç½®


<br>ç»æ€»çº¿äº¤æ¢ <img alt="Pasted image 20231117163932.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231117163932.png" style="width: 400px; max-width: 100%;">

<br>è¾“å…¥ç«¯å£ç»ä¸€æ ¹å…±äº«æ€»çº¿å°†åˆ†ç»„ç›´æ¥ä¼ é€åˆ°è¾“å‡ºç«¯å£
<br>è¾“å…¥ç«¯å£ä¸ºåˆ†ç»„é¢„å…ˆè®¡åˆ’ä¸€ä¸ªäº¤æ¢æœºå†…éƒ¨æ ‡ç­¾ï¼ŒæŒ‡ç¤ºæœ¬åœ°è¾“å‡ºç«¯å£ï¼Œåˆ†ç»„è¢«æ‰€æœ‰è¾“å‡ºç«¯å£æ”¶åˆ°ï¼Œä½†åªæœ‰ä¸è¯¥æ ‡ç­¾åŒ¹é…çš„ç«¯å£æ‰èƒ½ä¿å­˜è¯¥åˆ†ç»„
<br>ä¸€æ¬¡åªæœ‰ä¸€ä¸ªåˆ†ç»„èƒ½è·¨è¶Šæ€»çº¿ï¼Œäº¤æ¢å¸¦å®½å—æ€»çº¿é€Ÿç‡çš„é™åˆ¶


<br>ç»äº’è”ç½‘ç»œäº¤æ¢ <img alt="Pasted image 20231117163957.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231117163957.png" style="width: 400px; max-width: 100%;">

<br>ä½¿ç”¨æ›´å¤æ‚çš„äº’è”ç½‘ç»œèƒ½å…‹æœå•ä¸€ã€å…±äº«å¼æ€»çº¿çš„å¸¦å®½é™åˆ¶
<br>å›¾ä¸­çš„çºµæ¨ªå¼äº¤æ¢æœºæ˜¯ç”± 2N æ¡æ€»çº¿ç»„æˆçš„äº’è”ç½‘ç»œï¼Œäº¤å‰ç‚¹é€šè¿‡äº¤æ¢ç»“æ„æ§åˆ¶å™¨åœ¨ä»»ä½•æ—¶å€™èƒ½å¤Ÿå¼€å¯å’Œé—­åˆ
<br>çºµæ¨ªå¼äº¤æ¢æœºæ˜¯éé˜»å¡çš„ (non-blocking)ï¼Œåªè¦æ²¡æœ‰å…¶ä»–åˆ†ç»„å½“å‰è¢«è½¬å‘åˆ°è¯¥è¾“å‡ºç«¯å£ï¼Œè½¬å‘åˆ°è¾“å‡ºç«¯å£çš„åˆ†ç»„å°†ä¸ä¼šè¢«åˆ°è¾¾è¾“å‡ºç«¯å£çš„åˆ†ç»„é˜»å¡ï¼Œå¦‚æœæ¥è‡ªä¸¤ä¸ªä¸åŒè¾“å…¥ç«¯å£çš„ä¸¤ä¸ªåˆ†ç»„å…¶ç›®çš„åœ°ä¸ºç›¸åŒçš„è¾“å‡ºç«¯å£ï¼Œåˆ™ä¸€ä¸ªåˆ†ç»„å¿…é¡»åœ¨è¾“å…¥ç«¯ç­‰å¾…




<br><br><img alt="Pasted image 20231117171654.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231117171654.png" style="width: 500px; max-width: 100%;"><br>
<br>è¾“å‡ºç«¯å£å–å‡ºå·²ç»å­˜æ”¾åœ¨è¾“å‡ºç«¯å£å†…å­˜ä¸­çš„åˆ†ç»„å¹¶å°†å…¶å‘é€åˆ°è¾“å‡ºé“¾è·¯ä¸Š
<br><br>
<br>è·¯ç”±å™¨åœ¨è¾“å…¥ç«¯å£å’Œè¾“å‡ºç«¯å£å¤„éƒ½èƒ½å½¢æˆæ’é˜Ÿ
<br>æ’é˜Ÿçš„ä½ç½®å’Œç¨‹åº¦å–å†³äºæµé‡è´Ÿè½½ã€äº¤æ¢ç»“æ„çš„ç›¸å¯¹é€Ÿç‡å’Œçº¿è·¯é€Ÿç‡
<br>å½“æ— å†…å­˜å¯ç”¨äºå­˜å‚¨åˆ°è¾¾çš„åˆ†ç»„æ—¶ä¼šå‡ºç°ä¸¢åŒ… (packet loss)
<br><br>
<br>å¦‚æœç“¶é¢ˆåœ¨äº¤æ¢ç»“æ„çš„ååé‡ï¼Œé‚£ä¹ˆåœ¨è¾“å…¥ç«¯å£å°†å‡ºç°åˆ†ç»„æ’é˜Ÿ
<br>è€ƒè™‘çºµæ¨ªå¼ç»“æ„ï¼Œå‡å®šï¼š

<br>æ‰€æœ‰é“¾è·¯é€Ÿåº¦ç›¸åŒ
<br>ä¸€ä¸ªåˆ†ç»„èƒ½ä»¥ä¸€æ¡è¾“å…¥é“¾è·¯æ¥æ”¶ä¸€ä¸ªåˆ†ç»„æ‰€ç”¨çš„æ—¶é—´é‡ï¼Œä»ä»»æ„ä¸€ä¸ªè¾“å…¥ç«¯å£ä¼ é€åˆ°ç»™å®šçš„è¾“å‡ºç«¯å£
<br>åˆ†ç»„æŒ‰ FCFS (First Come, First Served) æ–¹å¼ï¼Œè‹¥æœ‰ä¸¤ä¸ªåˆ†ç»„è¢«å‘å¾€åŒä¸€è¾“å‡ºé˜Ÿåˆ—ï¼Œå…¶ä¸­çš„ä¸€ä¸ªåˆ†ç»„è¢«é˜»å¡


<br>çº¿è·¯å‰éƒ¨é˜»å¡ (Head-Of-the-Line, HOL) é˜»å¡ï¼šçº¿è·¯å‰éƒ¨çš„å¦ä¸€ä¸ªåˆ†ç»„é˜»å¡ï¼Œåˆ™åŒä¸€è¾“å‡ºé˜Ÿåˆ—ä¸­æ’é˜Ÿçš„åˆ†ç»„å¿…é¡»ç­‰å¾…å‰éƒ¨åˆ†ç»„å‘é€åæ‰èƒ½å‘é€ <img alt="Pasted image 20231117174816.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231117174816.png" style="width: 500px; max-width: 100%;">
<br><br>
<br>åœ¨ç¼“å­˜å·²æ»¡æ—¶ï¼Œéœ€è¦åšå‡ºå†³å®š

<br>ä¸¢å¼ƒåˆ°è¾¾çš„åˆ†ç»„ï¼Œé‡‡ç”¨å¼ƒå°¾ (drop-tail) çš„ç­–ç•¥
<br>åˆ é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªå·²æ’é˜Ÿçš„åˆ†ç»„


<br>ä¸»åŠ¨é˜Ÿåˆ—ç®¡ç† (Active Queue Management, AQM) ç®—æ³•

<br>åœ¨ç¼“å­˜å¡«æ»¡å‰ä¸¢å¼ƒä¸€ä¸ªåˆ†ç»„ï¼Œå¯ä»¥å‘å‘é€æ–¹æä¾›ä¸€ä¸ªæ‹¥å¡ä¿¡å·
<br>éšæœºæ—©æœŸæ£€æµ‹ (Random Early Detection, RED) æ˜¯å¾—åˆ°æœ€å¹¿æ³›ç ”ç©¶å’Œå®ç°çš„ AQM ç®—æ³•ä¹‹ä¸€ <img alt="Pasted image 20231117191339.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231117191339.png" style="width: 300px; max-width: 100%;">


<br>å½“åˆ†ç»„åˆ°è¾¾è¾“å‡ºç«¯å£å¹¶æ’é˜Ÿæ—¶ï¼Œè¾“å‡ºç«¯å£çš„åˆ†ç»„è°ƒåº¦ (packet scheduler) åœ¨æ’é˜Ÿåˆ†ç»„ä¸­é€‰æ‹©ä¸€ä¸ªåˆ†ç»„æ¥ä¼ è¾“
<br>è·¯ç”±å™¨ç¼“å­˜é•¿åº¦çš„ç»éªŒæ–¹æ³•ï¼šç¼“å­˜æ•°é‡ (B) åº”å½“ç­‰äºå¹³å‡å¾€è¿”æ—¶å»¶ (RTT) ä¹˜ä»¥é“¾è·¯çš„å®¹é‡ (C)ï¼Œæœ€è¿‘çš„ç†è®ºå’Œè¯•éªŒè¡¨æ˜ï¼Œå½“æœ‰å¤§é‡çš„ TCP æµ (N æ¡) æµè¿‡ä¸€æ¡é“¾è·¯æ—¶ï¼Œç¼“å­˜æ‰€éœ€è¦çš„é‡ 
<br><br>
<br>å…ˆè¿›å…ˆå‡º (First-In-First-Out, FIFO) <img alt="Pasted image 20231120094352.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120094352.png" style="width: 500px; max-width: 100%;">

<br>å¦‚æœé“¾è·¯æ­£å¿™äºä¼ è¾“å¦ä¸€ä¸ªåˆ†ç»„ï¼Œåˆ™åˆ°è¾¾é“¾è·¯è¾“å‡ºé˜Ÿåˆ—çš„åˆ†ç»„è¦æ’é˜Ÿç­‰å¾…ä¼ è¾“
<br>å¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„ç¼“å­˜æ¥å®¹çº³åˆ°è¾¾çš„åˆ†ç»„ï¼Œé˜Ÿåˆ—çš„åˆ†ç»„ä¸¢å¼ƒç­–ç•¥ç¡®å®šè¯¥åˆ†ç»„æ˜¯å¦å°†è¢«ä¸¢å¼ƒï¼Œæˆ–è€…ä»é˜Ÿåˆ—ä¸­å»é™¤å…¶ä»–åˆ†ç»„ä»¥ä¾¿ä¸ºåˆ°è¾¾çš„åˆ†ç»„è…¾å‡ºç©ºé—´
<br>FIFO (FCFS) è°ƒåº¦è§„åˆ™æŒ‰ç…§åˆ†ç»„åˆ°è¾¾è¾“å‡ºé“¾è·¯é˜Ÿåˆ—çš„ç›¸åŒæ¬¡åºæ¥é€‰æ‹©åˆ†ç»„åœ¨é“¾è·¯ä¸Šçš„ä¼ è¾“<img alt="Pasted image 20231120113103.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120113103.png">


<br>ä¼˜å…ˆæƒé˜Ÿåˆ— (priority queuing) <img alt="Pasted image 20231120095614.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120095614.png" style="width: 500px; max-width: 100%;">

<br>åˆ°è¾¾è¾“å‡ºé“¾è·¯çš„åˆ†ç»„è¢«åˆ†ç±»æ”¾å…¥è¾“å‡ºé˜Ÿåˆ—ä¸­çš„ä¼˜å…ˆæƒç±»
<br>ä¼˜å…ˆæƒæ’é˜Ÿè§„åˆ™å°†ä»é˜Ÿåˆ—ä¸ºéç©ºçš„æœ€é«˜ä¼˜å…ˆæƒç±»ä¸­ä¼ è¾“ä¸€ä¸ªåˆ†ç»„
<br>åœ¨åŒä¸€ä¼˜å…ˆæƒç±»çš„åˆ†ç»„ä¹‹é—´çš„é€‰æ‹©é€šå¸¸ä»¥ FIFO æ–¹å¼å®Œæˆ
<br>ä¸‹å›¾ä½¿ç”¨çš„è§„åˆ™æ˜¯éæŠ¢å å¼ä¼˜å…ˆæƒæ’é˜Ÿ (non-preemptive priority queuing)ï¼Œå³ä¸€æ—¦åˆ†ç»„å¼€å§‹ä¼ è¾“å°±ä¸èƒ½æ‰“æ–­ï¼Œæ‰€ä»¥é«˜ä¼˜å…ˆæƒçš„åˆ†ç»„ 4 åˆ°è¾¾åéœ€è¦å…ˆç­‰å¾…ä½ä¼˜å…ˆæƒçš„åˆ†ç»„ 2 ä¼ è¾“å®Œæˆ <img src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120115846.png">


<br>å¾ªç¯åŠ æƒå…¬å¹³æ’é˜Ÿ

<br>åœ¨å¾ªç¯æ’é˜Ÿè§„åˆ™ (round robin queuing discipline) ä¸‹ï¼Œç±»ä¹‹é—´ä¸å­˜åœ¨ä¸¥æ ¼çš„æœåŠ¡ä¼˜å…ˆæƒï¼Œå¾ªç¯è°ƒåº¦å™¨åœ¨è¿™äº›ç±»ä¹‹é—´è½®æµæä¾›æœåŠ¡ï¼Œä¸‹å›¾å½“ä¼ è¾“ä¸€ä¸ªåˆ†ç»„ä¼ è¾“å®Œæˆæ—¶ï¼Œè°ƒåº¦å™¨æŸ¥æ‰¾å¾ªç¯åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªç±»<img alt="Pasted image 20231120120805.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120120805.png">
<br>ä¿æŒå·¥ä½œæ’é˜Ÿ (work-conserving queuing) è§„åˆ™ï¼šæœ‰ä»»ä½•ç±»çš„åˆ†ç»„ç­‰å¾…ä¼ è¾“æ—¶ï¼Œä¸å…è®¸é“¾è·¯ä¿æŒç©ºé—²ï¼Œå½“å¯»æ‰¾ç»™å®šç±»çš„åˆ†ç»„æ²¡æœ‰æ‰¾åˆ°æ—¶ï¼Œä¿æŒå·¥ä½œçš„å¾ªç¯è§„åˆ™å°†ç«‹å³æ£€æŸ¥å¾ªç¯æ£€æŸ¥åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªç±»
<br>åŠ æƒå…¬å¹³æ’é˜Ÿ (Weight Fair Queuing, WFQ) è§„åˆ™ <img alt="Pasted image 20231120124017.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120124017.png" style="width: 500px; max-width: 100%;">

<br>åˆ°è¾¾çš„åˆ†ç»„è¢«åˆ†ç±»å¹¶åœ¨é€‚åˆçš„æ¯ä¸ªç±»çš„ç­‰å¾…åŒºåŸŸæ’é˜Ÿ
<br>WFQ è°ƒåº¦å™¨ä»¥å¾ªç¯æ–¹å¼ä¸ºå„ä¸ªç±»æä¾›æœåŠ¡
<br>WFQ æ˜¯ä¸€ç§ä¿æŒå·¥ä½œæ’é˜Ÿè§„åˆ™ï¼Œåœ¨å‘ç°ä¸€ä¸ªç©ºé˜Ÿåˆ—æ—¶ï¼Œè°ƒåº¦å™¨ç«‹åˆ»ç§»å‘ä¸‹ä¸€ä¸ªç±»
<br>WFQ å’Œå¾ªç¯æ’é˜Ÿçš„åŒºåˆ«æ˜¯ï¼Œæ¯ä¸ªç±»åœ¨ä»»ä½•æ—¶é—´é—´éš”å†…å¯èƒ½æ”¶åˆ°ä¸åŒæ•°é‡çš„æœåŠ¡ï¼Œç¬¬ i ç±»å°†ç¡®ä¿æ”¶åˆ°çš„æœåŠ¡éƒ¨åˆ†ç­‰äº ï¼Œå¯¹ä¸€æ¡ä¼ è¾“é€Ÿç‡ä¸º R çš„é“¾è·¯ï¼Œç¬¬ i ç±»èƒ½è‡³å°‘è·å¾—  çš„ååé‡




<br><br><br><img alt="Pasted image 20231120141624.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120141624.png" style="width: 500px; max-width: 100%;"> <img alt="Pasted image 20231120142719.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120142719.png"><br>
<br>IPv4 çš„æ•°æ®æŠ¥æ ¼å¼å¦‚å›¾

<br>ç‰ˆæœ¬ï¼š4 æ¯”ç‰¹ï¼Œè§„å®š IP åè®®ç‰ˆæœ¬ï¼ŒIPv4 çš„ç‰ˆæœ¬å·ä¸º 0100ï¼ŒIPv6 çš„ç‰ˆæœ¬å·ä¸º 0110ï¼Œé€šè¿‡æŸ¥çœ‹ç‰ˆæœ¬å·ï¼Œè·¯ç”±å™¨èƒ½ç¡®å®šå¦‚ä½•è§£é‡Š IP æ•°æ®æŠ¥çš„å‰©ä½™éƒ¨åˆ†
<br>é¦–éƒ¨é•¿åº¦ï¼š4 æ¯”ç‰¹ï¼ŒæŒ‡å®š IP æ•°æ®æŠ¥é¦–éƒ¨é•¿åº¦ï¼Œç”±äºç¡®å®šè½½è·çš„èµ·å§‹ç‚¹ï¼Œä¸€èˆ¬çš„ IPv4 æ•°æ®æŠ¥å…·æœ‰ 20 å­—èŠ‚çš„é¦–éƒ¨
<br>åŒºåˆ†æœåŠ¡ (Differentiated Services, DS)ï¼šåŒºåˆ†ä¸åŒç±»å‹çš„ IP æ•°æ®æŠ¥, ä»è€Œä¾¿äºç°ä»£ç½‘ç»œæä¾› Qos (quality of service)ï¼ŒIPv4 ä¸­å‰ 6 ä½ä¸ºåŒºåˆ†æœåŠ¡ä»£ç ç‚¹ (Differentiated Services Code Pointï¼ŒDSCP) [@DifferentiatedServices2023]ï¼Œå 2 ä½è¢«ç”¨äº<a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > ç½‘ç»œè¾…åŠ©æ‹¥å¡æ§åˆ¶" data-href="è¿è¾“å±‚#ç½‘ç»œè¾…åŠ©æ‹¥å¡æ§åˆ¶" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#ç½‘ç»œè¾…åŠ©æ‹¥å¡æ§åˆ¶" class="internal-link" target="_self" rel="noopener">æ˜¾ç¤ºæ‹¥å¡é€šçŸ¥ (Explicit Congestion Notification, ECN)</a>  

<br>DSCP
<br>ECN

<br>ECN-Capable Transport (ECT): å¦‚æœä½ 6 è¢«è®¾ç½®ï¼Œè¡¨æ˜æ­¤æ•°æ®æŠ¥çš„ä¼ è¾“å·²ç»åšå¥½æ‹¥å¡é­é‡çš„å‡†å¤‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥æ‰¿å—ç½‘ç»œä¸­çš„æ‹¥å¡è€Œä¸éœ€è¦ä¸¢å¼ƒæ•°æ®æŠ¥
<br>Congestion Experienced (CE) : å¦‚æœä½ 7 è¢«è®¾ç½®ï¼Œè¡¨æ˜åœ¨ç½‘ç»œè·¯å¾„ä¸­å·²ç»é‡åˆ°æ‹¥å¡ï¼Œéœ€è¦å‡å°‘å‘é€é€Ÿç‡




<br>æ•°æ®æŠ¥é•¿åº¦ï¼šIP æ•°æ®æŠ¥çš„æ€»é•¿åº¦ (é¦–éƒ¨åŠ ä¸Šæ•°æ®)ï¼Œæ•°æ®æŠ¥é•¿åº¦å­—æ®µçš„è®¾è®¡è€ƒè™‘åˆ°äº†ä»¥å¤ªç½‘å¸§çš„æœ€å¤§ä¼ è¾“å•å…ƒ  (MTU)ï¼Œè¯¥é•¿åº¦ç¡®ä¿ä¸€ä¸ª IP æ•°æ®æŠ¥å¯ä»¥ä½œä¸ºæ•°æ®å­—æ®µï¼ˆä¹Ÿå°±æ˜¯è½½è·ï¼‰è¢«å®Œæ•´åœ°å°è£…åœ¨ä¸€ä¸ªä»¥å¤ªç½‘å¸§å†…éƒ¨è¿›è¡Œä¼ è¾“
<br>æ ‡è¯†(Identification)ã€æ ‡å¿—(Flags)ã€ç‰‡åç§»(Fragment Offset)ï¼šä¸ <a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ•°æ®å¹³é¢ > IPv4 æ•°æ®æŠ¥åˆ†ç‰‡" data-href="ç½‘ç»œå±‚-æ•°æ®å¹³é¢#IPv4 æ•°æ®æŠ¥åˆ†ç‰‡" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ•°æ®å¹³é¢.html#IPv4_æ•°æ®æŠ¥åˆ†ç‰‡" class="internal-link" target="_self" rel="noopener">IP åˆ†ç‰‡</a> ç›¸å…³
<br>å¯¿å‘½(Time-To-Live, TTL)ï¼šç¡®ä¿æ•°æ®æŠ¥ä¸ä¼šæ°¸è¿œåœ¨ç½‘ç»œä¸­å¾ªç¯ï¼Œæ¯å½“ä¸€å°è·¯ç”±å™¨å¤„ç†æ•°æ®æŠ¥æ—¶ TTL å‡ä¸€ï¼Œè‹¥ TTL ä¸º 0ï¼Œåˆ™è¯¥æ•°æ®æŠ¥å¿…é¡»ä¸¢å¼ƒ
<br>åè®®ï¼šæŒ‡ç¤ºäº† IP æ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†åº”è¯¥äº¤ç»™å“ªä¸ªç‰¹å®šçš„è¿è¾“å±‚åè®®ï¼Œå¯èƒ½å€¼è¯¦è§ <a data-tooltip-position="top" aria-label="https://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml" rel="noopener" class="external-link" href="https://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml" target="_blank">IANA Protocol Numbers</a> ï¼Œåè®®å·å°†ç½‘ç»œå±‚ä¸è¿è¾“å±‚ç»‘å®šåˆ°ä¸€èµ· 
<br>é¦–éƒ¨æ£€éªŒå’Œï¼šè®¡ç®—æ–¹æ³•åŒ <a data-href="è¿è¾“å±‚#æ£€éªŒå’Œè®¡ç®—è¿‡ç¨‹" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#æ£€éªŒå’Œè®¡ç®—è¿‡ç¨‹" class="internal-link" target="_self" rel="noopener">è¿è¾“å±‚ &gt; æ£€éªŒå’Œè®¡ç®—è¿‡ç¨‹</a> ï¼Œå› ä¸ºæ¯ç»è¿‡ä¸€å°è·¯ç”±å™¨ TTL å­—æ®µä¼šæ”¹å˜ï¼Œæ‰€ä»¥æ¯å°è·¯ç”±å™¨ä¸Šå¿…é¡»é‡æ–°è®¡ç®—æ£€éªŒå’Œå¹¶æ”¾å›åŸå¤„

<br>ä¸ºä»€ä¹ˆè¿è¾“å±‚å’Œç½‘ç»œå±‚éƒ½æ‰§è¡Œå·®é”™æ£€æµ‹ï¼Ÿ

<br>é¦–å…ˆ IP å±‚åªå¯¹ IP é¦–éƒ¨è®¡ç®—æ£€éªŒå’Œï¼Œè€Œ TCP / UDP æ˜¯å¯¹æ•´ä¸ªæŠ¥æ–‡æ®µè®¡ç®—
<br>TCP / UDP ä¸ IP ä¸ä¸€å®šå¿…é¡»è¿è¡Œåœ¨åŒä¸€ä¸ªåè®®æ ˆä¸Š




<br>æºå’Œç›®çš„IPåœ°å€ï¼šé€šå¸¸æºä¸»æœºé€šè¿‡ DNS æŸ¥æ‰¾æ¥å†³å®šç›®çš„åœ°å€
<br>é€‰é¡¹ï¼šé€‰é¡¹å­—æ®µå…è®¸ IP é¦–éƒ¨è¢«æ‰©å±•ï¼ŒIPv6 é¦–éƒ¨å·²ç»åˆ é™¤é€‰é¡¹å­—æ®µ
<br>æ•°æ®(æœ‰æ•ˆè½½è·)ï¼šåŒ…å«è¦äº¤ä»˜ç»™ç›®çš„åœ°çš„ <a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > ^e40540" data-href="è¿è¾“å±‚#^e40540" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#^e40540" class="internal-link" target="_self" rel="noopener">è¿è¾“å±‚æŠ¥æ–‡æ®µ</a>ï¼Œä¹Ÿå¯æ‰¿è½½å¦‚ ICMP æŠ¥æ–‡ç­‰æ•°æ®


<br><br>
<br>ä¸€ä¸ªé“¾è·¯å±‚å¸§èƒ½æ‰¿è½½çš„æœ€å¤§æ•°æ®é‡å«ä½œæœ€å¤§ä¼ é€å•å…ƒ (Maximum Transmission Unit, MTU)ï¼Œæ•… MTU ä¸¥æ ¼é™åˆ¶ IP æ•°æ®æŠ¥çš„é•¿åº¦
<br>å‘é€æ–¹ä¸ç›®çš„åœ°è·¯å¾„ä¸Šçš„æ¯æ®µé“¾è·¯å¯èƒ½ä½¿ç”¨ä¸åŒçš„é“¾è·¯å±‚åè®®ï¼Œæ¯æ®µåè®®å¯èƒ½å…·æœ‰ä¸åŒçš„ MTU
<br>å½“å‡ºé“¾è·¯çš„ MTU æ¯”å…¥é“¾è·¯å°æ—¶ï¼Œéœ€è¦å°† IP æ•°æ®æŠ¥ä¸­çš„æ•°æ®åˆ†ç‰‡æˆä¸¤ä¸ªæˆ–å¤šä¸ªè¾ƒå°çš„ IP æ•°æ®æŠ¥ï¼Œç”¨å•ç‹¬çš„é“¾è·¯å±‚å¸§å°è£…è¿™äº›æ•°æ®æŠ¥(è¿™äº›æ•°æ®æŠ¥è¢«ç§°ä¸ºç‰‡, fragment)ï¼Œå†é€šè¿‡è¾“å‡ºé“¾è·¯å‘é€è¿™äº›å¸§
<br>åšæŒç½‘ç»œæ ¸å¿ƒä¿æŒç®€å•çš„åŸåˆ™ï¼ŒIPv4 è®¾è®¡è€…å†³å®šå°†æ•°æ®æŠ¥é‡æ–°ç»„è£…çš„å·¥ä½œæ”¾åˆ°ç«¯ç³»ç»Ÿä¸­
<br>ç›®çš„ä¸»æœºæ”¶åˆ°ä¸€ç³»åˆ—æ•°æ®æŠ¥æ—¶ï¼Œéœ€è¦ç¡®å®šæ•°æ®æŠ¥ä¸­çš„æŸäº›æ˜¯å¦æ˜¯ä¸€äº›åŸæ¥è¾ƒå¤§çš„æ•°æ®æŠ¥çš„ç‰‡ï¼Œå¦‚æœæ˜¯çš„è¯éœ€è¦å°†è¿™äº›ç‰‡é‡æ–°ç»„è£…æˆæ•°æ®æŠ¥
<br>IP æ˜¯ä¸å¯é æœåŠ¡ï¼Œæºä¸»æœºå‘é€çš„ä¸åŒæ•°æ®æŠ¥å…·æœ‰ä¸åŒçš„ æ ‡è¯†å·ï¼Œåˆ†ç‰‡åé€šè¿‡ åç§»å­—æ®µ æŒ‡å®šè¯¥ç‰‡æ”¾åœ¨åˆå§‹ IP æ•°æ®æŠ¥çš„å“ªä¸ªä½ç½®ï¼Œå¹¶å°†æœ€åä¸€ä¸ªç‰‡çš„ æ ‡å¿— æ¯”ç‰¹è®¾ç½®ä¸º 0 ï¼Œå…¶ä»–ç‰‡çš„ æ ‡å¿— æ¯”ç‰¹è®¾ç½®ä¸º 1
<br>å›¾ä¸­ 4000 å­—èŠ‚çš„æ•°æ®æŠ¥åˆ°è¾¾è·¯ç”±å™¨éœ€è¦è¢«è½¬å‘åˆ°ä¸€æ¡ MTU = 1500B çš„é“¾è·¯ä¸Šï¼Œåˆå§‹æ•°æ®æŠ¥ä¸­ 3980 å­—èŠ‚æ•°æ®å¿…é¡»è¢«åˆ†é…ä¸º 3 ä¸ªç‹¬ç«‹çš„ç‰‡ <img alt="Pasted image 20231120162427.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120162427.png" style="width: 500px; max-width: 100%;">
<br><br>
<br>æ¥å£ (interface)ï¼šä¸»æœºä¸ç‰©ç†é“¾è·¯ä¹‹é—´çš„è¾¹ç•Œ
<br>è·¯ç”±å™¨çš„ä»»åŠ¡æ˜¯ä»é“¾è·¯ä¸Šæ¥æ”¶æ•°æ®æŠ¥å¹¶ä»æŸäº›å…¶ä»–é“¾è·¯è½¬å‘å‡ºå»ï¼Œè·¯ç”±å™¨å¿…é¡»æ‹¥æœ‰ä¸¤æ¡æˆ–æ›´å¤šæ¡é“¾è·¯ä¸å®ƒè¿æ¥
<br>ä¸€ä¸ª IP åœ°å€ä¸ä¸€ä¸ªæ¥å£ç›¸å…³è”ï¼Œè€Œä¸æ˜¯ä¸åŒ…æ‹¬è¯¥æ¥å£çš„ä¸»æœºæˆ–è·¯ç”±å™¨ç›¸å…³è”
<br>IPv4 åœ°å€é€šå¸¸ç”¨ç‚¹åˆ†åè¿›åˆ¶è®°æ³• (dotted-decimal notation) ä¹¦å†™
<br>é™¤äº†åœ¨ NAT åçš„æ¥å£å¤–ï¼Œå…¨çƒå› ç‰¹ç½‘ä¸­çš„æ¯å°ä¸»æœºå’Œè·¯ç”±å™¨çš„æ¯ä¸ªæ¥å£ï¼Œéƒ½å¿…é¡»æœ‰ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„ IP åœ°å€
<br>å›¾ä¸­çš„ 223.1.1 å¼€å¤´çš„æ¥å£é€šè¿‡ä¸€å°ä»¥å¤ªç½‘äº¤æ¢æœºæˆ–ä¸€ä¸ªæ— é™æ¥å…¥ç‚¹äº’è”ï¼Œå½¢æˆä¸€ä¸ªå­—ç½‘ (subnet)ï¼Œ223.1.1.0/24 çš„å·¦ä¾§ 24 æ¯”ç‰¹å®šä¹‰äº†å­ç½‘åœ°å€ï¼Œ/24 ä¸ºå­ç½‘æ©ç ï¼Œä»»ä½•è¿æ¥åˆ°è¯¥å­ç½‘çš„ä¸»æœºéƒ½éœ€è¦å…·æœ‰ 223.1.1.xxx å½¢å¼  <img alt="Pasted image 20231120163855.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120163855.png" style="width: 700px; max-width: 100%;">
<br>å®šä¹‰å­ç½‘çš„æ–¹æ³•ï¼šä¸ºäº†ç¡®å®šå­ç½‘ï¼Œåˆ†å¼€ä¸»æœºå’Œè·¯ç”±å™¨çš„æ¯ä¸ªæ¥å£ï¼Œäº§ç”Ÿå‡ ä¸ªéš”ç¦»çš„ç½‘ç»œå²›ï¼Œä½¿ç”¨æ¥å£ç«¯æ¥è¿™äº›éš”ç¦»çš„ç½‘ç»œçš„ç«¯ç‚¹ï¼Œè¿™äº›éš”ç¦»çš„ç½‘ç»œä¸­çš„æ¯ä¸€ä¸ªéƒ½å«ä½œä¸€ä¸ªå­ç½‘ (subnet)
<br>ä¸‹å›¾æœ‰ 6 ä¸ªå­ç½‘ï¼Œåˆ†åˆ«æ˜¯ 223.1.1.0/24 223.1.2.0/24 223.1.3.0/24 223.1.9.0/24 223.1.8.0/24 223.1.7.0/24 <img alt="Pasted image 20231120165446.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120165446.png" style="width: 700px; max-width: 100%;">
<br>æ— ç±»åˆ«åŸŸé—´è·¯ç”±é€‰æ‹© (Classless Interdomain Routing, CIDR)ï¼šå½¢å¼ä¸º a.b.c.d/x çš„åœ°å€çš„æœ€é«˜æ¯”ç‰¹æ„æˆäº† IP åœ°å€çš„ç½‘ç»œéƒ¨åˆ†ï¼Œå¹¶ä¸”ç»å¸¸è¢«ç§°ä¸ºè¯¥åœ°å€çš„å‰ç¼€ ( prefix ) (æˆ–ç½‘ç»œå‰ç¼€)ï¼Œä¸€ä¸ªåœ°å€çš„å‰©ä½™ 32 - x æ¯”ç‰¹å¯ç”¨äºåŒºåˆ†è¯¥ç»„ç»‡å†…éƒ¨è®¾å¤‡ï¼Œè¯¥ç»„ç»‡çš„å†…éƒ¨ç»“æ„å¯ä»¥é‡‡ç”¨åŒæ ·çš„æ–¹å¼åˆ’åˆ†å­ç½‘ 
<br>åœ°å€èšåˆ (address aggregation) / è·¯ç”±èšåˆ (route aggregation) / è·¯ç”±æ‘˜è¦ (route summarization)ï¼šä½¿ç”¨å•ä¸ªç½‘ç»œå‰ç¼€é€šå‘Šå¤šä¸ªç½‘ç»œçš„èƒ½åŠ› <img alt="Pasted image 20231120172624.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120172624.png" style="width: 700px; max-width: 100%;">
<br><a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ•°æ®å¹³é¢ > ^189d26" data-href="ç½‘ç»œå±‚-æ•°æ®å¹³é¢#^189d26" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ•°æ®å¹³é¢.html#^189d26" class="internal-link" target="_self" rel="noopener">æœ€é•¿å‰ç¼€åŒ¹é…</a>ï¼šå½“ç»„ç»‡ 1 200.23.18.0/23 æ¢ç”¨ ISPs-R-Us çš„æœåŠ¡æ—¶ï¼ŒFly-By-Night-ISP ç»§ç»­é€šå‘ŠåŸæ¥çš„åœ°å€å—ï¼ŒISPs-R-Us å¢åŠ é€šå‘Š 200.23.18.0/23ï¼Œå½“å…¶ä»–è·¯ç”±å™¨çœ‹è§ 200.23.16.0/20 å’Œ 200.23.18.0/23 æ—¶ï¼Œæ ¹æ®æœ€é•¿å‰ç¼€åŒ¹é…å‘ ISPs-R-Us è·¯ç”± <img alt="Pasted image 20231120172644.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231120172644.png" style="width: 700px; max-width: 100%;">
<br>åˆ†ç±»ç¼–å€ (classful addressing)ï¼šå…·æœ‰ 8ã€16 æˆ– 24 æ¯”ç‰¹å­ç½‘åœ°å€çš„å­ç½‘è¢«åˆ†åˆ«è¢«ç§°ä¸º Aã€B å’Œ C ç±»ç½‘ç»œï¼Œåˆ†åˆ«å¯å®¹çº³ 16777214ã€65534ã€254 (ä¸¤ä¸ªé¢„ç•™åœ°å€)å°è®¾å¤‡
<br>IP å¹¿æ’­åœ°å€ï¼šä¸»æœºå‘é€ç›®çš„åœ°å€ä¸º 255.255.255.255 çš„æ•°æ®æŠ¥æ—¶ï¼ŒæŠ¥æ–‡ä¼šäº¤ä»˜ç»™åŒä¸€ä¸ªç½‘ç»œä¸­çš„æ‰€æœ‰ä¸»æœºï¼Œè·¯ç”±å™¨ä¹Ÿä¼šæœ‰é€‰æ‹©åœ°å‘é‚»è¿‘çš„å­ç½‘è½¬å‘è¯¥æŠ¥æ–‡
<br><br>
<br>IP åœ°å€ç”±å› ç‰¹ç½‘åå­—å’Œç¼–å·åˆ†é…æœºæ„ (Internet Corporation for Assigned Names and Numbers, ICANN)ç®¡ç†ï¼ŒICANN å‘åŒºåŸŸæ€§å› ç‰¹ç½‘æ³¨å†Œæœºæ„åˆ†é…åœ°å€
<br>ICANN è¿˜ç®¡ç† DNS æ ¹æœåŠ¡å™¨ï¼ŒåŒæ—¶è´Ÿè´£åˆ†é…åŸŸåå’Œè§£å†³åŸŸåçº çº·
<br><br>
<br>åŠ¨æ€ä¸»æœºé…ç½®åè®® (Dynamic Host Configuration, DHCP) å…è®¸ä¸»æœºè‡ªåŠ¨è·å–ä¸€ä¸ª IP åœ°å€ï¼Œç½‘ç»œç®¡ç†å‘˜èƒ½é…ç½® DHCP ä»¥ä½¿ä¸»æœºæ¯æ¬¡ä¸ç½‘ç»œè¿æ¥æ—¶èƒ½å¾—åˆ°ä¸€ä¸ªç›¸åŒçš„ IP åœ°å€ï¼Œæˆ–è€…åˆ†é…ä¸€ä¸ªä¸´æ—¶çš„ IP åœ°å€ (temporary IP address)ï¼ŒDHCP è¿˜å…è®¸ä¸»æœºå¾—çŸ¥å…¶ä»–ä¿¡æ¯ï¼Œä¾‹å¦‚å­ç½‘æ©ç ã€é»˜è®¤ç½‘å…³å’Œæœ¬åœ° DNS åœ°å€ <img alt="Pasted image 20231121102137.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231121102137.png">
<br>DHCP åˆè¢«ç§°ä¸ºå³æ’å³ç”¨åè®® (plug-and-play protocol) æˆ–é›¶é…ç½®åè®® (zeroconf)
<br>DHCP åè®®çš„æ­¥éª¤å¦‚å›¾ <img alt="Pasted image 20231121105930.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231121105930.png">

<br>DHCPæœåŠ¡å™¨å‘ç°ï¼šæ–°ä¸»æœºä½¿ç”¨ DHCP å‘ç°æŠ¥æ–‡ (DHCP discover message)ï¼Œé€šè¿‡å‘ subnet å¹¿æ’­å°è£…äº† UDP åˆ†ç»„ (67 ç«¯å£) çš„ IP æ•°æ®æŠ¥ (æº IP 0.0.0.0 æœ¬ä¸»æœºï¼Œç›®çš„ IP 255.255.255.255 å¹¿æ’­åœ°å€)ï¼Œè®© DHCP æœåŠ¡å™¨æ¥æ”¶åˆ°æŠ¥æ–‡
<br>DHCPæœåŠ¡å™¨æä¾›ï¼šæœåŠ¡å™¨ç”¨ DHCP æä¾›æŠ¥æ–‡åšå‡ºå“åº”è¯¥æŠ¥æ–‡ä»ç„¶ä½¿ç”¨ IP å¹¿æ’­åœ°å€ 255.255.255.255ï¼Œæä¾›æŠ¥æ–‡ä¸­åŒ…å«æ¨èçš„ IP åœ°å€ã€ç½‘ç»œæ©ç ä»¥åŠ IP åœ°å€ç§Ÿç”¨æœŸ (address lease time) <img alt="Pasted image 20231121111831.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231121111831.png">
<br>DHCPè¯·æ±‚ï¼šå®¢æˆ·ä»ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡å™¨é€‰æ‹©ä¸€ä¸ªï¼Œå¹¶å‘é€‰ä¸­çš„æœåŠ¡å™¨æä¾› DHCP è¯·æ±‚æŠ¥æ–‡ (DHCP request message)ï¼Œå›æ˜¾é…ç½®çš„å‚æ•°
<br>DHCP ACKï¼šæœåŠ¡å™¨ç”¨ DHCP ACK æŠ¥æ–‡ (DHCP ACK message) å¯¹ DHCP è¯·æ±‚æŠ¥æ–‡è¿›è¡Œå“åº”


<br>DHCP å®¢æˆ·ç«¯çŠ¶æ€è½¬ç§»å›¾ <img alt="Pasted image 20231121112842.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231121112842.png">
<br>DHCP å®¢æˆ·ç«¯çš„ç¼ºé™·æ˜¯ç§»åŠ¨èŠ‚ç‚¹åœ¨å­ç½‘ä¹‹é—´ç§»åŠ¨æ—¶ï¼Œä¸èƒ½ç»´æŒä¸è¿œç¨‹åº”ç”¨ä¹‹é—´çš„ TCP è¿æ¥
<br><br>
<br>ç½‘ç»œåœ°å€è½¬æ¢ (Network Address Translation, NAT) é€šå¸¸ç”¨äº SOHO (Small Office, Home Office) ä¸­è®¾å¤‡è¿‡å¤šçš„ IP åœ°å€ä¸å¤Ÿåˆ†é…çš„æƒ…å†µ
<br>RFC 1918 [@moskowitzAddressAllocationPrivate1996] å®šä¹‰äº†ä»¥ä¸‹ IP åœ°å€å—ï¼Œç”¨äºä¸“ç”¨ç½‘ç»œ (private network) å’Œå…·æœ‰ä¸“ç”¨åœ°å€çš„åœ°åŸŸçš„åœ°å€ç©ºé—´ï¼š

<br>10.0.0.0/8
<br>172.16.0.0/12
<br>192.168.0.0/16


<br>å…·æœ‰ä¸“ç”¨åœ°å€çš„åœ°åŸŸ (realm with private address)ï¼šå…¶åœ°å€ä»…å¯¹è¯¥ç½‘ç»œä¸­çš„è®¾å¤‡æœ‰æ„ä¹‰çš„ç½‘ç»œ
<br>å®¶åº­ç½‘ç»œè®¡ç®—æœºä» DHCP æœåŠ¡å™¨å¾—åˆ° IP åœ°å€
<br>NAT è·¯ç”±å™¨ç»´æŠ¤ä¸€å¼  NAT è½¬æ¢è¡¨ (NAT translation table)ï¼Œå½“ç”Ÿæˆä¸€ä¸ªæ–°çš„æºç«¯å£å·æ—¶ï¼ŒNAT è·¯ç”±å™¨é€‰æ‹©ä»»æ„ä¸€ä¸ªå½“å‰æœªåœ¨ NAT è½¬æ¢è¡¨ä¸­çš„æºç«¯å£å·ï¼Œå¹¶åœ¨ NAT è½¬æ¢è¡¨ä¸­å¢åŠ ä¸€ä¸ªè¡¨é¡¹ <img alt="Pasted image 20231121145854.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231121145854.png">
<br>NAT çš„ä½¿ç”¨å¯¹äºè¿è¡Œåœ¨å®¶åº­ç½‘ç»œçš„æœåŠ¡å™¨ä¼šå¼•èµ·é—®é¢˜ (P2P å¯¹ç­‰æ–¹)ï¼Œè§£å†³æ–¹æ¡ˆåŒ…æ‹¬ NAT ç©¿è¶Š (NAT traversal) å’Œé€šç”¨å³æ’å³ç”¨ (Universal Plug and Play, UPnP[@UniversalPlugPlay2023])
<br><br><img alt="Pasted image 20231121155011.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231121155011.png" style="width: 500px; max-width: 100%;"><img alt="Pasted image 20231121161020.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231121161020.png"><br>
<br>IPv6 æ•°æ®æŠ¥æ ¼å¼å¦‚å›¾ <img alt="dee20d12ebabfb65621128b578bb6a6f.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/dee20d12ebabfb65621128b578bb6a6f.png">

<br>ç‰ˆæœ¬ï¼šç”¨äºæ ‡è¯† IP ç‰ˆæœ¬å·
<br>æµé‡ç±»å‹ï¼šä¸ <a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ•°æ®å¹³é¢ > ^11e8fd" data-href="ç½‘ç»œå±‚-æ•°æ®å¹³é¢#^11e8fd" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ•°æ®å¹³é¢.html#^11e8fd" class="internal-link" target="_self" rel="noopener">åŒºåˆ†æœåŠ¡</a> ç±»ä¼¼
<br>æµæ ‡ç­¾ï¼šç”¨äºæ ‡è¯†ä¸€æ¡æ•°æ®æŠ¥çš„æµï¼Œèƒ½å¤Ÿå¯¹ä¸€æ¡æµä¸­çš„æŸäº›æ•°æ®æŠ¥ç»™å‡ºä¼˜å…ˆæƒ
<br>æœ‰æ•ˆè½½è·é•¿åº¦ï¼šæ•°æ®å­—æ®µçš„å­—èŠ‚æ•°é‡
<br>ä¸‹ä¸€ä¸ªé¦–éƒ¨ï¼šä¸ <a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ•°æ®å¹³é¢ > ^af7241" data-href="ç½‘ç»œå±‚-æ•°æ®å¹³é¢#^af7241" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ•°æ®å¹³é¢.html#^af7241" class="internal-link" target="_self" rel="noopener">IPv4 åè®®å­—æ®µ</a>ç›¸ä¼¼
<br>è·³é™åˆ¶ï¼šè½¬å‘æ•°æ®æŠ¥çš„æ¯å°è·¯ç”±å™¨å°†è¯¥å­—æ®µçš„å†…å®¹å‡ 1ï¼Œè‹¥å€¼ä¸º 0 åˆ™è¯¥æ•°æ®æŠ¥è¢«ä¸¢å¼ƒ
<br>æºåœ°å€å’Œç›®çš„åœ°å€ï¼šIPv6 åœ°å€çš„æ ¼å¼è§ RFC 4291 [@deeringIPVersionAddressing2006]
<br>æ•°æ®ï¼šIPv6 æ•°æ®æŠ¥çš„æœ‰æ•ˆè½½è·éƒ¨åˆ†


<br>ç›¸è¾ƒäº IPv 4 å·²ç»ä¸å­˜åœ¨çš„å­—æ®µ

<br>åˆ†ç»„/é‡æ–°ç»„è£…ï¼šIPv6 ä¸å…è®¸åœ¨ä¸­é—´è·¯ç”±å™¨ä¸Šåˆ†ç‰‡å’Œç»„è£…ï¼Œè¿‡å¤§çš„æ•°æ®æŠ¥ä¼šè¢«ä¸¢å¼ƒå¹¶å›é€ä¸€ä¸ª ICMP æŠ¥æ–‡
<br>é¦–éƒ¨æ£€éªŒå’Œï¼šå¿«é€Ÿå¤„ç† IP åˆ†ç»„æ˜¯å…³æ³¨çš„é‡ç‚¹ï¼Œç”±äºè¿è¾“å±‚å’Œæ•°æ®é“¾è·¯å±‚æ‰§è¡Œäº†æ£€éªŒæ“ä½œï¼Œæ‰€ä»¥è®¾è®¡è€…å°† IP ä¸­çš„å†—ä½™å­—æ®µå»é™¤
<br>é€‰é¡¹ï¼šç°åœ¨é€‰é¡¹å­—æ®µå‡ºç°åœ¨ä¸‹ä¸€ä¸ªé¦–éƒ¨æŒ‡å‡ºçš„ä½ç½®ä¸Š


<br><br>
<br>å»ºéš§é“ (Tunneling) ï¼šéš§é“å‘é€ç«¯çš„ IPv6 èŠ‚ç‚¹å°†æ•´ä¸ª IPv6 æ•°æ®æŠ¥æ”¾åˆ°ä¸€ä¸ª IPv4 æ•°æ®æŠ¥çš„æ•°æ® (æœ‰æ•ˆè½½è·) å­—æ®µä¸­ï¼Œéš§é“æ¥æ”¶ç«¯ IPv6 èŠ‚ç‚¹æŸ¥çœ‹åè®®å­—æ®µæŒ‡ç¤º IPv6ï¼Œä» IPv4 æ•°æ®æŠ¥ä¸­å–å‡º IPv6 æ•°æ®æŠ¥å¹¶æä¾›è·¯ç”±<img alt="Pasted image 20231121172718.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231121172718.png">
<br>éš§é“ (tunnel)ï¼šä¸¤å° IPv6 è·¯ç”±å™¨ä¹‹é—´çš„ä¸­é—´ IPv4 è·¯ç”±å™¨çš„é›†åˆ
<br><br>
<br>A middlebox is&nbsp;a computer networking device that transforms, inspects, filters, and manipulates traffic for purposes other than packet forwarding 
<br>ç½‘ç»œå±‚åŸºäºç›®çš„åœ°è½¬å‘çš„ç‰¹å¾ï¼šæŸ¥æ‰¾ç›®çš„ IP åœ°å€ (åŒ¹é…)ï¼Œå°†åˆ†ç»„å‘é€åˆ°æœ‰ç‰¹å®šè¾“å‡ºç«¯å£çš„äº¤æ¢ç»“æ„ (åŠ¨ä½œ)
<br>è€ƒè™‘ä¸€ç§é€šç”¨"åŒ¹é…åŠ åŠ¨ä½œ"èŒƒå¼ (ä¸å±€é™äº Layer 3)ï¼Œå¯¹åè®®æ ˆçš„å¤šä¸ªé¦–éƒ¨å­—æ®µåŒ¹é…ï¼Œå¹¶é‡‡å–ç›¸åº”çš„åŠ¨ä½œï¼ŒåŒ…æ‹¬å°†åˆ†ç»„è½¬å‘åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºç«¯å£ (å°±åƒåœ¨åŸºäºç›®çš„åœ°è½¬å‘ä¸­ä¸€æ ·)ï¼Œè·¨è¶Šå¤šä¸ªé€šå‘æœåŠ¡çš„ç¦»å¼€æ¥å£è¿›è¡Œè´Ÿè½½å‡è¡¡åˆ†ç»„ (å°±åƒåœ¨è´Ÿè½½å‡è¡¡ä¸­ä¸€æ ·)ï¼Œé‡å†™é¦–éƒ¨å€¼ (å°±åƒåœ¨ NAT ä¸­ä¸€æ ·)ï¼Œæœ‰æ„è¯†åœ°é˜»æŒ¡ï¼ä¸¢å¼ƒæŸä¸ªåˆ†ç»„ (å°±åƒåœ¨é˜²ç«å¢™ä¸­ä¸€æ ·)ï¼Œä¸ºè¿›ä¸€æ­¥å¤„ç†å’ŒåŠ¨ä½œè€Œå‘æŸä¸ªç‰¹å®šçš„æœåŠ¡å™¨å‘é€ä¸€ä¸ªåˆ†ç»„ (å°±åƒåœ¨ DPI ä¸€æ ·)ï¼Œç­‰ç­‰ 
<br>ç”±äºé€šç”¨è½¬å‘ä¸­åŒ¹é…åŠ åŠ¨ä½œè¡¨å°†åŸºäºç›®çš„åœ°çš„è½¬å‘è¡¨ä¸€èˆ¬åŒ–ï¼Œæ‰€ä»¥æ—¢åŒ…æ‹¬ç½‘ç»œå±‚åˆåŒ…æ‹¬é“¾è·¯å±‚çš„è½¬å‘å†³å®šï¼Œæ‰€ä»¥ç”¨ <a data-tooltip-position="top" aria-label="å› ç‰¹ç½‘ > åˆ†ç»„äº¤æ¢æœº(packet switch)" data-href="å› ç‰¹ç½‘#åˆ†ç»„äº¤æ¢æœº(packet switch)" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html#åˆ†ç»„äº¤æ¢æœº(packet_switch)" class="internal-link" target="_self" rel="noopener">åˆ†ç»„äº¤æ¢æœº</a> ç»Ÿç§° SDN è½¬å‘è®¾å¤‡<img alt="Pasted image 20231122105823.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231122105823.png">
<br>æœ¬èŠ‚å°†åŸºäº OpenFlow æ ‡å‡†å¯¹é€šç”¨è½¬å‘è¿›è¡Œè®¨è®º

<br>OpenFlow 1.0 å¼•å…¥äº†å…³é”®çš„ SDN æŠ½è±¡å’ŒåŠŸèƒ½
<br>åŒ¹é…åŠ åŠ¨ä½œè½¬å‘è¡¨åœ¨ OpenFlow ä¸­ç§°ä¸ºæµè¡¨ (flow table)ï¼Œè¡¨é¡¹åŒ…æ‹¬

<br>é¦–éƒ¨å­—æ®µå€¼çš„é›†åˆï¼šåŸºäºç¡¬ä»¶åŒ¹é…åœ¨ <a data-tooltip-position="top" aria-label="ç½‘ç»œå±‚-æ•°æ®å¹³é¢ > ^c49453" data-href="ç½‘ç»œå±‚-æ•°æ®å¹³é¢#^c49453" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ•°æ®å¹³é¢.html#^c49453" class="internal-link" target="_self" rel="noopener">TCAM</a> å†…å­˜ä¸­æ‰§è¡Œæœ€è¿…é€Ÿ
<br>è®¡æ•°å™¨é›†åˆ
<br>æ‰€é‡‡å–çš„åŠ¨ä½œé›†åˆ




<br><br><img alt="Pasted image 20231122105353.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231122105353.png"><br>
<br>å…¥ç«¯å£ï¼šåˆ†ç»„äº¤æ¢æœºä¸Šæ¥æ”¶åˆ†ç»„çš„è¾“å…¥ç«¯å£
<br>OpenFlow ä¸å…è®¸åŸºäº TTL å­—æ®µæˆ–æ•°æ®æŠ¥é•¿åº¦å­—æ®µçš„åŒ¹é…
<br>æŠ½è±¡çš„è‰ºæœ¯ï¼šåœ¨ä¸€ä¸ªæ—¶åˆ»åšä¸€ä»¶äº‹ï¼Œå°†å®ƒåšå¥½ã€‚ä¸€ä¸ªæ¥å£åº”å½“ä¿˜è·ä¸€ä¸ªæŠ½è±¡çš„æœ€ä½é™åº¦çš„è¦ä»¶ã€‚ä¸è¦è¿›è¡Œä¸€èˆ¬åŒ–ï¼Œä¸€èˆ¬åŒ–é€šå¸¸æ˜¯é”™è¯¯çš„
<br><br>
<br>æ¯ä¸ªæµè¡¨é¡¹éƒ½æœ‰é›¶ä¸ªæˆ–å¤šä¸ªåŠ¨ä½œåˆ—è¡¨
<br>ä½œä¸ºé‡è¦çš„åŠ¨ä½œå¯èƒ½æ˜¯ï¼š

<br>è½¬å‘ï¼šä¸€ä¸ªåˆ†ç»„å¯èƒ½è¢«å•æ’­å¹¿æ’­æˆ–å¤šæ’­åˆ°è¾“å‡ºç«¯å£ï¼Œä¹Ÿå¯èƒ½è¢«å°è£…å¹¶å‘é€åˆ°è¿œç¨‹æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨å¯èƒ½å¯¹è¯¥åˆ†ç»„é‡‡å–æŸäº›åŠ¨ä½œï¼ŒåŒ…æ‹¬å®‰è£…æ–°çš„æµè¡¨é¡¹ï¼Œä»¥åŠå¯èƒ½åœ¨è¯¥åˆ†ç»„è¿”å›ç»™è¯¥è®¾å¤‡ä»¥åœ¨æ›´æ–°çš„æµè¡¨è§„åˆ™é›†åˆä¸‹è¿›è¡Œè½¬å‘
<br>ä¸¢å¼ƒï¼šæ²¡æœ‰åŠ¨ä½œçš„æµè¡¨é¡¹è¡¨æ˜åŒ¹é…çš„åˆ†ç»„åº”å½“è¢«ä¸¢å¼ƒ
<br>ä¿®æ”¹å­—æ®µï¼šåˆ†ç»„è¢«è½¬å‘åˆ°è¾“å‡ºç«¯å£å‰ï¼Œåˆ†ç»„é¦–éƒ¨é™¤äº† IP åè®®çš„ Layer 2.3.4 å­—æ®µå¯é‡å†™


]]></description><link>campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ•°æ®å¹³é¢.html</link><guid isPermaLink="false">Campus/Chinese-Notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/ç½‘ç»œå±‚-æ•°æ®å¹³é¢.md</guid><pubDate>Fri, 22 Dec 2023 11:04:20 GMT</pubDate><enclosure url="campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231116172535.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231116172535.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[æ¦‚è¿°å’Œè¿è¾“å±‚æœåŠ¡]]></title><description><![CDATA[ 
 <br><br>
<br>é€»è¾‘é€šä¿¡ (logic communication)ï¼š 

<br>è¿è¾“å±‚åè®®ä¸ºè¿è¡Œåœ¨ä¸åŒä¸»æœºçš„è¿ç”¨è¿›ç¨‹ä¹‹é—´æä¾›äº†é€»è¾‘é€šä¿¡åŠŸèƒ½
<br>é€šè¿‡é€»è¾‘é€šä¿¡ï¼Œè¿è¡Œä¸åŒè¿›ç¨‹çš„ä¸»æœºå¥½åƒç›´æ¥ç›¸è¿ä¸€æ ·


<br>è¿è¾“å±‚åè®®åœ¨ç«¯ç³»ç»Ÿä¸­å®ç°ï¼Œå‘é€ç«¯è¿è¾“å±‚å°†ä»å‘é€åº”ç”¨ç¨‹åºè¿›ç¨‹æ¥æ”¶åˆ°çš„æŠ¥æ–‡è½¬æ¢æˆè¿è¾“å±‚æŠ¥æ–‡æ®µ (segment)ï¼Œç½‘è·¯å±‚å°†å…¶å°è£…æˆç½‘ç»œå±‚åˆ†ç»„ï¼ˆå³æ•°æ®æŠ¥ï¼‰å¹¶å‘ç›®çš„åœ°å‘é€ï¼Œæ¥æ”¶ç«¯ï¼Œç½‘ç»œå±‚ä»æ•°æ®æŠ¥ä¸­æå–è¿è¾“å±‚æŠ¥æ–‡æ®µï¼Œå¹¶å°†è¯¥æŠ¥æ–‡æ®µå‘ä¸Šäº¤ç»™è¿è¾“å±‚ <img alt="Pasted image 20231107111221.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231107111221.png">
<br>ç½‘ç»œå±‚æä¾›äº†ä¸»æœºä¹‹é—´çš„é€»è¾‘é€šä¿¡ï¼Œè¿è¾“å±‚ä¸ºè¿è¡Œåœ¨ä¸åŒä¸»æœºä¸Šçš„è¿›ç¨‹ä¹‹é—´æä¾›äº†é€»è¾‘é€šä¿¡
<br><br>
<br>å› ç‰¹ç½‘ä¸ºåº”ç”¨å±‚æä¾›äº† <a data-tooltip-position="top" aria-label="åº”ç”¨å±‚ > UDP æœåŠ¡" data-href="åº”ç”¨å±‚#UDP æœåŠ¡" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/åº”ç”¨å±‚.html#UDP_æœåŠ¡" class="internal-link" target="_self" rel="noopener">UDP</a> (ç”¨æˆ·æ•°æ®æŠ¥åè®®) å’Œ <a data-tooltip-position="top" aria-label="åº”ç”¨å±‚ > TCP æœåŠ¡" data-href="åº”ç”¨å±‚#TCP æœåŠ¡" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/åº”ç”¨å±‚.html#TCP_æœåŠ¡" class="internal-link" target="_self" rel="noopener">TCP</a> (ä¼ è¾“æ§åˆ¶åè®®)

<br>UDP ä¸ºè°ƒç”¨å®ƒçš„åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§ä¸å¯é ã€æ— è¿æ¥çš„æœåŠ¡
<br>TCP ä¸ºè°ƒç”¨å®ƒçš„åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§å¯é çš„ã€é¢å‘è¿æ¥çš„æœåŠ¡


<br>ç½‘é™…åè®® (Internet Protocol)ï¼šç½‘ç»œå±‚åè®®ï¼Œä¸ºä¸»æœºä¹‹é—´æä¾›äº†é€»è¾‘é€šä¿¡

<br>æœåŠ¡æ¨¡å‹ï¼šå°½åŠ›è€Œä¸ºäº¤ä»˜æœåŠ¡ (best-effort delivery service)ï¼Œä¸ç¡®ä¿æŠ¥æ–‡æ®µçš„äº¤ä»˜ï¼Œä¸ä¿è¯æŠ¥æ–‡æ®µçš„æŒ‰åºäº¤ä»˜ï¼Œä¸ä¿è¯æŠ¥æ–‡æ®µä¸­æ•°æ®çš„å®Œæ•´æ€§
<br>ä¸å¯é æœåŠ¡ (unreliable service)
<br>æ¯å°ä¸»æœºè‡³å°‘æœ‰ä¸€ä¸ªç½‘ç»œå±‚åœ°å€


<br>TCP å’Œ UDP æä¾›çš„æœåŠ¡æ¨¡å‹ï¼šè¿›ç¨‹åˆ°è¿›ç¨‹çš„æ•°æ®äº¤ä»˜å’Œå·®é”™æ£€æŸ¥ <img alt="IMG_6734.jpeg" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/img_6734.jpeg" style="width: 600px; max-width: 100%;">

<br>å°†ä¸»æœºé—´äº¤ä»˜æ‹“å±•åˆ°è¿›ç¨‹é—´äº¤ä»˜ï¼Œè¿è¾“å±‚çš„å¤šè·¯å¤ç”¨ (transport-layer multiplexing) å’Œå¤šè·¯åˆ†è§£ (demultiplexing)
<br>é€šè¿‡åœ¨å…¶æŠ¥æ–‡æ®µé¦–éƒ¨ä¸­åŒ…æ‹¬å·®é”™æ£€æŸ¥å­—æ®µè€Œæä¾›å®Œæ•´æ€§æ£€æŸ¥


<br>TCP æä¾›çš„é™„åŠ æœåŠ¡

<br>å¯é æ•°æ®ä¼ è¾“ (reliable data transfer)ï¼šé€šè¿‡æµé‡æ§åˆ¶ã€åºå·ã€ç¡®è®¤å’Œå®šæ—¶å™¨ï¼Œç¡®ä¿æ­£ç¡®åœ°ã€æŒ‰åºåœ°å°†æ•°æ®ä»å‘é€è¿›ç¨‹äº¤ä»˜ç»™æ¥æ”¶è¿›ç¨‹
<br>æ‹¥å¡æ§åˆ¶ (congestion control)ï¼šåŠ›æ±‚ä¸ºæ¯ä¸ªé€šè¿‡ä¸€æ¡æ‹¥å¡ç½‘ç»œé“¾è·¯çš„è¿æ¥å¹³ç­‰åœ°å…±äº«ç½‘ç»œé“¾è·¯å¸¦å®½


<br><br>
<br>è¿è¾“å±‚æ²¡æœ‰ç›´æ¥å°†æ•°æ®äº¤ä»˜ç»™è¿›ç¨‹ï¼Œè€Œæ˜¯å°†æ•°æ®äº¤ç»™äº†ä¸­é—´çš„å¥—æ¥å­—ï¼Œæ¯ä¸ªå¥—æ¥å­—éƒ½æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦ (ç«¯å£å·)
<br>å¤šè·¯åˆ†è§£ (demultiplexing)ï¼šå°†è¿è¾“å±‚æŠ¥æ–‡æ®µä¸­çš„æ•°æ®äº¤ä»˜åˆ°æ­£ç¡®çš„å¥—æ¥å­—
<br>å¤šè·¯å¤ç”¨ (multiplexing)ï¼šåœ¨æºä¸»æœºä»ä¸åŒå¥—æ¥å­—ä¸­æ”¶é›†æ•°æ®å—ï¼Œå¹¶ä¸ºæ¯ä¸ªæ•°æ®å—å°è£…ä¸Šé¦–éƒ¨ä¿¡æ¯ï¼ˆè¿™å°†åœ¨ä»¥åç”¨äºåˆ†è§£ï¼‰ä»è€Œç”ŸæˆæŠ¥æ–‡æ®µï¼Œç„¶åå°†æŠ¥æ–‡æ®µä¼ é€’åˆ°ç½‘ç»œå±‚
<br>è¿è¾“å±‚æŠ¥æ–‡æ®µç»„æˆ  <img alt="Pasted image 20231107151326.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231107151326.png" style="width: 300px; max-width: 100%;">

<br>å‘¨çŸ¥ç«¯å£å· (well-known port number)ï¼š0ï½1023ï¼Œä¿ç•™ç»™å‘¨çŸ¥åº”ç”¨å±‚åè®®ä½¿ç”¨ RFC 3232 [@editorAssignedNumbersRFC2002a]
<br>å¦‚æœç¼–å†™çš„ä»£ç å®ç°çš„æ˜¯ä¸€ä¸ªå‘¨çŸ¥åè®®çš„æœåŠ¡å™¨ç«¯ï¼Œå°±éœ€è¦åˆ†é…ä¸€ä¸ªç›¸åº”çš„å‘¨çŸ¥ç«¯å£å·ï¼Œé€šå¸¸åº”ç”¨ç¨‹åºçš„å®¢æˆ·ç«¯è®©è¿è¾“å±‚è‡ªåŠ¨åœ° (å¹¶ä¸”æ˜¯é€æ˜åœ°) åˆ†é…ç«¯å£å·ï¼Œè€ŒæœåŠ¡å™¨ç«¯åˆ™åˆ†é…ä¸€ä¸ªç‰¹å®šçš„ç«¯å£å·


<br><br>
<br>UDP å¥—æ¥å­—æ˜¯ç”±ä¸€ä¸ªäºŒå…ƒç»„å…¨é¢æ ‡è¯†çš„(ä¸€ä¸ªç›®çš„ IP åœ°å€å’Œä¸€ä¸ªç›®çš„ç«¯å£å·)
<br>å¦‚æœä¸¤ä¸ª UDP æŠ¥æ–‡æ®µæœ‰ä¸åŒçš„æº IP åœ°å€å’Œ / æˆ–æºç«¯å£å·ï¼Œä½†å…·æœ‰ç›¸åŒçš„ç›®çš„ IP åœ°å€å’Œç›®çš„ç«¯å£å·ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæŠ¥æ–‡æ®µå°†é€šè¿‡ç›¸åŒçš„ç›®çš„å¥—æ¥å­—è¢«å®šå‘åˆ°ç›¸åŒçš„ç›®çš„è¿›ç¨‹
<br>åŸç«¯å£å·ç”¨ä½œ"è¿”å›åœ°å€"çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨å›å‘æŠ¥æ–‡æ®µæ—¶æå–åŸç«¯å£å·ä½œä¸ºç›®çš„ç«¯å£å·
<br><br>
<br>TCP å¥—æ¥å­—æ˜¯ç”±ä¸€ä¸ªå››å…ƒç»„(æº IP åœ°å€ï¼Œæºç«¯å£å·ï¼Œç›®çš„ IP åœ°å€ï¼Œç›®çš„ç«¯å£å·)æ¥æ ‡è¯†çš„
<br>ä¸¤ä¸ªå…·æœ‰ä¸åŒæº IP åœ°å€æˆ–æºç«¯å£å·çš„åˆ°è¾¾ TCP æŠ¥æ–‡æ®µå°†è¢«å®šå‘åˆ°ä¸¤ä¸ªä¸åŒçš„å¥—æ¥å­—ï¼Œé™¤é TCP æŠ¥æ–‡æ®µæºå¸¦äº†åˆå§‹åˆ›å»ºè¿æ¥çš„è¯·æ±‚ <img alt="Pasted image 20231107164127.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231107164127.png">
<br>å¯¹äºæœåŠ¡å™¨ï¼Œåœ¨ä»»æ„ç»™å®šçš„æ—¶é—´å†…éƒ½å¯èƒ½æœ‰ï¼ˆå…·æœ‰ä¸åŒæ ‡è¯†çš„ï¼‰è®¸å¤šè¿æ¥å¥—æ¥å­—è¿æ¥åˆ°ç›¸åŒçš„è¿›ç¨‹ï¼ŒæœåŠ¡å™¨å¯ä»¥é‡‡ç”¨å¤šç§å¹¶å‘æ¨¡å‹æ¥å¤„ç†å¤šä¸ªè¿æ¥ï¼Œä¾‹å¦‚ï¼š<br>
â—¦	å¤šè¿›ç¨‹æ¨¡å‹ï¼ˆForkingï¼‰ï¼šå¯¹æ¯ä¸ªæ–°è¿æ¥ï¼ŒæœåŠ¡å™¨å¯ä»¥ fork ä¸€ä¸ªæ–°çš„è¿›ç¨‹æ¥å¤„ç†è¯¥è¿æ¥ã€‚<br>
â—¦	å¤šçº¿ç¨‹æ¨¡å‹ï¼ˆThreadingï¼‰ï¼šæœåŠ¡å™¨å¯ä»¥ä¸ºæ¯ä¸ªæ–°è¿æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚<br>
â—¦	äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼ˆEvent-drivenï¼‰ï¼šæœåŠ¡å™¨ä½¿ç”¨éé˜»å¡ IO å’Œäº‹ä»¶å¾ªç¯ï¼Œé€šè¿‡ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹æˆ–çº¿ç¨‹æ¥ç®¡ç†æ‰€æœ‰è¿æ¥ã€‚<br>
â—¦	å¼‚æ­¥ IO æ¨¡å‹ï¼šæœåŠ¡å™¨åˆ©ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„å¼‚æ­¥ IO æ¥å£è¿›è¡Œéé˜»å¡ IO æ“ä½œï¼Œè€Œä¸éœ€è¦æ¯ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹ã€‚
<br><br>
<br>åº”ç”¨ç¨‹åºæ›´é€‚åˆ UDP çš„åŸå› ï¼š

<br>å…³äºå‘é€ä»€ä¹ˆæ•°æ®ä»¥åŠä½•æ—¶å‘é€çš„åº”ç”¨å±‚æ§åˆ¶æ›´ä¸ºç²¾ç»†
<br>æ— éœ€è¿æ¥å»ºç«‹ï¼šQUlC åè®®ï¼ˆå¿«é€Ÿ UDP å› ç‰¹ç½‘è¿æ¥) å°† UDP ä½œä¸ºå…¶æ”¯æ’‘è¿è¾“åè®®å¹¶åœ¨ UDP ä¹‹ä¸Šçš„åº”ç”¨å±‚åè®®ä¸­å®ç°å¯é æ€§
<br>æ— è¿æ¥çŠ¶æ€
<br>åˆ†ç»„é¦–éƒ¨å¼€é”€å°


<br>ç½‘ç»œç®¡ç†åº”ç”¨ç¨‹åºé€šå¸¸å¿…é¡»åœ¨è¯¥ç½‘ç»œå¤„äºé‡å‹çŠ¶æ€æ—¶è¿è¡Œï¼Œæ‰€ä»¥åœ¨è¿™ç§åœºåˆä¸‹ UDP è¦ä¼˜äº TCP
<br>UDP ä¸­ç¼ºä¹æ‹¥å¡æ§åˆ¶èƒ½å¤Ÿå¯¼è‡´ UDP å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´çš„é«˜ä¸¢åŒ…ç‡ï¼Œå¹¶æŒ¤å®äº† TCP ä¼šè¯
<br>ä½¿ç”¨ UDP çš„åº”ç”¨æ˜¯å¯èƒ½å®ç°å¯é æ•°æ®ä¼ è¾“çš„ (eg. QUIC)
<br><br>                 0       7 8     15 16    23 24    31
                 +--------+--------+--------+--------+
                 |     Source      |   Destination   |
                 |      Port       |      Port       |
                 +--------+--------+--------+--------+
                 |                 |                 |
                 |     Length      |    Checksum     |
                 +--------+--------+--------+--------+
                 |
                 |          data octets ...
                 +---------------- ...

                      User Datagram Header Format
Copy<br>
<br>ç”± RFC 768 [@UserDatagramProtocol1980] å®šä¹‰ <img alt="Pasted image 20231107151302.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231107151302.png">
<br>é•¿åº¦å­—æ®µæŒ‡ç¤ºäº†åœ¨ UDP æŠ¥æ–‡æ®µä¸­çš„å­—èŠ‚æ•° (é¦–éƒ¨åŠ æ•°æ®)
<br>æ¥æ”¶æ–¹ä½¿ç”¨æ£€éªŒå’Œæ¥æ£€æŸ¥åœ¨è¯¥æŠ¥æ–‡æ®µä¸­æ˜¯å¦å‡ºç°äº†å·®é”™
<br><br>
<br><a data-tooltip-position="top" aria-label="https://datatracker.ietf.org/doc/html/rfc768" rel="noopener" class="external-link" href="https://datatracker.ietf.org/doc/html/rfc768" target="_blank">RFC 768</a>
<br><a data-tooltip-position="top" aria-label="https://datatracker.ietf.org/doc/html/rfc1071" rel="noopener" class="external-link" href="https://datatracker.ietf.org/doc/html/rfc1071" target="_blank">RFC 1071</a>
<br><br>				  0      7 8     15 16    23 24    31
                 +--------+--------+--------+--------+
                 |          source address           |
                 +--------+--------+--------+--------+
                 |        destination address        |
                 +--------+--------+--------+--------+
                 |  zero  |protocol|   UDP length    |
                 +--------+--------+--------+--------+

						Pseudo  Header  Format
Copy<br>
<br>å‡†å¤‡æ•°æ®ï¼šå°† UDP å¤´éƒ¨ï¼ˆé™¤äº†æ ¡éªŒå’Œå­—æ®µï¼Œè¯¥å­—æ®µåœ¨è®¡ç®—æ—¶è®¾ä¸º0ï¼‰å’Œæ•°æ®è½½è·åˆ†ä¸º16ä½çš„å­—ï¼ˆ2å­—èŠ‚ï¼‰ã€‚å¦‚æœæ•°æ®çš„å­—èŠ‚æ€»æ•°ä¸æ˜¯å¶æ•°ï¼ˆå³ä¸èƒ½å®Œå…¨åˆ†æˆ16ä½çš„å­—ï¼‰ï¼Œåˆ™åœ¨æœ€åæ·»åŠ ä¸€ä¸ªé¢å¤–çš„å­—èŠ‚çš„å¡«å……ï¼ˆé€šå¸¸æ˜¯0ï¼‰ä»¥ä½¿ä¹‹æˆå¯¹
<br>æ·»åŠ ä¼ªå¤´éƒ¨ ï¼šæ ¹æ® UDP åè®®ï¼Œæ ¡éªŒå’Œçš„è®¡ç®—åº”åŒ…å«ä¸€ä¸ª"ä¼ªå¤´éƒ¨"ï¼Œå®ƒåŒ…æ‹¬å‘é€è€…å’Œæ¥æ”¶è€…çš„ IP åœ°å€ï¼ˆå„å 4å­—èŠ‚ï¼‰ï¼Œä¸€ä¸ª8ä½çš„å…¨0å­—æ®µï¼ˆç”¨äºå ä½ï¼Œç¡®ä¿ä¼ªå¤´éƒ¨çš„æ ¼å¼ä¸ä¼ è¾“å±‚æ•°æ®æ®µçš„å…¶ä½™éƒ¨åˆ†ä¿æŒä¸€è‡´ï¼‰ï¼Œ1å­—èŠ‚çš„åè®®å·ï¼ˆUDP æ˜¯17, 0x11ï¼‰ï¼Œä»¥åŠ UDP æ•°æ®æŠ¥çš„é•¿åº¦
<br>åç æ±‚å’Œï¼šä½¿ç”¨ 16 ä½åç è¿ç®—ï¼Œå°†æ‰€æœ‰çš„ 16 ä½å­—åŠ åˆ°ä¸€èµ·ã€‚åœ¨è¿™ç§åŠ æ³•ä¸­ï¼Œå¦‚æœä»»ä½•ä¸€æ¬¡åŠ æ³•ç»“æœè¶…è¿‡ 16 ä½ï¼Œå³æœ€å·¦è¾¹äº§ç”Ÿäº†è¿›ä½ï¼Œé‚£ä¹ˆè¿›ä½ä¼šè¢«åŠ å›åˆ°è®¡ç®—ç»“æœçš„æœ€ä½ä½ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œç¯ç»•â€æˆ–â€œç«¯åˆ°ç«¯è¿›ä½â€
<br>æ±‚å’Œçš„åç ï¼šå°†æœ€ç»ˆçš„æ±‚å’Œç»“æœè¿›ä½çš„ä¸€éƒ¨åˆ†å’ŒåŸºæœ¬éƒ¨åˆ†ç›¸åŠ ä¹‹åå–åç ï¼Œå³å°†æ‰€æœ‰ä½ä» 0 å˜ä¸º 1 æˆ–ä» 1 å˜ä¸º 0ï¼Œè¿™å°±æ˜¯è¦å­˜å‚¨åœ¨æ ¡éªŒå’Œå­—æ®µçš„å€¼
<br>ç‰¹æ®Šæƒ…å†µï¼šå¦‚æœè®¡ç®—å‡ºçš„æ£€éªŒå’Œä¸º 0ï¼Œä¸ºé˜²æ­¢å°†åˆæ³•çš„æ£€éªŒå’Œå€¼ 0 è§£é‡Šä¸ºæ²¡æœ‰ä½¿ç”¨æ£€éªŒå’Œï¼Œå‘é€ç«¯å°†æ£€éªŒå’Œå­—æ®µä¸º 0 çš„æƒ…å†µä¸‹ç½®ä¸ºå…¨ 1
<br><br>
<br><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/End-to-end_principle#:~:text=The%20end%2Dto%2Dend%20principle,end%20nodes%20of%20the%20network." rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/End-to-end_principle#:~:text=The%20end%2Dto%2Dend%20principle,end%20nodes%20of%20the%20network." target="_blank">ç«¯åˆ°ç«¯åŸåˆ™</a> [@EndtoendPrinciple2023](end-eend principle)ï¼šå› ä¸ºæŸç§åŠŸèƒ½ï¼ˆåœ¨æ­¤æ—¶ä¸ºå·®é”™æ£€æµ‹ï¼‰å¿…é¡»åŸºäºç«¯åˆ°ç«¯å®ç°ï¼š"ä¸åœ¨è¾ƒé«˜çº§åˆ«æä¾›è¿™äº›åŠŸèƒ½çš„ä»£ä»·ç›¸æ¯”ã€åœ¨è¾ƒä½çº§åˆ«ä¸Šè®¾ç½®çš„åŠŸèƒ½å¯èƒ½æ˜¯å†—ä½™çš„æˆ–å‡ ä¹æ²¡æœ‰ä»·å€¼çš„ã€‚"

<br>è™½ç„¶è®¸å¤šé“¾è·¯å±‚åè®®æä¾›äº†å·®é”™æ£€æµ‹ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æºå’Œç›®çš„ä¹‹é—´æ‰€ä»¥é“¾è·¯éƒ½æä¾›
<br>æŠ¥æ–‡æ®µå­˜å‚¨åœ¨è·¯ç”±å™¨çš„å†…å­˜ä¸­ï¼Œä¹Ÿå¯èƒ½å¼•å…¥æ¯”ç‰¹å·®é”™


<br>è™½ç„¶ UDP æä¾›å·®é”™æ£€æµ‹ï¼Œä½†æ˜¯ UDP å¯¹å·®é”™æ¢å¤æ— èƒ½ä¸ºåŠ›
<br><br><img alt="Pasted image 20231108104230.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108104230.png"><br>
<br>å¯é æ•°æ®ä¼ è¾“ä¸ºä¸Šå±‚å®ä½“æä¾›çš„æœåŠ¡æŠ½è±¡ï¼šæ•°æ®å¯ä»¥é€šè¿‡ä¸€æ¡å¯é çš„ä¿¡é“è¿›è¡Œä¼ è¾“ï¼Œå€ŸåŠ©äºå¯é ä¿¡é“ï¼Œä¼ è¾“æ•°æ®æ¯”ç‰¹å°±ä¸ä¼šå—åˆ°æŸå (ç”± 0 å˜ä¸º 1 æˆ–è€…ç›¸å) æˆ–ä¸¢å¤±ï¼Œè€Œä¸”æ‰€æœ‰æ•°æ®éƒ½æ˜¯æŒ‰ç…§å…¶å‘é€é¡ºåºè¿›è¡Œäº¤ä»˜
<br>å¯é æ•°æ®ä¼ è¾“åè®® (reliable data transfer protocol)ï¼šå°†ä¸‹å±‚åè®®æä¾›çš„ä¸å¯é ä¿¡é“å°è£…æˆå¯é ä¿¡é“
<br>è€ƒè™‘å› ç´ ï¼šåº•å±‚ä¿¡é“

<br>æŸåæ¯”ç‰¹
<br>ä¸¢å¤±åˆ†ç»„
<br>ä¸ä¼šå¯¹åˆ†ç»„é‡æ’åº


<br>åœ¨æœ¬èŠ‚ä¸­ä»…è€ƒè™‘<a data-tooltip-position="top" aria-label="å› ç‰¹ç½‘ > ^fa9487" data-href="å› ç‰¹ç½‘#^fa9487" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html#^fa9487" class="internal-link" target="_self" rel="noopener">å•å‘æ•°æ®ä¼ è¾“</a> (unidirectional data transfer) çš„æƒ…å†µï¼Œä¸è€ƒè™‘å¯é çš„ <a data-tooltip-position="top" aria-label="å› ç‰¹ç½‘ > ^86d918" data-href="å› ç‰¹ç½‘#^86d918" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html#^86d918" class="internal-link" target="_self" rel="noopener">åŒå‘æ•°æ®ä¼ è¾“</a> (bidirectional data transfer)ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„æœ¬èŠ‚å®ç°åè®®éœ€è¦åœ¨å‘é€ç«¯å’Œæ¥æ”¶ç«¯ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“æ§åˆ¶åˆ†ç»„
<br><br>
<br><a data-tooltip-position="top" aria-label="https://hackmd.io/@bob840806/r1Q5GaMUX" rel="noopener" class="external-link" href="https://hackmd.io/@bob840806/r1Q5GaMUX" target="_blank">Principle of Reliable Data Transfer</a> [@PrincipleReliableData]
<br>
<br><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Finite-state_machine" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Finite-state_machine" target="_blank">æœ‰é™çŠ¶æ€æœº</a> [@FinitestateMachineWikipedia] (Finite-State Machine, FSM)ï¼šä¸€ç§è®¡ç®—çš„æ•°å­¦æ¨¡å‹ã€‚ä½œä¸ºä¸€ç§æŠ½è±¡æœºå™¨ï¼ŒFSM å¯ä»¥åœ¨ä»»ä½•ç»™å®šæ—¶é—´å†…å¤„äºæœ‰é™æ•°é‡çš„çŠ¶æ€ä¹‹ä¸€ã€‚FSM å¯ä»¥æ ¹æ®ä¸€äº›è¾“å…¥ä»ä¸€ä¸ªçŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼›ä»ä¸€ä¸ªçŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–ç§°ä¸ºè½¬æ¢ã€‚FSM ç”±å…¶çŠ¶æ€åˆ—è¡¨ã€åˆå§‹çŠ¶æ€å’Œè§¦å‘æ¯ä¸ªè½¬æ¢çš„è¾“å…¥å®šä¹‰ (PSï¼šåœ¨å®è§‚ä¸Šçœ‹é€šç”¨è®¡ç®—æœºä¹Ÿå¯ä»¥çœ‹ä½œä¸€ä¸ªæœ‰é™çŠ¶æ€æœºå“¦ï¼Œåªæ˜¯è®¡ç®—æœºçš„çŠ¶æ€è¦æ¯”è¿™é‡Œæè¿°çš„çŠ¶æ€æœºå¤šå¾—å¤šå¾—å¤šï¼Œå¯„å­˜å™¨ã€cacheã€å†…å­˜ã€å¤–å­˜çš„çŠ¶æ€ç­‰éšç€æŒ‡ä»¤çš„æ‰§è¡Œä¸æ–­è½¬æ¢ï¼Œå…¶ä¸­å­˜å‚¨æ•°æ®çš„ä½æ¨¡å¼ä¸æ–­æ”¹å˜)
<br><br>
<br>è€ƒè™‘åº•å±‚ä¿¡é“æ˜¯å®Œå…¨å¯é çš„ï¼Œæ—¢ä¸å‡ºç°æ¯”ç‰¹æŸå(ä½å…ƒé”™è¯¯)ï¼Œä¹Ÿä¸ä¸¢å¤±åˆ†ç»„ï¼Œåˆ†ç»„è¿˜æ˜¯æŒ‰åºåˆ°è¾¾çš„<br>
<img alt="Pasted image 20231108112409.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108112409.png" style="width: 350px; max-width: 100%;"> <img alt="Pasted image 20231108112423.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108112423.png" style="width: 350px; max-width: 100%;">
<br>
<br>æ°´å¹³çº¿ä¸Šæ–¹ä¸ºé€ æˆè½¬ç§»çš„äº‹ä»¶ï¼Œä¸‹æ–¹ä¸ºäº‹ä»¶å‘ç”Ÿæ—¶æ‰€é‡‡å–çš„åŠ¨ä½œï¼Œè‹¥ä¸é‡‡å–ä»»ä½•åŠ¨ä½œåˆ™ä¸ºç©ºç™½
<br>å‘é€ç«¯å’Œæ¥æ”¶ç«¯å‡åªæœ‰ä¸€ç§çŠ¶æ€å³ç­‰å¾…ä¸Š/ä¸‹å±‚çš„è°ƒç”¨
<br>å‡½æ•°ä½œç”¨

<br>rdt_send(data)ï¼šä»ä¸Šå±‚æ¥æ”¶æ•°æ® (å¦‚æœå¯é æ•°æ®ä¼ è¾“å®ç°åœ¨ Layer4ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®å°±æ˜¯ Layer5 æ³¨å…¥ socket çš„æŠ¥æ–‡ (message)(å¯ä»¥æ˜¯ HTTP æŠ¥æ–‡ï¼ŒSMTP æŠ¥æ–‡...))
<br>make_pkt(packet, data)ï¼šå°†ä¸Šå±‚æ•°æ®(æ ¹æ®éœ€è¦æ‹†åˆ†)åŠ ä¸Šå¤´éƒ¨å»ºç«‹<a data-tooltip-position="top" aria-label="å› ç‰¹ç½‘ > ^23aa67" data-href="å› ç‰¹ç½‘#^23aa67" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html#^23aa67" class="internal-link" target="_self" rel="noopener">åˆ†ç»„</a> (æ³¨æ„âš ï¸ï¼šè¿™é‡Œçš„åˆ†ç»„æŒ‡çš„æ˜¯å°åŒ…ï¼Œåœ¨ä¸åŒç½‘ç»œå±‚çº§ä¸­çš„åç§°ä¸åŒ)
<br>udt_send(packet)ï¼šå°†æ­¤åˆ†ç»„é€å…¥ä¸‹å±‚ä¿¡é“
<br>rdt_rcv(packet)ï¼šä»ä¸‹å±‚ä¿¡é“æ¥æ”¶åˆ†ç»„
<br>extract(packet,data)ï¼šä»åˆ†ç»„ä¸­å–å‡ºæ•°æ®
<br>deliver_data(data)ï¼šå°†æ•°æ®äº¤ç»™ä¸Šå±‚


<br><img alt="Pasted image 20231108125514.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108125514.png"><br>                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚            â”‚               â”‚            â”‚
                              â”‚   sender   â”‚               â”‚  receiver  â”‚
                              â”‚            â”‚               â”‚            â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   layer 5           layer 4                    layer 3              layer 4             layer 5
                                     â”‚                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      waiting for      â”‚                           â”‚
â”‚datadatadataâ”‚      layer 5          â”‚                           â”‚
â”‚datadata    â”‚      invocation       â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚                           â”‚
 layer 5 call   rdt_send(data)       â”‚                           â”‚  waiting for
                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚                           â”‚  layer 3
                packet=make_pkt(data)â”‚                           â”‚  invocation
                udt_send(packet)     â”‚                           â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                           â”‚
                      â”‚headdatadataâ”‚ â”‚ layer 3 channel delivery  â”‚
                      â”‚datadatadataâ”‚ â”‚         reliable          â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚                           â”‚ â”‚headdatadataâ”‚
                                     â”‚                           â”‚ â”‚datadatadataâ”‚
                                     â”‚                           â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚              layer 3 call â”‚ rdt_rcv(packet)
                    waiting for      â”‚                           â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
                    layer 5          â”‚                           â”‚ extract(packet,data)
                    invocation       â”‚                           â”‚ deliver_data(data)  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚                           â”‚                     â”‚datadatadataâ”‚
                                     â”‚                           â”‚                     â”‚datadata    â”‚
                                     â”‚                           â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚                           â”‚
                                     â”‚                           â”‚
                                     â”‚                           â”‚  waiting for
                                     â”‚                           â”‚  layer 3
   From:                             â”‚                           â”‚  invocation
   Chris White                       â”‚                           â”‚
                                     â–¼                           â–¼
Copy<br><br>
<br>è€ƒè™‘ç»è¿‡åº•å±‚ä¿¡é“ååˆ†ç»„çš„æ¯”ç‰¹å¯èƒ½å—æŸ(1 å˜ 0ï¼Œ0 å˜ 1)
<br>
<br>é€šè¿‡è‚¯å®šç¡®è®¤ (positive acknowledgement) å’Œå¦å®šç¡®è®¤ (negative acknowledgement)ï¼Œæ¥æ”¶æ–¹è®©å‘é€æ–¹çŸ¥é“é‚£äº›å†…å®¹èƒ½è¢«æ­£ç¡®æ¥æ”¶ï¼Œå“ªäº›å†…å®¹éœ€è¦é‡ä¼ ï¼Œäºæ˜¯æœ‰è‡ªåŠ¨é‡ä¼ è¯·æ±‚ (Automatic Repeat reQuest, ARQ) åè®®
<br>ARQ åè®®åŸºäºä¸‰ç§æœºåˆ¶

<br>å·®é”™æ£€æµ‹ï¼šè®©æ¥æ”¶ç«¯èƒ½å¤Ÿå‘ç°æ¯”ç‰¹å·®é”™ï¼ŒUDP ä½¿ç”¨<a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > æ£€éªŒå’Œè®¡ç®—è¿‡ç¨‹" data-href="è¿è¾“å±‚#æ£€éªŒå’Œè®¡ç®—è¿‡ç¨‹" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#æ£€éªŒå’Œè®¡ç®—è¿‡ç¨‹" class="internal-link" target="_self" rel="noopener">åç æ±‚å’Œ</a>çš„æ–¹å¼æ¥æ£€éªŒ
<br>æ¥æ”¶ç«¯åé¦ˆï¼šæ¥æ”¶ç«¯åé¦ˆä¿¡æ¯ç»™å‘é€ç«¯ï¼ŒACK ä»£è¡¨æˆåŠŸï¼ŒNAK ä»£è¡¨å¤±è´¥
<br>é‡ä¼ ï¼šåˆ†ç»„æœ‰å·®é”™ï¼Œå°±é‡ä¼ åˆ†ç»„


<br>å‡½æ•°ä½œç”¨<br>
1. make_pkt(data,checksum)ï¼šè®¡ç®— data çš„ checksum å¹¶ä¸”å°†æ•°æ®å°åŒ…<br>
2. isNAK(rcvpkt)ï¼šreceived packetä¸º NAK<br>
3. isACK(rcvpkt)ï¼šreceived packet ä¸º ACK<br>
4. corrupt(rcvpkt)ï¼šrcvpkt æœ‰æ¯”ç‰¹é”™è¯¯<br>
5. notcorrupt(rcvpkt)ï¼šrcvpkt æ²¡æœ‰æ¯”ç‰¹é”™è¯¯<br>
<img src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108153309.png"> <img alt="Pasted image 20231108153346.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108153346.png">
<br>
<br>æ³¨æ„åœ¨ make packet çš„è¿‡ç¨‹ä¸­åŒæ—¶è¿˜æœ‰è®¡ç®— checksum çš„è¿‡ç¨‹
<br>
<br>å‘é€ç«¯å…·æœ‰ä¸¤ç§çŠ¶æ€

<br>ç­‰å¾…æ¥è‡ªä¸Šå±‚çš„è°ƒç”¨ï¼Œå½“æ¥æ”¶ä¸Šå±‚çš„æ•°æ®åè¿›å…¥çŠ¶æ€ 2ï¼Œ
<br>ç­‰å¾…æ¥æ”¶ç«¯ä¼ é€ ACK æˆ– NAK ï¼Œæ”¶åˆ° ACK è½¬ç§»åˆ°çŠ¶æ€ 1 å¹¶ç­‰å¾…ä¸Šå±‚çš„ä¸‹ä¸€ä¸ªè°ƒç”¨ï¼Œæ”¶åˆ° NAK é‡ä¼ ä¸€æ¬¡åˆ†ç»„å¹¶é‡å¤çŠ¶æ€ 2


<br>æ¥æ”¶ç«¯åªæœ‰ä¸€ç§çŠ¶æ€

<br>æ ¹æ®æ”¶åˆ°çš„åˆ†ç»„å›ä¼  ACK æˆ– NAK


<br>åœç­‰ (stop-and-wait)ï¼šå‘é€æ–¹å°†ä¸ä¼šå‘é€ä¸€å—æ–°æ•°æ®ï¼Œé™¤éå‘é€æ–¹ç¡®ä¿¡æ¥æ”¶æ–¹å·²æ­£ç¡®æ¥æ”¶å½“å‰åˆ†ç»„
<br>ç¼ºé™·ï¼šæœªè€ƒè™‘ ACK æˆ– NAK å—æŸçš„å¯èƒ½æ€§
<br><br>
<br>å½“å‘é€ç«¯æ”¶åˆ°æŸåçš„ ACK æˆ– NAK åˆ†ç»„æ—¶ï¼Œå°±é‡ä¼ å½“å‰çš„æ•°æ®åˆ†ç»„ï¼Œä½†æ˜¯å¼•å…¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œå½“æ¥æ”¶æ–¹å‘é€çš„ ACK åˆ†ç»„æŸåæ—¶ä¼šæ”¶åˆ°å†—ä½™åˆ†ç»„(duplicate packet)ï¼Œè€Œæ¥æ”¶ç«¯åˆ†ä¸æ¸…æ¥æ”¶åˆ°çš„æ˜¯æ–°åˆ†ç»„è¿˜æ˜¯é‡ä¼ çš„åˆ†ç»„ (å‘é€ ACK æ—¶æ¥æ”¶ç«¯æœŸæœ›å¾—åˆ°æ–°åˆ†ç»„ä½†æ˜¯ ACK æŸååæ¥æ”¶ç«¯ä¼šæ”¶åˆ°å†—ä½™åˆ†ç»„ï¼Œrdt 2.0æ¥æ”¶ç«¯ï¼šğŸ¤”ï¸ğŸ˜…ğŸ¤ªï¼Œå‘é€ NAK æ—¶æ¥æ”¶ç«¯æœŸæœ›å¾—åˆ°é‡ä¼ çš„åˆ†ç»„åˆ™ä¸ä¼šå‡ºç°æ­§ä¹‰)
<br>è§£å†³æ–¹æ³•æ˜¯åœ¨åˆ†ç»„å¤´éƒ¨åŠ å…¥åºå· (sequence number) å­—æ®µ
<br>å‡½æ•°ä½œç”¨ï¼š

<br>has_seq0(rcvpkt)ï¼šæ¥æ”¶åˆ†ç»„çš„åºå·å­—æ®µä¸º 0
<br>has_seq1(rcvpkt)ï¼šæ¥æ”¶åˆ†ç»„çš„åºå·å­—æ®µä¸º 1<br>
<img alt="Pasted image 20231108203138.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108203138.png"><br>
<img alt="Pasted image 20231108203246.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231108203246.png"><img alt="æ‚é¡¹-9.jpg" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/æ‚é¡¹-9.jpg"><img alt="æ‚é¡¹-8.jpg" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/æ‚é¡¹-8.jpg">


<br>å‘é€æ–¹æœ€å¼€å§‹å¤„äº ç­‰å¾…æ¥è‡ªä¸Šå±‚çš„è°ƒç”¨0 çŠ¶æ€ï¼Œå½“å‘é€æ–¹å‘é€ä¸€ä¸ª seq=0 çš„åˆ†ç»„åï¼Œè¿›å…¥ ç­‰å¾… ACK æˆ– NAK 0 çŠ¶æ€ã€‚
<br>æ­¤æ—¶åœ¨ ç­‰å¾…æ¥è‡ªä¸‹å±‚çš„0 çš„æ¥æ”¶æ–¹å‡ºç°ä¸¤ç§æƒ…å†µï¼Œæƒ…å†µ 1 æ¥æ”¶æ–¹æ”¶åˆ°äº†æ— å·®é”™çš„åˆ†ç»„è¿”å›ä¸€ä¸ª ACK åˆ†ç»„ï¼Œå¹¶è½¬æ¢ä¸º ç­‰å¾…æ¥è‡ªä¸‹å±‚çš„1 çŠ¶æ€ï¼Œæƒ…å†µ 2 æ¥æ”¶æ–¹æ”¶åˆ°äº†æœ‰å·®é”™çš„åˆ†ç»„è¿”å›ä¸€ä¸ª NAK åˆ†ç»„ï¼Œå¹¶ä¸”ä¿æŒå½“å‰çŠ¶æ€
<br>å½“ ç­‰å¾… ACK æˆ– NAK 0 çŠ¶æ€çš„å‘é€æ–¹æ”¶åˆ°ç¡®è®¤åˆ†ç»„æ—¶ï¼Œå‡ºç°ä¸‰ç§æƒ…å†µï¼Œæƒ…å†µ 1 æ”¶åˆ° ACK åˆ†ç»„ï¼Œæƒ…å†µ 2 æ”¶åˆ° NAK åˆ†ç»„ï¼Œæƒ…å†µ 3 åˆ†ç»„å‡ºç°äº†å·®é”™ï¼Œæƒ…å†µ 1 æ—¶åˆ†ç»„è½¬æ¢ä¸º ç­‰å¾…æ¥è‡ªä¸Šå±‚çš„è°ƒç”¨1 çŠ¶æ€ï¼Œè¿›å…¥ä¸‹åŠä¸ªå‘¨æœŸï¼Œæƒ…å†µ 2 ä¸æƒ…å†µ 3 æ—¶å‘é€ç«¯é‡ä¼  seq=0 çš„åˆ†ç»„å¹¶ä¿æŒå½“å‰çŠ¶æ€ç­‰å¾…ç¡®è®¤åˆ†ç»„
<br>å½“æ¥æ”¶æ–¹å†æ¬¡æ”¶åˆ°é‡ä¼ çš„ seq=0 åˆ†ç»„æ—¶ï¼Œæ¥æ”¶æ–¹å¯èƒ½å­˜åœ¨ä¸¤ç§çŠ¶æ€ï¼Œç¬¬ä¸€ç§ 2 ä¸­çš„æŠ¥æ–‡å‡ºç°äº†å·®é”™ï¼Œä»ç„¶åœç•™åœ¨ ç­‰å¾…æ¥è‡ªä¸‹å±‚çš„0 çŠ¶æ€ï¼Œç¬¬äºŒç§ 2 ä¸­çš„æŠ¥æ–‡å·²ç»è¢«æ¥æ”¶é€å¾€ä¸Šå±‚ï¼Œè½¬æ¢ä¸º ç­‰å¾…æ¥è‡ªä¸‹å±‚çš„1 çŠ¶æ€ï¼Œç¬¬ä¸€ç§çŠ¶æ€ä¸‹è·³è½¬è‡³ 2ï¼Œç¬¬äºŒç§çŠ¶æ€å­˜åœ¨ä¸¤ç§æƒ…å†µï¼Œæƒ…å†µ 1 é‡ä¼ çš„ seq=0 åˆ†ç»„å®Œå¥½ï¼Œæ­¤æ—¶æ¥æ”¶æ–¹å‘é€ ACK åˆ†ç»„ï¼Œæƒ…å†µ 2  é‡ä¼ çš„ seq=0 åˆ†ç»„å‡ºç°å·®é”™ï¼Œæ­¤æ—¶æ¥æ”¶æ–¹å‘é€ NAK åˆ†ç»„ï¼Œè·³è½¬è‡³ 3ï¼Œç›´è‡³å‘é€ç«¯æ¥æ”¶åˆ° ACK åˆ†ç»„è½¬æ¢ä¸º ç­‰å¾…æ¥è‡ªä¸Šå±‚çš„è°ƒç”¨1 çŠ¶æ€
<br><br><img alt="Pasted image 20231109085428.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231109085428.png"><br>
<img alt="Pasted image 20231109085444.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231109085444.png"><br><br>
<br>é™¤äº†æ¯”ç‰¹å—æŸä»¥å¤–ï¼Œåº•å±‚ä¿¡é“è¿˜ä¼šå‡ºç°ä¸¢åŒ…çš„æƒ…å†µ
<br>è¿™é‡Œå°†æ£€æµ‹å’Œå›å¤ä¸¢åŒ…çš„å·¥ä½œéƒ½äº¤ç»™å‘é€ç«¯å¤„ç†
<br>å‘é€æ–¹å‘é€çš„æ•°æ®åˆ†ç»„æˆ–æ¥æ”¶æ–¹å¯¹è¯¥åˆ†ç»„çš„ ACK å‘ç”Ÿäº†ä¸¢å¤±ï¼Œå‘é€æ–¹éƒ½æ¥æ”¶ä¸åˆ°æ¥è‡ªæ¥æ”¶æ–¹çš„å“åº”ï¼Œå¦‚æœå‘é€æ–¹æ„¿æ„ç­‰å¾…è¶³å¤Ÿé•¿çš„æ—¶é—´ä»¥ä¾¿ç¡®å®šåˆ†ç»„å·²ä¸¢å¤±ï¼Œåˆ™å®ƒåªéœ€é‡ä¼ è¯¥æ•°æ®åˆ†ç»„å³å¯
<br>ç†æƒ³çš„åè®®åº”å°½å¯èƒ½å¿«åœ°ä»ä¸¢åŒ…ä¸­å›å¤è¿‡æ¥ï¼Œæ‰€ä»¥å¯¹ç­‰å¾…æ—¶é—´çš„é€‰æ‹©éå¸¸é‡è¦ï¼Œå¦‚æœåœ¨è¿™æ®µæ—¶é—´å†…æ²¡æ”¶åˆ° ACK åˆ™é‡ä¼ è¯¥åˆ†ç»„ï¼Œå¦‚æœåˆ†ç»„ç»å†äº†ä¸€ä¸ªç‰¹åˆ«å¤§çš„æ—¶å»¶ï¼Œå‘é€ç«¯ä¹Ÿä¼šé‡ä¼ è¯¥åˆ†ç»„ï¼Œå³ä½¿æ•°æ®åˆ†ç»„å’Œ ACK éƒ½æ²¡ä¸¢å¤±ï¼Œäºæ˜¯åœ¨ä¿¡é“ä¸­å¼•å…¥äº†å†—ä½™æ•°æ®åˆ†ç»„ (duplicate data packet)
<br>å€’æ•°å®šæ—¶å™¨ (countdown timer)ï¼šåœ¨ä¸€ä¸ªç»™å®šæ—¶é—´é‡åï¼Œå¯ä¸­æ–­å‘é€æ–¹

<br>å‘é€æ–¹æ¯æ¬¡å‘é€ä¸€ä¸ªåˆ†ç»„ï¼Œä¾¿å¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨
<br>å“åº”å®šæ—¶å™¨ä¸­æ–­
<br>ä¸­æ­¢å®šæ—¶å™¨


<br>å› ä¸ºåˆ†ç»„åºå·åœ¨ 0 å’Œ 1 ä¹‹é—´äº¤æ›¿ï¼Œrdt 3.0 è¢«ç§°ä¸ºæ¯”ç‰¹äº¤æ›¿åè®® (alternating-bit protocol)<br>
<img alt="Pasted image 20231109091635.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231109091635.png"> <img alt="Pasted image 20231109091802.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231109091802.png">
<br>
<br>æ•°æ®ä¼ è¾“åè®®çš„è¦ç‚¹

<br>æ£€éªŒå’Œ
<br>åºå·
<br>å®šæ—¶å™¨
<br>è‚¯å®šçš„å¦å®šç¡®è®¤


<br><br>
<br>è€ƒè™‘ä¸€ç§æƒ…å†µï¼Œä¸¤ä¸ªç«¯ç³»ç»Ÿä¹‹é—´çš„ <a data-tooltip-position="top" aria-label="åº”ç”¨å±‚ > ^c4f1a1" data-href="åº”ç”¨å±‚#^c4f1a1" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/åº”ç”¨å±‚.html#^c4f1a1" class="internal-link" target="_self" rel="noopener">RTT</a>  ä¸º  ï¼Œé€šè¿‡ä¸€æ¡å‘é€é€Ÿç‡  ä¸º  çš„ä¿¡é“ç›¸è¿ï¼ŒåŒ…æ‹¬é¦–éƒ¨å­—æ®µå’Œæ•°æ®çš„åˆ†ç»„  ä¸º  ï¼Œå°†åˆ†ç»„é€å…¥ä¿¡é“çš„ <a data-tooltip-position="top" aria-label="å› ç‰¹ç½‘ > ^2ad19c" data-href="å› ç‰¹ç½‘#^2ad19c" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html#^2ad19c" class="internal-link" target="_self" rel="noopener">ä¼ è¾“æ—¶å»¶</a> ä¸º 
<br>ä¿¡é“çš„åˆ©ç”¨ç‡ (utilization)ï¼šå‘é€æ–¹å°†åˆ†ç»„é€è¿›ä¿¡é“çš„ä¼ è¾“æ—¶å»¶ï¼Œä¸å‘é€æ—¶é—´ä¹‹æ¯” () (ACK åˆ†ç»„å¤ªå°ï¼Œæ¥æ”¶ç«¯è¿”å› ACK çš„ä¼ è¾“æ—¶å»¶å¿½ç•¥ä¸è®¡)ï¼Œè¿˜å¿½ç•¥äº†å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„åº•å±‚åè®®å¤„ç†æ—¶é—´ï¼Œå’Œå¯èƒ½å‡ºç°çš„è·¯ç”±å™¨å¤„ç†å’Œæ’é˜Ÿå®éªŒ 
<br>ä½¿ç”¨æµæ°´çº¿æŠ€æœ¯ (pipelining)ï¼š<img alt="Pasted image 20231109101141.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231109101141.png">

<br>å¢åŠ åºå·èŒƒå›´
<br>å‘é€æ–¹å’Œæ¥æ”¶æ–¹ç¼“å­˜å¤šä¸ªåˆ†ç»„ï¼Œå‘é€æ–¹æœ€ä½é™åº¦åº”è¯¥ç¼“å­˜å‘é€ä½†æœªè¢«ç¡®è®¤çš„åˆ†ç»„
<br>å·®é”™æ¢å¤çš„ä¸¤ç§åŸºæœ¬æ–¹æ³•ï¼šå›é€€ N æ­¥ (Go-Back-N, GBN)å’Œé€‰æ‹©é‡ä¼  (Selective Repeat, SR)


<br><br><img alt="Pasted image 20231109103751.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231109103751.png"><br>
<br>åŸºåºå· (base)ï¼šæœ€æ—©æœªç¡®è®¤çš„åˆ†ç»„
<br>ä¸‹ä¸€ä¸ªåºå· (nextseqnum)ï¼šä¸‹ä¸€ä¸ªå¾…å‘åˆ†ç»„çš„åºå·
<br>N å¸¸è¢«ç§°ä¸ºçª—å£é•¿åº¦ (window size)ï¼ŒGBN åè®®ä¹Ÿå¸¸è¢«ç§°ä¸ºæ»‘åŠ¨çª—å£åè®® (sliding-window protocol)
<br>åˆ†ç»„çš„åºå·æ‰¿è½½åœ¨åˆ†ç»„é¦–éƒ¨çš„å®šé•¿å­—æ®µä¸­ï¼Œå¦‚æœåˆ†ç»„åºå·å­—æ®µçš„æ¯”ç‰¹æ•°æ˜¯ kï¼Œåˆ™è¯¥åºå·çš„èŒƒå›´æ˜¯  ï¼ŒTCP æœ‰ä¸€ä¸ª 32bit çš„åºå·å­—æ®µï¼ŒTCP åºå·æ˜¯æŒ‰å­—èŠ‚æµä¸­çš„å­—èŠ‚è¿›è¡Œè®¡æ•°çš„ï¼Œè€Œä¸æ˜¯æŒ‰åˆ†ç»„è®¡æ•°
<br>GBN å‘é€æ–¹éœ€è¦ç›¸åº”ä¸‰ç§ç±»å‹çš„äº‹ä»¶ï¼š<img alt="Pasted image 20231109143937.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231109143937.png">

<br>ä¸Šå±‚è°ƒç”¨ï¼šå½“æ”¶åˆ°æ¥è‡ªä¸Šå±‚çš„è°ƒç”¨æ—¶éœ€è¦æ£€æŸ¥çª—å£æ˜¯å¦å·²æ»¡ï¼Œå¦‚æœæœªæ»¡åˆ™å‘é€ä¸€ä¸ªåˆ†ç»„ï¼Œå¦‚æœå·²æ»¡åˆ™å°†æ•°æ®è¿”å›ç»™ä¸Šå±‚è®©ä¸Šå±‚ä¸€ä¼šå†è¯•ï¼Œå®é™…æƒ…å†µä¸­å‘é€æ–¹å¯èƒ½ç¼“å­˜è¿™ä¸ªæ•°æ®ï¼Œæˆ–è€…ä½¿ç”¨åŒæ­¥æœºåˆ¶å…è®¸ä¸Šå±‚åœ¨çª—å£ä¸æ»¡æ—¶æ‰è°ƒç”¨
<br>æ”¶åˆ°ä¸€ä¸ª ACK ï¼šæ›´æ–° baseï¼Œå¦‚æœæœ‰å·²å‘é€ä½†æœªè¢«ç¡®è®¤çš„åˆ†ç»„ï¼Œåˆ™å®šæ—¶å™¨è¢«é‡æ–°å¯åŠ¨ï¼Œå¦‚æœæ²¡æœ‰å·²å‘é€ä½†æœªè¢«ç¡®è®¤çš„åˆ†ç»„ï¼Œåˆ™åœæ­¢å®šæ—¶å™¨
<br>è¶…æ—¶äº‹ä»¶ï¼šå¦‚æœå‡ºç°è¶…æ—¶ï¼Œå‘é€æ–¹é‡ä¼ æ‰€æœ‰å·²å‘é€ä½†æœªè¢«ç¡®è®¤è¿‡çš„åˆ†ç»„


<br>æ¥æ”¶æ–¹åŠ¨ä½œï¼š<img alt="Pasted image 20231109143951.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231109143951.png">

<br>å¦‚æœåºå·ä¸º n çš„åˆ†ç»„æŒ‰åºåˆ°è¾¾ï¼Œåˆ™ä¸ºåˆ†ç»„ n å‘é€ä¸€ä¸ª ACK nï¼Œå¦‚æœåˆ°è¾¾çš„åˆ†ç»„ä¸æ˜¯ n (å¤±åº)ï¼Œåˆ™ä¸¢å¼ƒè¯¥åˆ†ç»„ç­‰å¾…å‘é€ç«¯é‡ä¼ 


<br>åŸºäºäº‹ä»¶çš„ç¼–ç¨‹ (event-based programming) æ–¹å¼ï¼šåœ¨åè®®æ ˆä¸­å¯¹æ‹“å±• FSM çš„å®ç°ä»¥å„ç§è¿‡ç¨‹å½¢å¼å‡ºç°ï¼Œæ¯ä¸ªè¿‡ç¨‹å®ç°äº†åœ¨å“åº”å¯èƒ½å‡ºç°çš„äº‹ä»¶æ—¶è¦é‡‡å–çš„åŠ¨ä½œï¼Œå¯èƒ½å‡ºç°çš„äº‹ä»¶

<br>ä¸Šå±‚å®ä½“è°ƒç”¨
<br>å®šæ—¶å™¨ä¸­æ–­
<br>ä¸‹å±‚å®ä½“è°ƒç”¨


<br><br>
<br>GBN æœ¬èº«å­˜åœ¨ç€ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œå½“çª—å£é•¿åº¦å’Œå¸¦å®½æ—¶å»¶ç§¯éƒ½å¾ˆå¤§æ—¶ï¼Œæµæ°´çº¿ä¸­æœ‰å¾ˆå¤šåˆ†ç»„ï¼Œå•ä¸ªåˆ†ç»„çš„å·®é”™å°±èƒ½å¼•èµ· GBN é‡ä¼ å¤§é‡åˆ†ç»„
<br>é€‰æ‹©é‡ä¼  (SR) åè®®é€šè¿‡è®©å‘é€æ–¹ä»…é‡ä¼ æ€€ç–‘åœ¨æ¥æ”¶æ–¹å‡ºé”™çš„åˆ†ç»„é¿å…äº†ä¸å¿…è¦çš„é‡ä¼ 
<br>SR å‘é€æ–¹çš„äº‹ä»¶ä¸åŠ¨ä½œï¼š<img alt="Pasted image 20231109150700.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231109150700.png">

<br>ä»ä¸Šå±‚æ”¶åˆ°æ•°æ®ï¼šè‹¥ ï¼Œåˆ™å°†æ•°æ®æ‰“åŒ…å¹¶å‘é€ï¼Œå¦åˆ™å°†æ•°æ®ç¼“å­˜æˆ–è¿”å›ç»™ä¸Šå±‚
<br>è¶…æ—¶ï¼šæ¯ä¸ªåˆ†ç»„å¿…é¡»æ‹¥æœ‰è‡ªå·±çš„é€»è¾‘å®šæ—¶å™¨ï¼Œè¶…æ—¶å‘ç”Ÿååªèƒ½å‘é€ä¸€ä¸ªåˆ†ç»„ 
<br>æ”¶åˆ°ACKï¼šè‹¥åˆ†ç»„åºå·åœ¨çª—å£å†…ï¼Œåˆ™ SR å‘é€æ–¹å°†è¢«ç¡®è®¤çš„åˆ†ç»„æ ‡è®°ä¸ºå·²æ¥æ”¶ï¼Œè‹¥åˆ†ç»„çš„åºå·ç­‰äº send_base åˆ™å°†çª—å£åŸºåºå·å‘å‰ç§»åŠ¨åˆ°æœ€å°çš„æœªç¡®è®¤åˆ†ç»„å¤„ï¼Œå¦‚æœçª—å£å·²åˆ°äº†æœ‰åºå·è½åœ¨çª—å£å†…çš„æœªå‘é€åˆ†ç»„ï¼Œåˆ™å‘é€è¿™äº›åˆ†ç»„


<br>SR æ¥æ”¶æ–¹çš„äº‹ä»¶ä¸åŠ¨ä½œï¼š<img alt="Pasted image 20231109151435.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231109151435.png">

<br>åºå·åœ¨[rcv_base, rcv_base + N - 1] å†…çš„åˆ†ç»„è¢«æ­£ç¡®æ¥æ”¶ï¼šå›ä¼ é€‰æ‹© ACK (ä¸å½“å‰æ”¶åˆ°åˆ†ç»„ seq å¯¹åº”) ï¼Œåœ¨æ¥æ”¶ç«¯å¦‚æœè¯¥åˆ†ç»„ä»¥å‰æ²¡æ”¶åˆ°è¿‡ï¼Œä¸”åºå·å¤§äºæ¥æ”¶çª—å£çš„åŸºåºå· (å›¾ä¸­ rcv_base + 123çš„é»‘æ¡†æ¡†) æ—¶ï¼Œè¿™äº›åˆ†ç»„æ˜¯å¤±åºåˆ†ç»„ï¼Œç”±æ¥æ”¶ç«¯ç¼“å­˜ï¼Œå¦‚æœåºå·ç­‰äºæ¥æ”¶çª—å£çš„åŸºåºå· (rcv_base) æ—¶ï¼Œåˆ™å°†è¯¥åˆ†ç»„åŠä»¥å‰ç¼“å­˜çš„åºå·è¿ç»­å¤±åºåˆ†ç»„ (å›¾ä¸­çš„ rcv_base + 1, rcv_base + 2, rcv_base + 3 çš„é»‘æ¡†æ¡†)äº¤ä»˜ç»™ä¸Šå±‚ï¼Œæ¥æ”¶çª—å£å‘å‰ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæœªäº¤ä»˜çš„åˆ†ç»„å¤„ (å›¾ä¸­ rcv_base + 4)
<br>åºå·åœ¨[rcv_base - N, rcv_base - 1] å†…çš„åˆ†ç»„è¢«æ­£ç¡®æ¥æ”¶ï¼šå¿…é¡»äº§ç”Ÿä¸€ä¸ª ACK (ä¸åˆ†ç»„ seq å¯¹åº”)ï¼Œæ­¤åˆ†ç»„å‡ºç°çš„åŸå› æ˜¯æ¥æ”¶ç«¯å·²ç»æ”¶åˆ°åˆ†ç»„ç§»åŠ¨çª—å£ï¼Œä½†è¿”å›çš„ ACK æŸåï¼Œå‘é€ç«¯é‡ä¼ è¯¥åˆ†ç»„ï¼Œä¸ºäº†è®©å‘é€ç«¯æ¥æ”¶åˆ° ACK ç¡®è®¤å¹¶è®©å‘é€ç«¯çª—å£å‘å‰ç§»åŠ¨ï¼Œæ‰€ä»¥è¦äº§ç”Ÿ ACK 
<br>å…¶ä»–æƒ…å†µï¼šè‹¥å‡ºç°åˆ†ç»„æŸåç­‰æƒ…å†µåˆ™å¿½ç•¥è¯¥åˆ†ç»„ç­‰å¾…å‘é€ç«¯é‡ä¼ 


<br>å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä»¶çš„çª—å£é•¿åº¦å¿…é¡»å°äºæˆ–ç­‰äºåºå·ç©ºé—´å¤§å°çš„ä¸€åŠå¦åˆ™ä¼šå¼•èµ·æ­§ä¹‰ï¼Œæ¥æ”¶æ–¹ä¸çŸ¥é“æ¥æ”¶åˆ°çš„ä¸‹ä¸ªåˆ†ç»„æ˜¯é‡ä¼ çš„è¿˜æ˜¯å‘é€æ–¹çª—å£æ»‘åŠ¨åå‘é€çš„æ–°åˆ†ç»„
<br>å…ˆå‰å‡å®šåˆ†ç»„åœ¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„ä¿¡é“ä¸­ä¸èƒ½è¢«é‡æ–°æ’åºï¼Œä½†æ˜¯å®é™…ä¸Šé‡æ–°æ’åºæœ‰å¯èƒ½å‘ç”Ÿï¼Œä»¥å‰è¢«å‘å‘ä¿¡é“ä½†è¢«è®¤ä¸ºä¸¢å¤±äº†çš„åˆ†ç»„å¯èƒ½ä¼šçªç„¶å‡ºç°ï¼Œä¸ºäº†ç¡®ä¿åºå·ä¸è¢«é‡æ–°ä½¿ç”¨ï¼Œå‘é€æ–¹åœ¨å‘é€åºå·ä¸º x çš„åˆ†ç»„æ—¶éœ€è¦ç¡®ä¿¡ä»»ä½•å…ˆå‰å‘é€è¿‡çš„åºå·ä¸º x çš„åˆ†ç»„éƒ½ä¸åœ¨ç½‘ç»œä¸­ï¼Œé€šè¿‡å‡å®šåˆ†ç»„åœ¨ç½‘ç»œä¸­çš„å­˜æ´»æ—¶é—´ä¸ä¼šè¶…è¿‡æŸä¸ªå›ºå®šæœ€å¤§æ—¶é—´é‡æ¥åšåˆ°è¿™ä¸€ç‚¹
<br><br>
<br>TCP æ˜¯é¢å‘è¿æ¥çš„ (connection-oriented)ï¼Œåœ¨ä¸€ä¸ªåº”ç”¨è¿›ç¨‹æƒ³å¦ä¸€ä¸ªè¿›ç¨‹å‘é€æ•°æ®å‰ï¼Œä¸¤ä¸ªè¿›ç¨‹å¿…é¡»ç›¸äº’æ¡æ‰‹
<br>TCP è¿æ¥æ˜¯ç‚¹å¯¹ç‚¹çš„ (point-to-point)
<br>ä¸‰æ¬¡æ¡æ‰‹ (three-way handshake) <img alt="Pasted image 20231109164640.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231109164640.png">
<br>å‘é€ç¼“å­˜ (send buffer)ï¼šåœ¨ä¸‰æ¬¡æ¡æ‰‹æœŸé—´è®¾ç½®çš„ç¼“å­˜ï¼Œç”¨æ¥å­˜å‚¨é€šè¿‡å¥—æ¥å­—çš„æ•°æ®ï¼ŒTCP ä»ç¼“å­˜ä¸­å–å‡ºæ•°æ®å‘é€åˆ°ç½‘ç»œå±‚
<br>å•ä¸ª TCP æŠ¥æ–‡æ®µçš„æ•°æ®æ•°é‡å—é™äºæœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ (Maximum Segment Size, MSS)ï¼ŒMSS æ ¹æ®æœ¬åœ°ä¸»æœºå‘é€çš„æœ€å¤§é“¾è·¯å±‚å¸§é•¿åº¦(æœ€å¤§ä¼ è¾“å•å…ƒ(Maximum Transmission Unit, MTU)ï¼Œä¸åŒçš„é“¾è·¯å±‚åè®®ä¼šè§„å®šä¸åŒçš„ MTU)ï¼Œå¦‚æœè¿è¾“å±‚æŠ¥æ–‡æ®µè¶…è¿‡äº† MTU - IP å¤´éƒ¨é•¿åº¦ï¼Œå°±ä¼šè¢« IP åè®®åˆ†ç‰‡<img alt="æ‚é¡¹-10.jpg" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/æ‚é¡¹-10.jpg"> 
<br>MSS çš„å…¸å‹å€¼ä¸º 1460 å­—èŠ‚ï¼ŒEthernet å’Œ PPP Protocol éƒ½æœ‰ 1500 çš„æ ‡å‡† MTUï¼ŒMSS æ˜¯æŒ‡ Segment ä¸­åº”ç”¨å±‚ data çš„æœ€å¤§é•¿åº¦ï¼Œè€Œä¸æ˜¯åŒ…æ‹¬é¦–éƒ¨çš„ TCP segment çš„æœ€å¤§é•¿åº¦ï¼Œå¾ˆå®¹æ˜“æ··æ·†âš ï¸ (å¦‚æœåˆæ„Ÿåˆ°å›°æƒ‘äº†ï¼Œçœ‹çœ‹<a data-tooltip-position="top" aria-label="å› ç‰¹ç½‘ > ^23aa67" data-href="å› ç‰¹ç½‘#^23aa67" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html#^23aa67" class="internal-link" target="_self" rel="noopener">è¿™é‡Œ</a>)
<br>TCP ä¸ºæ¯å—å®¢æˆ·æ•°æ®é…ä¸Šé¦–éƒ¨ï¼Œå½¢æˆå¤šä¸ª TCP æŠ¥æ–‡æ®µ (TCP segment)
<br>TCP è¿æ¥çš„ç»„æˆï¼š

<br>å®¢æˆ·ç«¯ä¸»æœºä¸Šçš„ç¼“å­˜ã€å˜é‡å’Œä¸è¿›ç¨‹è¿æ¥çš„å¥—æ¥å­—
<br>æœåŠ¡ç«¯ä¸»æœºä¸Šçš„ç¼“å­˜ã€å˜é‡å’Œä¸è¿›ç¨‹è¿æ¥çš„å¥—æ¥å­—


<br><br><img alt="Pasted image 20231110084755.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231110084755.png" style="width: 500px; max-width: 100%;"> <img alt="Pasted image 20231110085334.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231110085334.png"><br>
<br>æºç«¯å£å·å’Œç›®çš„ç«¯å£å· (å„ 16 bits)ï¼šç”¨äºå¤šè·¯å¤ç”¨ / åˆ†è§£æ¥è‡ªä¸Šå±‚åº”ç”¨çš„æ•°æ®
<br>åºå·å­—æ®µ (sequence number field) å’Œ ç¡®è®¤å·å­—æ®µ (acknowledgement number field)(å„ 32 bits)ï¼šè¢« TCP å‘é€æ–¹å’Œæ¥æ”¶æ–¹ç”¨æ¥å®ç°å¯é æ•°æ®ä¼ è¾“æœåŠ¡
<br>é¦–éƒ¨é•¿åº¦å­—æ®µ (header length field)(4 bits)ï¼šæŒ‡ç¤ºäº†ä»¥ 32 bits çš„å­—ä¸ºå•ä½çš„ TCP é¦–éƒ¨é•¿åº¦ (æœ€å³è¾¹çš„æ‹¬å·é‡Œçš„ 8)
<br>æ ‡å¿—å­—æ®µ (flag field) (æœ€åˆå®šä¹‰ 6 bitsï¼Œç°åœ¨å­˜åœ¨ 3 bits çš„ä¿ç•™ä½ä¸ 9 bits çš„æ§åˆ¶ä½)ï¼š

<br>Accurate ECNï¼šæŒ‡ç¤ºç»è¿‡çš„è·¯ç”±å™¨æ­£åœ¨ç»å†æ‹¥å¡ï¼Œè¢«è·¯ç”±å™¨ç½®ä½ 
<br>CWR (Congestion Window Reduced)ï¼šå‘é€æ–¹æ¥æ”¶åˆ°äº†è®¾ç½®äº† ECE æ ‡å¿—çš„ TCP åŒ…ï¼Œå¹¶å·²é™ä½æ‹¥å¡çª—å£çš„å¤§å° 
<br>ECE (ECN-Echo)ï¼šè¿™ä¸ªæ ‡å¿—åœ¨ä¸¤ç§æƒ…å†µä¸‹ä¼šè¢«è®¾ç½®ã€‚ä¸€ç§æ˜¯ä½œä¸ºå¯¹äºæ”¶åˆ°è®¾ç½®äº† CEï¼ˆæ‹¥å¡ç»å†ï¼‰æ ‡å¿—çš„ IP åŒ…çš„å“åº”ã€‚å¦ä¸€ç§æ˜¯åœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹ä¸­ï¼Œç”¨æ¥æŒ‡ç¤º ECNï¼ˆExplicit Congestion Notificationï¼Œæ˜¾å¼æ‹¥å¡é€šå‘Šï¼‰çš„å¯ç”¨æ€§ 
<br>URG (Urgent)ï¼šè¡¨ç¤ºç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆ
<br>ACK (Acknowledgement)ï¼šè¡¨ç¤ºç¡®è®¤å­—æ®µæœ‰æ•ˆ
<br>PSH (Push)ï¼šå‘Šè¯‰æ¥æ”¶æ–¹åº”è¯¥ç«‹å³å°†æ¥æ”¶åˆ°çš„æ•°æ®ä¼ é€’ç»™ä¸Šå±‚åº”ç”¨ï¼Œè€Œä¸æ˜¯ç­‰å¾…ç¼“å†²
<br>RST (Reset)ï¼šç”¨äºé‡ç½®ä¸€ä¸ªé”™è¯¯çš„è¿æ¥ï¼Œæˆ–è€…æ‹’ç»éæ³•çš„æ®µæˆ–å¯åŠ¨å…³é—­è¿æ¥
<br>SYN (Synchronize)ï¼šåœ¨å»ºç«‹è¿æ¥æ—¶ä½¿ç”¨ï¼Œç”¨äºåˆå§‹åŒ–åºåˆ—å·å­—æ®µ
<br>FIN (Finish)ï¼šå‘é€æ–¹å®Œæˆå‘é€ä»»åŠ¡ï¼Œå¸Œæœ›å…³é—­è¿æ¥


<br>ç´§æ€¥æ•°æ®æŒ‡é’ˆå­—æ®µ (urgent data pointer field)ï¼šç´§æ€¥æŒ‡é’ˆå­—æ®µçš„å€¼è¡¨ç¤ºä»å½“å‰åºåˆ—å·å¼€å§‹ï¼Œç´§æ€¥æ•°æ®çš„åºå·æ•°
<br><br>
<br>TCP åºå·å»ºç«‹åœ¨ä¼ é€çš„å­—èŠ‚æµä¹‹ä¸Šï¼Œè€Œä¸æ˜¯å»ºç«‹åœ¨ä¼ é€çš„æŠ¥æ–‡æ®µåºåˆ—ä¹‹ä¸Š
<br>ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå· (sequence number for a segment) æ˜¯è¯¥æŠ¥æ–‡æ®µé¦–å­—èŠ‚çš„å­—èŠ‚æµç¼–å·ï¼ŒTCP æ ¹æ® MSS å°†æ–‡ä»¶æ•°æ®åˆ’åˆ†ä¸º TCP æŠ¥æ–‡æ®µï¼Œå¹¶å°†æ¯ä¸ªæŠ¥æ–‡æ®µå¯¹åº”çš„é¦–å­—èŠ‚çš„ç¼–å·è¢«å¡«å…¥ç›¸åº”æŠ¥æ–‡æ®µé¦–éƒ¨çš„åºå·å­—æ®µä¸­ <img alt="Pasted image 20231110095907.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231110095907.png">
<br>TCP æ˜¯å…¨åŒå·¥çš„ï¼Œå¦‚æœä¸»æœº A åœ¨å‘ä¸»æœº B å‘é€æ•°æ®çš„åŒæ—¶ï¼Œä¸»æœº B ä¹Ÿåœ¨å‘ä¸»æœº A å‘é€æ•°æ®ï¼Œé‚£ä¹ˆä¸»æœº A å¡«å……è¿›æŠ¥æ–‡æ®µçš„ç¡®è®¤å·æ˜¯ä¸»æœº A æœŸæœ›ä»ä¸»æœº B æ”¶åˆ°çš„ä¸‹ä¸€å­—èŠ‚çš„åºå·
<br>å¦‚æœä¸»æœº A å·²ç»æ”¶åˆ°ä¸»æœº B åŒ…å«å­—èŠ‚ 0ï½535 çš„æŠ¥æ–‡æ®µå’ŒåŒ…å«å­—èŠ‚ 900ï½1000 çš„æŠ¥æ–‡æ®µï¼Œä½†ä¸»æœº A è¿˜æ²¡æœ‰æ”¶åˆ°å­—èŠ‚ 536 ï½ 899 çš„æŠ¥æ–‡æ®µï¼Œé‚£ä¹ˆ A åˆ° B çš„ä¸‹ä¸ªæŠ¥æ–‡æ®µå°†åœ¨ç¡®è®¤å·ä¸­åŒ…å« 536ï¼Œè€Œä¸ä¼šå‘é€ç¡®è®¤å·ä½ 1001 çš„æŠ¥æ–‡æ®µï¼ŒTCP åªç¡®è®¤è¯¥æµä¸­è‡³ç¬¬ä¸€ä¸ªä¸¢å¤±å­—èŠ‚ä¸ºæ­¢çš„æŠ¥æ–‡æ®µï¼Œæ”¶åˆ°çš„å¤±åºæŠ¥æ–‡æ®µä¸å‘é€å¯¹åº”çš„ç¡®è®¤æŠ¥æ–‡æ®µï¼Œè€Œå¯¹å¤±åºæŠ¥æ–‡æ®µçš„å¤„ç†æ–¹å¼ç”±ç¼–ç¨‹äººå‘˜å†³å®šï¼Œæ‰€ä»¥ TCP æä¾› <a data-tooltip-position="top" aria-label="https://cs.newpaltz.edu/~easwarac/CCN/Week6/tcpACK.pdf" rel="noopener" class="external-link" href="https://cs.newpaltz.edu/~easwarac/CCN/Week6/tcpACK.pdf" target="_blank">ç´¯ç§¯ç¡®è®¤ </a>  (cumulative acknowledgement)(æ³¨æ„ä¸ <a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > å›é€€ N æ­¥" data-href="è¿è¾“å±‚#å›é€€ N æ­¥" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#å›é€€_N_æ­¥" class="internal-link" target="_self" rel="noopener">å›é€€Næ­¥</a> å’Œ <a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > é€‰æ‹©é‡ä¼ " data-href="è¿è¾“å±‚#é€‰æ‹©é‡ä¼ " href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#é€‰æ‹©é‡ä¼ " class="internal-link" target="_self" rel="noopener">é€‰æ‹©é‡ä¼ </a> ç¡®è®¤æœºåˆ¶åŒºåˆ†ï¼Œå›é€€ N æ­¥ä¸­æ¥æ”¶ç«¯ç›´æ¥å°†æ”¶åˆ°çš„åˆ†ç»„(å…ˆå‰å¯¹äº rdt çš„è®¨è®ºä¸æ˜¯åŸºäºç‰¹å®š Layer è€Œè¨€çš„ï¼Œæ‰€ä»¥ç”¨ packet æ¥æŒ‡ä»£)ä¸¢å¼ƒï¼Œæ‰€ä»¥ä¸å­˜åœ¨ç´¯ç§¯ç¡®è®¤çš„è¯´æ³•ï¼Œè€Œé€‰æ‹©é‡ä¼ ä¸­æ˜¯æ¥æ”¶ç«¯æ”¶åˆ°åˆ†ç»„ï¼Œæ— è®ºæ˜¯ä¸æ˜¯å¤±åºåˆ†ç»„ï¼Œå‡å›ä¼ ä¸æ”¶åˆ°åˆ†ç»„å¯¹åº”çš„ ACKï¼Œæ‰€ä»¥å‘é€ç«¯èƒ½å¤ŸçŸ¥é“å¤±åºçš„åˆ†ç»„å·²ç»è¢«æ¥æ”¶äº†ï¼Œåœ¨ç´¯ç§¯ç¡®è®¤æœºåˆ¶ä¸­ï¼ŒTCP å‘é€ç«¯(ä¸»æœº B)æ˜¯ä¸çŸ¥é“å­—èŠ‚ 900ï½1000 çš„æŠ¥æ–‡æ®µ(å¤±åº)å·²ç»è¢«æ¥æ”¶äº†ï¼Œåªèƒ½é€šè¿‡ä¸‹ä¸ª A åˆ° B çš„æŠ¥æ–‡æ®µä¸­çš„ç¡®è®¤å· 536 çŸ¥é“åˆ°ä¸¢å¤±å­—èŠ‚(536)ä¹‹å‰çš„æ‰€æœ‰æŠ¥æ–‡æ®µè¢«æ­£ç¡®æ¥æ”¶äº†)<img alt="Pasted image 20231113151809.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231113151809.png">   
<br>TCP ç¼–ç¨‹äººå‘˜å¯¹å¤±åºæŠ¥æ–‡æ®µæœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼š

<br>æ¥æ”¶æ–¹ç«‹å³ä¸¢å¼ƒå¤±åºæŠ¥æ–‡æ®µ(ç®€åŒ–æ¥æ”¶å½“è®¾è®¡)
<br>æ¥æ”¶æ–¹ä¿ç•™å¤±åºçš„æŠ¥æ–‡æ®µï¼Œå¹¶ç­‰å¾…ç¼ºå¤±çš„æŠ¥æ–‡æ®µå¡«è¡¥é—´éš”(æœ‰å¯èƒ½åœ¨ä¼ é€çš„è¿‡ç¨‹ä¸­ä¸¢å¤±æˆ–æŸåç”±å‘é€ç«¯é‡ä¼ )


<br>å›¾ä¸­åˆå§‹åºå·ä¸º 0ï¼Œå®é™…ä¸Šåºå· TCP è¿æ¥çš„åŒæ–¹å¯ä»¥éšæœºé€‰æ‹©åºå·ï¼Œå¯ä»¥å‡å°‘å°†ä»åœ¨ç½‘ç»œä¸­å­˜åœ¨çš„æ¥è‡ªä¸¤å°ä¸»æœºä¹‹é—´å…ˆå‰å·²ä¸­æ­¢çš„è¿æ¥çš„æŠ¥æ–‡æ®µï¼Œè¯¯è®¤ä¸ºæ–°è¿æ¥çš„æœ‰æ•ˆæŠ¥æ–‡æ®µçš„å¯èƒ½æ€§ (éœ€è¦æ°å·§æ–°è¿æ¥å’Œæ—§è¿æ¥éƒ½åœ¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„åŒä¸€å¯¹ç«¯å£ä¸Š)
<br><br><img alt="Pasted image 20231110112648.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231110112648.png" style="width: 500px; max-width: 100%;"><br>
<br>å®¢æˆ·ç«¯çš„ç”¨æˆ·é”®å…¥çš„æ¯ä¸ªå­—ç¬¦éƒ½ä¼šè¢«å‘é€åˆ°è¿œç¨‹ä¸»æœºï¼Œè¿œç¨‹ä¸»æœºä¼šé€æ¯ä¸ªå­—ç¬¦çš„å‰¯æœ¬ç»™å®¢æˆ·ï¼Œå¹¶å°†è¿™äº›å­—ç¬¦æ˜¾ç¤ºåœ¨ telnet ç”¨æˆ·çš„å±å¹•ä¸Š
<br>å›æ˜¾ (echo back) ç”¨äºç¡®ä¿ç”± Telnet ç”¨æˆ·å‘é€çš„å­—ç¬¦å·²è¢«è¿œç¨‹ä¸»æœºæ”¶åˆ°å¹¶åœ¨è¿œç¨‹ç«™ç‚¹ä¸Šå¾—åˆ°å¤„ç†
<br>ä¸å¦¨è¯•ç€ç”¨ Python è¿è¡Œä¸€ä¸ªç®€å•çš„ Telnet æœåŠ¡ç«¯ (Generated by ChatGPT) 
<br>import socket
import threading


def client_thread(conn, addr):
    print(f"Connected to {addr}")
    conn.send(b"Welcome to the Telnet server!\n")

    while True:
        try:
            data = conn.recv(1024)
            if not data:
                break
            conn.sendall(b"Echo: " + data)
        except ConnectionResetError:
            break

    print(f"Connection with {addr} closed")
    conn.close()


def start_telnet_server(host, port):
    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server_socket.bind((host, port))
    server_socket.listen(5)
    print(f"Telnet server started on {host}:{port}")

    try:
        while True:
            conn, addr = server_socket.accept()
            threading.Thread(target=client_thread, args=(conn, addr)).start()
    except KeyboardInterrupt:
        print("Shutting down the server...")
    finally:
        server_socket.close()


if __name__ == "__main__":
    HOST = "127.0.0.1"  # ç»‘å®šåˆ°æ‰€æœ‰ç½‘ç»œæ¥å£
    PORT = 23  # æ ‡å‡†Telnetç«¯å£å·æ˜¯23ï¼Œä½†å¦‚æœæ²¡æœ‰ç®¡ç†å‘˜æƒé™ï¼Œæ‚¨å¯èƒ½éœ€è¦é€‰æ‹©1024ä»¥ä¸Šçš„ç«¯å£å·
    start_telnet_server(HOST, PORT)

Copy<br>
<br>å½“ç¨‹åºè¿è¡Œæ—¶ï¼ŒæœåŠ¡ç«¯å¥—æ¥å­—ç›‘å¬ <a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Localhost" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Localhost" target="_blank">localhost</a> ä¸Š 23 ç«¯å£ï¼Œå½“ socket æ²¡æœ‰è¿æ¥è¢«å»ºç«‹æ—¶ï¼Œaccept() æ–¹æ³•æ˜¯é˜»å¡çš„ï¼Œç›´åˆ°æœ‰æ–°è¿æ¥å»ºç«‹æ—¶ accept() æ–¹æ³•è¿”å›ä¸€ä¸ª (conn, addr) å¯¹ï¼Œconn&nbsp;æ˜¯ä¸€ä¸ªæ–°çš„å¥—æ¥å­—å¯¹è±¡ï¼Œç”¨äºåœ¨æ­¤è¿æ¥ä¸Šæ”¶å‘æ•°æ®ï¼Œaddress&nbsp;æ˜¯è¿æ¥å¦ä¸€ç«¯çš„å¥—æ¥å­—æ‰€ç»‘å®šçš„åœ°å€ (IP å’Œç«¯å£å·)ï¼Œéšåç¨‹åºåˆ›å»ºå¹¶å¯åŠ¨æ–°çš„çº¿ç¨‹è°ƒç”¨ client_thread() æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªè¿æ¥ï¼Œè¿æ¥å¼€å§‹æ—¶æœåŠ¡ç«¯æ‰“å°äº†å®¢æˆ·ç«¯çš„åœ°å€ï¼Œå¹¶è°ƒç”¨ socket å¯¹è±¡å‘é€æ¬¢è¿æ–‡æœ¬ï¼Œæ¥ç€è¯¥å­çº¿ç¨‹è¿›å…¥å¾ªç¯ï¼Œrecv çš„å‚æ•° bufsize æŒ‡å®š buffer çš„å¤§å° ( bufsize ï»¿å‚æ•°æŒ‡å®šäº†å•æ¬¡è°ƒç”¨ recvï»¿æ–¹æ³•æ—¶æœ€å¤šå¯ä»¥è¯»å–çš„å­—èŠ‚æ•°ï¼Œè¿™ä¸ªå¤§å°æ˜¯ç”±ç¨‹åºå‘˜æ ¹æ®å…·ä½“çš„ç½‘ç»œåº”ç”¨ç¨‹åºè€Œå®šçš„ï¼Œå®ƒå¯ä»¥æ˜¯ä»»æ„éé›¶çš„æ•´æ•°ï¼Œå‘Šè¯‰ recv æ–¹æ³•ä¸€æ¬¡æ€§ä»å†…éƒ¨ç¼“å†²åŒºä¸­è¯»å–å¤šå°‘å­—èŠ‚çš„æ•°æ®)ï¼Œå½“ TCP ç¼“å†²ä¸­æ²¡æœ‰æ•°æ®å¯ç”¨æ—¶ï¼Œrecv() ä¼šé˜»å¡ï¼Œå¦‚æœ buffer ä¸­æœ‰å¯ç”¨æ•°æ®ï¼Œä½†å°äº bufsizeï¼Œrecv() ä¼šè¿”å›å®é™…å¯ç”¨çš„æ•°æ®é‡ï¼Œå¦‚æœåˆ°è¾¾çš„æ•°æ®é‡å¤§äº bufsizeï¼Œæ•°æ®ä¼šå­˜æ”¾åœ¨æ“ä½œç³»ç»Ÿçš„ç¼“å†²åŒºä¸­ï¼Œrecv() ä¸€æ¬¡è¯»å– bufsize å¤§å°çš„æ•°æ®ï¼Œå°†è¿™äº›æ•°æ®åŠ ä¸Š Echo:  å­—èŠ‚ä¸²å¤´éƒ¨åä½¿ç”¨ socket å¯¹è±¡å‘é€å›å®¢æˆ·ç«¯
<br>å¯ä»¥é€šè¿‡ lsof å‘½ä»¤æŸ¥çœ‹ TCP è¿æ¥æ˜¯å¦è¢«å»ºç«‹ï¼Œå›¾ä¸­åœ¨å›ç¯åœ°å€çš„ 56971 ç«¯å£åˆ° 23 ç«¯å£å»ºç«‹äº†ä¸€æ¡ TCP è¿æ¥ <img alt="Pasted image 20231110172736.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231110172736.png">
<br>åœ¨ telnet ä¸­æ‰§è¡Œä¸€ç³»åˆ—æ“ä½œ(telnet å¼€å¯äº† character æ¨¡å¼)ï¼Œé€šè¿‡ wireshark å¯ä»¥çœ‹åˆ°æ‰§è¡Œè¿™äº›è¾“å…¥æ—¶å¯¹åº”çš„ç½‘ç»œæ´»åŠ¨ ( loopback æ¥å£çš„å¥½å¤„æ˜¯ä¸å®¹æ˜“ capture åˆ°æ“ä½œç³»ç»Ÿå…¶ä»–ç½‘ç»œæ´»åŠ¨çš„å¥‡æ€ªåˆ†ç»„) <img alt="Pasted image 20231111102051.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231111102051.png" style="width: 400px; max-width: 100%;">  <img alt="Pasted image 20231111104737.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231111104737.png"> <img alt="Pasted image 20231111125547.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231111125547.png"> <img alt="Campus/Chinese-Notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/Attachments/æ‚é¡¹-11.jpg" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/æ‚é¡¹-11.jpg"> <img alt="æ‚é¡¹-12.jpg" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/æ‚é¡¹-12.jpg">
<br>æå¸¦ (piggybacked) ï¼šéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸Šå›¾çš„æƒ…å†µä¸­å¯¹äºæºå¸¦æ•°æ®çš„æŠ¥æ–‡æ®µçš„ç¡®è®¤ (ACK) å‡æ˜¯æ˜¯ä¸€ä¸ªå•ç‹¬çš„ä¸æºå¸¦æ•°æ®çš„ ACK æŠ¥æ–‡æ®µï¼Œåœ¨å®é™…æƒ…å†µä¸‹ï¼Œå¯¹æºå¸¦æ•°æ®æŠ¥æ–‡çš„ç¡®è®¤æœ‰å¯èƒ½è¢«è£…è½½åœ¨è¿”å›çš„æ‰¿è½½æ•°æ®çš„æŠ¥æ–‡æ®µä¸­ï¼Œè¿™ç§ç¡®è®¤ç§°ä¸ºæ˜¯è¢«æå¸¦åœ¨æ•°æ®æŠ¥æ–‡æ®µä¸­
<br><br>
<br>TCP ä¸­å®ç°è¶…æ—¶ / é‡ä¼ æœºåˆ¶ï¼Œæœ€æ˜æ˜¾çš„é—®é¢˜æ—¶è¶…æ—¶é—´éš”é•¿åº¦çš„è®¾ç½®
<br><br>
<br>æ ·æœ¬ RTT (SampleRTT)ï¼šæŸæŠ¥æ–‡æ®µè¢«å‘å‡º (äº¤ç»™ IP) åˆ°å¯¹è¯¥æŠ¥æ–‡æ®µçš„ç¡®è®¤è¢«æ”¶åˆ°ä¹‹é—´çš„æ—¶é—´é‡ï¼Œé€šå¸¸ TCP éµå¾ªä»¥ä¸‹è§„åˆ™æ¥é€‰æ‹©æµ‹é‡ SampleRTT çš„æŠ¥æ–‡æ®µ

<br>å•ä¸ªæŠ¥æ–‡ç¡®è®¤åŸåˆ™ï¼šä¸ºäº†é¿å…å¯¹ RTT ä¼°è®¡å¼•å…¥é¢å¤–çš„å˜åŒ–ï¼Œé€šå¸¸ä¸å¯¹é‡ä¼ çš„æŠ¥æ–‡æ®µè¿›è¡Œ SampleRTT çš„æµ‹é‡ã€‚æ¢å¥è¯è¯´ï¼ŒTCP åªæµ‹é‡å¯¹äºé‚£äº›è¢«é¦–æ¬¡ä¼ è¾“çš„æŠ¥æ–‡æ®µçš„ç¡®è®¤ï¼Œè€Œä¸æ˜¯å¯¹é‡ä¼ çš„æŠ¥æ–‡æ®µçš„ç¡®è®¤
<br>Karn/Partridge ç®—æ³•ï¼šå¦‚æœä¸€ä¸ªæŠ¥æ–‡å¿…é¡»é‡ä¼ ï¼Œé‚£ä¹ˆå®ƒçš„ SampleRTT å°±ä¸ä¼šè¢«é‡‡ç”¨ï¼Œå› ä¸ºè¿™ä¸ª RTT å¯èƒ½åŒ…å«äº†é‡ä¼ çš„å»¶è¿Ÿï¼Œè¿™ä¸åˆ©äºå‡†ç¡®è®¡ç®—ç½‘ç»œçš„çœŸå® RTT
<br>é¿å…å¹¶è¡Œæµ‹é‡ï¼šTCP é€šå¸¸é¿å…åœ¨åŒä¸€æ—¶é—´æµ‹é‡å¤šä¸ªæŠ¥æ–‡æ®µçš„ SampleRTTï¼Œé€šå¸¸æ˜¯åœ¨ä»»ä½•ç»™å®šçš„æ—¶é—´åªå¯¹ä¸€ä¸ªåœ¨ä¼ è¾“è·¯å¾„ä¸Šçš„æ•°æ®æ®µæµ‹é‡ SampleRTTã€‚è¿™æ ·åšæ˜¯ä¸ºäº†é˜²æ­¢æŠ¥æ–‡æ®µçš„ç¡®è®¤å›åº”ç”±äºç½‘ç»œè·¯å¾„ä¸Šçš„æ’é˜Ÿå»¶è¿Ÿè€Œå½¼æ­¤å½±å“ï¼Œè¿›è€Œå½±å“ RTT çš„å‡†ç¡®æ€§
<br>æ ·æœ¬é€‰æ‹©ï¼šåœ¨æŸäº›å®ç°ä¸­ï¼ŒTCP å¯èƒ½ä¼šé€‰æ‹©æ€§åœ°ä¼°ç®— RTTï¼Œä¾‹å¦‚åªåœ¨ç‰¹å®šé—´éš”æˆ–è€…å¯¹ç‰¹å®šçš„æŠ¥æ–‡æ®µæµ‹é‡ SampleRTT


<br>ä¸ºäº†ä¼°è®¡ä¸€ä¸ªå…¸å‹çš„ RTTï¼Œéœ€è¦é‡‡å–å¯¹é—´éš”æµ‹é‡åˆ°çš„ SampleRTT å–å¹³å‡çš„æ–¹æ³•ï¼ŒTCP ç»´æŠ¤ä¸€ä¸ª SampleRTT å‡å€¼ (EstimatedRTT)ï¼Œå½“è·å¾—ä¸€ä¸ªæ–°çš„ SampleRTT æ—¶ï¼ŒTCP ä¼šæ ¹æ®æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ (Exponential Weight Moving Average) æ¥æ›´æ–° EstimatedRTTï¼Œ çš„æ¨èå€¼é€šå¸¸æ˜¯ 0.125  
<br>EstimatedRTT çš„æ–°å€¼æ˜¯ç”±ä»¥å‰çš„ EstimatedRTT å€¼ä¸ SampleRTT æ–°å€¼åŠ æƒç»„åˆè€Œæˆï¼Œè¿™ä¸ªåŠ æƒå¹³å‡å¯¹æœ€è¿‘çš„æ ·æœ¬èµ‹äºˆçš„æƒå€¼è¦å¤§äºå¯¹æ—§æ ·æœ¬èµ‹äºˆçš„æƒå€¼ï¼Œå› ä¸ºè¶Šè¿‘çš„æ ·æœ¬è¶Šèƒ½æ›´å¥½åœ°åæ˜ ç½‘ç»œçš„å½“å‰æ‹¥å¡çŠ¶å†µï¼Œä¸€ä¸ªç»™å®šçš„ SampleRTT çš„æƒå€¼åœ¨æ›´æ–°çš„è¿‡ç¨‹ä¸­å‘ˆæŒ‡æ•°å‹å¿«é€Ÿè¡°å‡
<br>RFC 6298 å®šä¹‰äº† RTT åå·®ï¼Œç”¨äºä¼°ç®— SampleRTT ä¼šåç¦» EstimatedRTT çš„ç¨‹åº¦ï¼Œ çš„æ¨èå€¼é€šå¸¸ä¸º 0.25  
<br><br>
<br>è¶…æ—¶é—´éš”åº”å¤§äºç­‰äº EstimatedRTT ï¼Œå¦åˆ™å°†é€ æˆä¸å¿…è¦çš„é‡ä¼ ï¼Œè¶…æ—¶é—´éš”ä¸åº”è¯¥æ¯” EstimatedRTT å¤§å¤ªå¤šï¼Œå¦åˆ™å½“æŠ¥æ–‡æ®µä¸¢å¤±æ—¶ï¼ŒTCP ä¸èƒ½å¾ˆå¿«é‡ä¼ è¯¥æŠ¥æ–‡æ®µï¼Œå› æ­¤è¦æ±‚å°†è¶…æ—¶é—´éš”è®¾ä¸º EstimatedRTT åŠ ä¸Šä¸€å®šä½™é‡ã€‚å½“ SampleRTT å€¼æ³¢åŠ¨è¾ƒå¤§æ—¶ï¼Œè¿™ä¸ªä½™é‡åº”è¯¥å¤§äº›ï¼›å½“æ³¢åŠ¨è¾ƒå°æ—¶ï¼Œè¿™ä¸ªä½™é‡åº”è¯¥å°äº› 
<br>æ¨èçš„åˆå§‹ Timeoutlnterval å€¼ä¸º 1 ç§’ RFC 6298 [@sargentComputingTCPRetransmission2011]ã€‚åŒæ—¶ï¼Œå½“å‡ºç°è¶…æ—¶åï¼ŒTimeoutlntÂ­erval å€¼å°†åŠ å€ï¼Œä»¥å…å³å°†è¢«ç¡®è®¤çš„åç»§æŠ¥æ–‡æ®µè¿‡æ—©å‡ºç°è¶…æ—¶ã€‚ç„¶è€Œï¼Œåªè¦æ”¶åˆ°æŠ¥æ–‡æ®µå¹¶æ›´æ–° EstimatedRTT , å°±ä½¿ç”¨ä¸Šè¿°å…¬å¼å†æ¬¡è®¡ç®— Timeoutlnterval
<br>TCP é€šè¿‡ä½¿ç”¨è‚¯å®šç¡®è®¤å’Œå®šæ—¶å™¨æ¥å®ç°å¯é æ•°æ®ä¼ è¾“ï¼Œå½“ TCP è®¤ä¸ºæŠ¥æ–‡æ®µæˆ–å…¶ç¡®è®¤ä¸¢å¤±æˆ–å—æŸæ—¶ï¼ŒTCP ä¼šé‡ä¼ è¿™äº›æŠ¥æ–‡æ®µï¼Œæœ‰ä¸€äº› TCP è¿˜æœ‰ä¸€ä¸ªéšå¼ NAK æœºåˆ¶ (å¿«é€Ÿé‡ä¼ ï¼ˆFast Retransmitï¼‰: å½“æ¥æ”¶æ–¹æ”¶åˆ°ä¸€ä¸ªå¤±åºçš„æ•°æ®åŒ…æ—¶ï¼Œå®ƒä¼šç«‹å³å‘é€ä¸€ä¸ªé‡å¤çš„ ACKï¼ˆä¹Ÿå°±æ˜¯éšå¼ NAKï¼‰ï¼Œè¿™æ˜¯å½“å‰å·²æ­£ç¡®æ¥æ”¶çš„æœ€é«˜åºåˆ—å·çš„æ•°æ®åŒ…ã€‚å¦‚æœå‘é€æ–¹æ”¶åˆ°ä¸‰ä¸ªæˆ–è€…æ›´å¤šè¿ç»­çš„é‡å¤ ACKï¼Œå®ƒå°†æ¨æµ‹åœ¨ä¼ è¾“ä¸­å‡ºç°äº†æ•°æ®åŒ…ä¸¢å¤±ï¼Œå¹¶ä¸”ä¼šåœ¨å®šæ—¶å™¨åˆ°æœŸä¹‹å‰ç«‹å³é‡ä¼ é‚£äº›ä¸¢å¤±çš„æ•°æ®åŒ…)
<br>TCP æ— æ³•åˆ†è¾¨æŠ¥æ–‡æ®µæˆ–å…¶ ACK æ˜¯ä¸¢å¤±äº†ã€å—æŸäº†è¿˜æ˜¯æ—¶å»¶è¿‡é•¿äº†ï¼Œä½† TCP å¯¹è¿™äº›æƒ…å†µçš„å¤„ç†æ–¹å¼æ˜¯ç›¸åŒçš„ï¼Œé‡ä¼ å‡ºç°é—®é¢˜çš„æŠ¥æ–‡æ®µ
<br>TCP ä¹Ÿä½¿ç”¨æµæ°´çº¿ï¼Œå½“æŠ¥æ–‡é•¿åº¦å’Œå¾€è¿”æ—¶å»¶åªæ¯”å¾ˆå°æ—¶ï¼Œæµæ°´çº¿èƒ½æ˜¾è‘—å¢åŠ ä¸€ä¸ªä¼šè¯çš„ååé‡ï¼Œä¸€ä¸ªå‘é€æ–¹èƒ½å¤Ÿå…·æœ‰çš„æœªè¢«ç¡®è®¤æŠ¥æ–‡æ®µçš„å…·ä½“æ•°é‡æ˜¯ç”± TCP çš„æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶æœºåˆ¶å†³å®šçš„
<br><br>
<br>IP çš„å°½åŠ›è€Œä¸ºæœåŠ¡ï¼šä¸ä¿è¯æ•°æ®æŠ¥çš„äº¤ä»˜ (ä¸¢åŒ…)ï¼Œä¸ä¿è¯æ•°æ®æŠ¥çš„æŒ‰åºäº¤ä»˜æœåŠ¡ (ä¹±åº)ï¼Œä¸ä¿è¯æ•°æ®æŠ¥ä¸­æ•°æ®çš„å®Œæ•´æ€§ (æŸå)
<br>TCP åœ¨ IP ä¸å¯é çš„å°½åŠ›è€Œä¸ºæœåŠ¡è‡³ä¸Šåˆ›å»ºäº†ä¸€ç§å¯é æ•°æ®ä¼ è¾“æœåŠ¡ (reliable data transfer service)ï¼Œç¡®ä¿ä¸€ä¸ªè¿›ç¨‹ä»å…¶æ¥æ”¶ç¼“å­˜ä¸­è¯»å‡ºçš„æ•°æ®æµæ˜¯æ— æŸåã€æ— é—´éš™ã€éå†—ä½™å’ŒæŒ‰åºçš„æ•°æ®æµ
<br>åœ¨ç ”ç©¶é€‰æ‹©é‡ä¼ æœºåˆ¶æ—¶ï¼Œæ›¾å‡å®šæ¯ä¸€ä¸ªå·²å‘é€ä½†æœªè¢«ç¡®è®¤çš„æŠ¥æ–‡éƒ½ä¸ä¸€ä¸ªå®šæ—¶å™¨ç›¸å…³è” <a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > ^83af2c" data-href="è¿è¾“å±‚#^83af2c" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#^83af2c" class="internal-link" target="_self" rel="noopener">é€»è¾‘å®šæ—¶å™¨</a>ï¼Œä½†æ˜¯å®šæ—¶å™¨çš„ç®¡ç†éœ€è¦ç›¸å½“å¤§çš„å¼€é”€ï¼ŒRFC 6298 [@sargentComputingTCPRetransmission2011]  æ¨èçš„å®šæ—¶å™¨ç®¡ç†è¿‡ç¨‹ä»…ä½¿ç”¨å•ä¸€çš„é‡ä¼ å®šæ—¶å™¨ï¼Œå³ä½¿æœ‰å¤šä¸ªå·²å‘é€ä½†è¿˜æœªè¢«ç¡®è®¤çš„æŠ¥æ–‡æ®µ
<br>TCP å¯é æ•°æ®ä¼ è¾“ç®€åŒ–æè¿°ï¼šå‡è®¾å‘é€æ–¹ä¸å— TCP æµé‡å’Œæ‹¥å¡æ§åˆ¶çš„é™åˆ¶çš„ï¼Œæ¥è‡ªä¸Šå±‚æ•°æ®çš„é•¿åº¦å°äº MSSï¼Œä¸”æ•°æ®ä¼ é€åªåœ¨ä¸€ä¸ªæ–¹å‘è¿›è¡Œ
<br>NextSeqNum = InitialSeqNumber
SendBase = InitialSeqNumber


while (1) {
	switch (event) {
		case 1: //ä»ä¸Šå±‚æ¥æ”¶åˆ°æ•°æ®e
			sndpkt[NextSeqNum] = make_pkt(NextSeqNum, data, checksum);
			if (isTimerInactive) //å®šæ—¶å™¨å½“å‰æ²¡æœ‰è¿è¡Œ
				timer_start();
			udt_send(sndpkt[NextSeqNum]);
			NextSeqNum = NectSeqNum + length(data);
			break;
			
		case 2: //å®šæ—¶å™¨è¶…æ—¶
			udt_snd(sndpkt[SendBase]); //é‡ä¼ å…·æœ‰æœ€å°åºå·ä½†ä»æœªåº”ç­”çš„æŠ¥æ–‡æ®µ
			timer_start();
			break;
			
		case 3: //æ”¶åˆ°ACKï¼ŒAck = y
			if (y &gt; SendBase) {
				SendBase = y; //ç´¯ç§¯ç¡®è®¤
				if (NextSeqNum &gt; SendBase) //å½“å‰æœ‰æœªè¢«ç¡®è®¤çš„æŠ¥æ–‡æ®µ
					timer_start();
			}
			break;
	}
	/*æ²¡æœ‰äº‹ä»¶åˆ°æ¥æ—¶å¾ªç¯é˜»å¡*/
}
Copy<br>
<br>TCP é‡‡ç”¨<a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > ^d4dffe" data-href="è¿è¾“å±‚#^d4dffe" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#^d4dffe" class="internal-link" target="_self" rel="noopener">ç´¯ç§¯ç¡®è®¤</a>ï¼Œæ‰€ä»¥ä»£ç ä¸­çš„ y ç¡®è®¤äº†å­—èŠ‚ç¼–å·åœ¨ y ä¹‹å‰çš„æ‰€æœ‰å­—èŠ‚éƒ½å·²ç»æ”¶åˆ°
<br><br>
<br>å½“ TCP çš„ä¸€ä¸ªåˆ†ç»„ä¸¢å¤±æˆ–é­å—å»¶è¿Ÿæ—¶ï¼Œå¦‚æœè¶…æ—¶äº‹ä»¶å‘ç”Ÿï¼ŒTCP å‘é€ç«¯ä¼šé‡ä¼ è¯¥åˆ†ç»„ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸¤ä¸ªè¿ç»­çš„åˆ†ç»„ï¼Œè¶…æ—¶äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå‘é€ç«¯ä¼šé‡‡å–ä»€ä¹ˆæ ·çš„è¡ŒåŠ¨ğŸ¤”ï¸
<br>å¦‚å›¾ 2ï¼Œå½“ä¸»æœº A è¿ç»­å‘é€äº†ä¸¤ä¸ªæŠ¥æ–‡æ®µï¼Œå‡è®¾ä¸¤ä¸ªæŠ¥æ–‡æ®µåœ¨è¶…æ—¶å‰éƒ½æ²¡æœ‰åˆ°è¾¾ä¸»æœºï¼Œå½“è¶…æ—¶äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¸»æœº A é‡ä¼ åºå· 92 çš„ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µï¼Œå¹¶é‡å¯å®šæ—¶å™¨ï¼Œåªè¦ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µ ACK åœ¨æ–°çš„è¶…æ—¶å‘ç”Ÿä»¥å‰åˆ°è¾¾ï¼Œåˆ™ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µå°†ä¸ä¼šè¢«é‡ä¼ <img alt="Pasted image 20231113154643.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231113154643.png">
<br>è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œä¸»æœº A åƒ 2 ä¸­ä¸€æ ·å‘é€ä¸¤ä¸ªæŠ¥æ–‡æ®µä½†ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ ACK æŠ¥æ–‡æ€»åœ¨ç½‘ç»œä¸­ä¸¢å¤±æˆ–è€…é­å—å»¶è¿Ÿï¼Œè€Œç¬¬äºŒä¸ªæŠ¥æ–‡åœ¨è¶…æ—¶äº‹ä»¶å‘ç”Ÿå‰æ­£ç¡®åˆ°è¾¾äº†ï¼Œæ ¹æ®ç´¯ç§¯ç¡®è®¤æœºåˆ¶ï¼Œä¸»æœº A çŸ¥é“ä¸»æœº B å·²ç»æ”¶åˆ°äº†åºå·ä¸º 119 åŠä¹‹å‰çš„æ‰€æœ‰å­—èŠ‚ï¼Œæ‰€ä»¥ä¸»æœº A ä¸ä¼šé‡ä¼ è¿™ä¸¤ä¸ªæŠ¥æ–‡æ®µä¸­çš„ä»»ä½•ä¸€ä¸ª <img alt="Pasted image 20231113155258.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231113155258.png" style="width: 400px; max-width: 100%;">
<br><br>
<br>è€ƒè™‘åœ¨å¤§å¤šæ•° TCP å®ç°ä¸­æ‰€åšçš„ä¸€äº›æ”¹å˜ï¼Œé¦–å…ˆå…³æ³¨å®šæ—¶å™¨ timeout æ—¶è¶…æ—¶é—´éš”çš„é•¿åº¦ï¼Œåœ¨è¿™ç§ä¿®æ”¹ä¸­ï¼Œå½“è¶…æ—¶äº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒTCP é‡ä¼ å…·æœ‰æœ€å°åºå·çš„æœªç¡®è®¤çš„æŠ¥æ–‡æ®µï¼Œä½†æ˜¯æ¯æ¬¡ TCP é‡ä¼ éƒ½ä¼šå°†ä¸‹ä¸€æ¬¡çš„è¶…æ—¶é—´éš”è®¾ä¸ºå…ˆå‰å€¼çš„ä¸¤å€ï¼Œè€Œä¸æ˜¯ç”¨ä» <a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > ^f6828c" data-href="è¿è¾“å±‚#^f6828c" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#^f6828c" class="internal-link" target="_self" rel="noopener">EstimatedRTT</a>  å’Œ <a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > ^26aa11" data-href="è¿è¾“å±‚#^26aa11" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#^26aa11" class="internal-link" target="_self" rel="noopener">DevRTT</a> æ¨ç®—å‡ºçš„å€¼
<br>è¿™ç§æ–¹æ³•æä¾›äº†ä¸€ç§å½¢å¼å—é™çš„æ‹¥å¡æ§åˆ¶ï¼Œåœ¨æ‹¥å¡æ—¶ï¼Œå¦‚æœæºæŒç»­é‡ä¼ åˆ†ç»„ä¼šä½¿æ‹¥å¡æ›´ä¸¥é‡ï¼Œæ‰€ä»¥ TCP é‡‡ç”¨æ›´ä¼˜é›…çš„æ–¹å¼
<br><br>
<br>å‘é€æ–¹é€šå¸¸å¯åœ¨è¶…æ—¶äº‹ä»¶å‘ç”Ÿä¹‹å‰é€šè¿‡å†—ä½™ ACK æ¥è¾ƒå¥½åœ°æ£€æµ‹åˆ°ä¸¢åŒ…çš„æƒ…å†µ
<br>å†—ä½™ ACK æ˜¯å†æ¬¡ç¡®è®¤æŸä¸ªæŠ¥æ–‡æ®µçš„ ACK ï¼Œè€Œå‘é€æ–¹å…ˆå‰å·²ç»æ”¶åˆ°å¯¹è¯¥æŠ¥æ–‡æ®µçš„ç¡®è®¤
<br>å½“æ¥æ”¶æ–¹æœŸæœ›æ”¶åˆ°ä¸€ä¸ªåºåˆ—å·ä¸º N çš„æŠ¥æ–‡æ®µï¼Œä½†æ˜¯å´æ”¶åˆ°äº†ä¸€ä¸ªåºåˆ—å·å¤§äº N çš„æŠ¥æ–‡æ®µæ—¶ï¼Œå®ƒä¼šæ„è¯†åˆ°ä¸€äº›æ•°æ®ä¸¢å¤±äº†ï¼ˆå¯èƒ½æ˜¯å› ä¸ºç½‘ç»œä¸­çš„æŸäº›æŠ¥æ–‡æ®µä¸¢å¤±æˆ–åˆ°è¾¾é¡ºåºé”™ä¹±ï¼‰ã€‚æ­¤æ—¶ï¼Œä¸ºäº†é€šçŸ¥å‘é€æ–¹å“ªäº›æŠ¥æ–‡æ®µå·²æˆåŠŸæ¥æ”¶ï¼Œå¹¶è¯·æ±‚é‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡æ®µï¼Œæ¥æ”¶æ–¹ä¼šå‘é€ä¸€ä¸ªç¡®è®¤æœ€åæˆåŠŸæ¥æ”¶æŠ¥æ–‡æ®µçš„å†—ä½™ ACK<img alt="Pasted image 20231113162423.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231113162423.png">
<br>å‘é€æ–¹ç»å¸¸ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å‘é€å¤§é‡çš„æŠ¥æ–‡æ®µï¼Œå¦‚æœä¸€ä¸ªæŠ¥æ–‡æ®µä¸¢å¤±ï¼Œå°±å¾ˆå¯èƒ½å¼•èµ·è®¸å¤šä¸€ä¸ªæ¥ä¸€ä¸ªçš„å†—ä½™ ACK ã€‚å¦‚æœ TCP å‘é€æ–¹æ¥æ”¶åˆ°å¯¹ç›¸åŒæ•°æ®çš„ 3 ä¸ªå†—ä½™ ACK,ï¼Œå®ƒæŠŠè¿™å½“ä½œä¸€ç§æŒ‡ç¤ºï¼Œè¯´æ˜è·Ÿåœ¨è¿™ä¸ªå·²è¢«ç¡®è®¤è¿‡ 3 æ¬¡çš„æŠ¥æ–‡æ®µä¹‹åçš„æŠ¥æ–‡æ®µå·²ç»ä¸¢å¤±ï¼Œä¸€æ—¦æ”¶åˆ° 3 ä¸ªå†—ä½™ ACK ï¼ŒTCP å°±æ‰§è¡Œ å¿«é€Ÿé‡ä¼ (fast retransmit)ï¼Œå³åœ¨è¯¥æŠ¥æ–‡æ®µçš„å®šæ—¶å™¨è¿‡æœŸå‰é‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡æ®µ
<br>if (y &gt; SendBase) { 
	SendBase = y;
	DupAck = 0;
	if (NextSeqNum &gt; SendBase)
		timer_start();
} else { /*å½“æ”¶åˆ°å¯¹å·²ç»ç¡®è®¤æŠ¥æ–‡æ®µçš„ä¸€ä¸ªå†—ä½™ACKï¼Œæ­¤æ—¶ y = SendBase*/
	DupAck++;
	if (DupAck == 3) { //TCPå¿«é€Ÿé‡ä¼ 
		udt_snd(sndpkt[y]) //é‡æ–°å‘é€å…·æœ‰åºå· y çš„æŠ¥æ–‡æ®µ
	}
}
break;
Copy<br><br>
<br>TCP åè®®æ›´åƒ GBN åè®®å’Œ SR åè®®çš„æ··åˆä½“
<br>GBN åè®®ç‰¹å¾

<br>ç´¯ç§¯å¼çš„ï¼Œæ­£ç¡®æ¥æ”¶ä½†å¤±åºçš„æŠ¥æ–‡ä¸ä¼šè¢«æ¥æ”¶æ–¹é€ä¸ªç¡®è®¤
<br>TCP å‘é€æ–¹ç»´æŠ¤ å·²å‘é€ä½†æœªè¢«ç¡®è®¤çš„å­—èŠ‚çš„æœ€å°åºå·(SendBase) å’Œ ä¸‹ä¸€ä¸ªè¦å‘é€çš„å­—èŠ‚çš„åºå·(NextSeqNum)


<br>SR åè®®ç‰¹å¾

<br>å½“å‘é€æ–¹å‘é€ä¸€ç»„æŠ¥æ–‡æ®µï¼Œå…¶ä¸­çš„ä¸€ä¸ªæŠ¥æ–‡æ®µä¸¢å¤±æ—¶ï¼ŒTCP è‡³å¤šé‡ä¼ ä¸€ä¸ªç±»å‹çš„æŠ¥æ–‡æ®µ (è¿™ä¸ªæŠ¥æ–‡æ®µï¼Œè‹¥é‡ä¼ è¿˜ä¸¢å¤±ï¼Œé‚£ä¹ˆä»æ—§é‡ä¼ è¯¥æŠ¥æ–‡æ®µ)ï¼ŒGBN åˆ™ä¼šé‡ä¼ æ‰€æœ‰çš„è¯¥æŠ¥æ–‡æ®µåçš„æŠ¥æ–‡æ®µ
<br>é€‰æ‹©ç¡®è®¤ (selective acknowledgement) <a data-tooltip-position="top" aria-label="https://datatracker.ietf.org/doc/html/rfc2018" rel="noopener" class="external-link" href="https://datatracker.ietf.org/doc/html/rfc2018" target="_blank">RFC 2018</a> [@floydTCPSelectiveAcknowledgment1996] ï¼Œå…è®¸ TCP æ¥æ”¶æ–¹æœ‰é€‰æ‹©åœ°ç¡®è®¤å¤±åºæŠ¥æ–‡æ®µï¼Œé€‰æ‹©ç¡®è®¤æœºåˆ¶è¿˜èƒ½å’Œé€‰æ‹©é‡ä¼ æœºåˆ¶ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œè·³è¿‡é‡ä¼ é‚£äº›è¢«æ¥æ”¶æ–¹é€‰æ‹©æ€§ç¡®è®¤è¿‡çš„æŠ¥æ–‡æ®µ


<br><br>
<br>å½“æ•°æ®è¿›å…¥æ¥æ”¶æ–¹ä¸»æœºçš„ç¼“å­˜æ—¶ï¼Œæ¥æ”¶æ–¹åº”ç”¨å¯èƒ½æ­£å¿™äºå…¶ä»–ä»»åŠ¡ï¼Œå¹¶ä¸èƒ½ç«‹åˆ»è¯»å–æ•°æ®ï¼Œæ­¤æ—¶å¦‚æœå‘é€æ–¹å‘é€çš„æ•°æ®å¤ªå¤šã€å¤ªå¿«ï¼Œåˆ°è¾¾æ¥æ”¶æ–¹çš„æ•°æ®å¾ˆå®¹æ˜“è®©æ¥æ”¶ç¼“å­˜æº¢å‡º
<br>æµé‡æ§åˆ¶æœåŠ¡ (flow-control service) å¯ä»¥æ¶ˆé™¤å‘é€æ–¹ä½¿æ¥æ”¶æ–¹ç¼“å­˜æº¢å‡ºçš„å¯èƒ½æ€§
<br>TCP é˜²æ­¢æ¥æ”¶æ–¹ç¼“å­˜æº¢å‡ºé‡‡ç”¨çš„ç­–ç•¥ä¸ºæµé‡æ§åˆ¶ï¼Œå› ä¸º IP ç½‘ç»œçš„æ‹¥å¡è€Œè¢«éåˆ¶çš„æœºåˆ¶ä¸º æ‹¥å¡æ§åˆ¶ (congestion control)ï¼Œè¯·æ³¨æ„åŒºåˆ†
<br>TCP é€šè¿‡è®©å‘é€æ–¹ç»´æŠ¤ä¸€ä¸ªç§°ä¸º æ¥æ”¶çª—å£ (receive window) çš„å˜é‡æ¥æä¾›æµé‡æ§åˆ¶ (åœ¨ä¸Šæ–¹çš„ <a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > ^f3f973" data-href="è¿è¾“å±‚#^f3f973" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#^f3f973" class="internal-link" target="_self" rel="noopener">Telnet æœåŠ¡ç«¯æ¡ˆä¾‹</a>ä¸­æœ‰å‡ºç°)
<br>å‡è®¾ä¸»æœº A é€šè¿‡ä¸€æ¡ TCP è¿æ¥å‘ä¸»æœº B å‘é€ä¸€ä¸ªå¤§æ–‡ä»¶ï¼Œä¸»æœº B ä¸ºè¿æ¥åˆ†é…äº†ä¸€ä¸ªå¤§å°ä¸º RcvBufferçš„æ¥æ”¶ç¼“å­˜ï¼Œä¸»æœº B ä¸Šçš„åº”ç”¨è¿›ç¨‹ä¸æ—¶ä»è¯¥ç¼“å­˜ä¸­è¯»å–æ•°æ®ï¼Œå®šä¹‰ LastByteRead ä¸ºä¸»æœº B çš„åº”ç”¨è¿›ç¨‹ä»ç¼“å­˜è¯»å‡ºçš„æ•°æ®æµçš„æœ€åä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ï¼ŒLastByteRcvd ä¸ºä»ç½‘ç»œä¸­åˆ°è¾¾çš„å¹¶ä¸”å·²æ”¾å…¥ä¸»æœº B æ¥æ”¶ç¼“å­˜ä¸­çš„æ•°æ®æµçš„æœ€åä¸€ä¸ªå­—èŠ‚çš„ç¼–å·
<br>TCP ä¸å…è®¸å·²åˆ†é…çš„ç¼“å­˜æº¢å‡º 
<br>æ¥æ”¶çª—å£ç”¨ rwnd è¡¨ç¤º 
<br>ä¸»æœº B é€šè¿‡æŠŠ rwnd å€¼æ”¾å…¥æŠ¥æ–‡æ®µæ¥æ”¶çª—å£å­—æ®µä¸­ï¼Œé€šçŸ¥ä¸»æœº A åœ¨è¯¥è¿æ¥çš„ç¼“å­˜ä¸­è¿˜æœ‰å¤šå°‘å¯ç”¨ç©ºé—´
<br>ä¸»æœº A éœ€è¦å°†æœªç¡®è®¤çš„æ•°æ®é‡æ§åˆ¶åœ¨ rwnd å†…ï¼Œå³ 
<br>âš ï¸å½“ä¸»æœº B çš„æ¥æ”¶çª—å£ä¸º 0 æ—¶ï¼Œä¸»æœº A ç»§ç»­å‘é€åªæœ‰ä¸€ä¸ªå­—èŠ‚æ•°æ®çš„æŠ¥æ–‡æ®µï¼Œè¿™äº›æŠ¥æ–‡æ®µå°†ä¼šè¢«æ¥æ”¶æ–¹ç¡®è®¤ï¼Œæœ€ç»ˆç¼“å­˜å¼€å§‹æ¸…ç©ºï¼Œå¹¶åœ¨ç¡®è®¤æŠ¥æ–‡é‡Œå°†åŒ…å«ä¸€ä¸ªé 0 çš„ rwnd å€¼
<br>UDP ä¸æä¾›æµé‡æ§åˆ¶ï¼ŒæŠ¥æ–‡æ®µç”±äºç¼“å­˜æº¢å‡ºå¯èƒ½åœ¨æ¥æ”¶æ–¹ä¸¢å¤±
<br><br>
<br>TCP è¿æ¥çš„å»ºç«‹ä¼šæ˜¾è‘—åœ°å¢åŠ äººä»¬æ„Ÿå—åˆ°çš„æ—¶å»¶
<br>ä¸‰æ¬¡æ¡æ‰‹ (three-way handshake) è¿‡ç¨‹ï¼š

<br>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€ TCP SYN æŠ¥æ–‡æ®µï¼Œå¹¶éšæœºé€‰æ‹©è¯¥ SYN æŠ¥æ–‡æ®µçš„åˆå§‹åºå·ï¼Œå¹¶å°è£…ä¸º IP æ•°æ®æŠ¥å‘é€ç»™æœåŠ¡å™¨
<br>æœåŠ¡å™¨ä» IP æ•°æ®æŠ¥ä¸­æå– TCP SYN æŠ¥æ–‡æ®µï¼Œä¸ºè¯¥ TCP åˆ†é… TCP ç¼“å­˜å’Œå˜é‡ï¼Œå¹¶å‘è¯¥å®¢æˆ· TCP å‘é€ SYN ACK æŠ¥æ–‡æ®µï¼Œå¹¶éšæœºé€‰æ‹©è¯¥æŠ¥æ–‡æ®µçš„åˆå§‹åºå·
<br>æ”¶åˆ° SYN ACK æŠ¥æ–‡æ®µåï¼Œå®¢æˆ·ç«¯ç»™è¿æ¥åˆ†é…ç¼“å­˜å’Œå˜é‡ï¼Œç„¶åå‘é€ä¸€ä¸ª ACK æŠ¥æ–‡æ®µï¼Œç¡®è®¤å·è®¾ç½®ä¸ºæ”¶åˆ°çš„åºå·åŠ 1ï¼ŒåŒæ—¶å¯ä»¥åœ¨è¯¥æŠ¥æ–‡æ®µä¸­æºå¸¦å®¢æˆ·åˆ°æœåŠ¡å™¨çš„æ•°æ®


<br>å››æ¬¡æŒ¥æ‰‹ (four-way handshake) è¿‡ç¨‹ï¼š<img alt="Pasted image 20231114154644.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231114154644.png">

<br>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€ FIN æŠ¥æ–‡æ®µ
<br>æœåŠ¡å™¨æ”¶åˆ°è¯¥æŠ¥æ–‡åï¼Œå‘å‘é€æ–¹å›é€ä¸€ä¸ª ACK æŠ¥æ–‡æ®µ
<br>æœåŠ¡å™¨å‘é€è‡ªå·±çš„ FIN æŠ¥æ–‡æ®µ
<br>æœ€åï¼Œå®¢æˆ·å¯¹æœåŠ¡å™¨çš„ä¸­æ­¢æŠ¥æ–‡æ®µè¿›è¡Œç¡®è®¤


<br>åœ¨ä¸€ä¸ª TCP è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œè¿è¡Œåœ¨æ¯å°ä¸»æœºä¸­çš„ TCP åè®®åœ¨å„ç§ TCP çŠ¶æ€ (TCP state) ä¹‹é—´å˜è¿ <img alt="Pasted image 20231114154947.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231114154947.png" style="width: 600px; max-width: 100%;"> <img alt="Pasted image 20231114160800.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231114160800.png" style="width: 600px; max-width: 100%;">
<br>é™¤äº†å®¢æˆ·åº”ç”¨ç¨‹åºå¯ä»¥å‘é€ FIN æŠ¥æ–‡æ®µå…³é—­è¯¥è¿æ¥å¤–ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥é€‰æ‹©å…³é—­è¯¥è¿æ¥
<br>TCP RST æ ‡å¿—ä»£è¡¨ä¸€ä¸ªå¼‚å¸¸çš„ç»ˆæ­¢ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š

<br>ä¸»åŠ¨æ‹’ç»è¿æ¥å»ºç«‹ï¼šå¦‚æœæ¥æ”¶æ–¹æ”¶åˆ° SYN æŠ¥æ–‡æ®µï¼Œä½†åœ¨å¯¹åº”ç«¯å£ä¸Šæ²¡æœ‰è¿è¡ŒæœåŠ¡ï¼Œä¸å¸Œæœ›å»ºç«‹è¿æ¥ï¼Œåˆ™å¯ä»¥å‘é€ RST æŠ¥æ–‡æ®µæ¥æ‹’ç»è¿æ¥ï¼Œå‘Šè¯‰è¯¥æº"æˆ‘æ²¡æœ‰é‚£ä¸ªæŠ¥æ–‡æ®µçš„å¥—æ¥å­—ï¼Œè¯·ä¸è¦å†å‘é€è¯¥æŠ¥æ–‡æ®µäº†"ï¼Œå¦‚æœæ¥æ”¶çš„ UDP åˆ†ç»„ç›®çš„ç«¯å£ä¸ UDP å¥—æ¥å­—ä¸åŒ¹é…ï¼Œä¸»æœºä¼šå‘é€ä¸€ä¸ªç‰¹æ®Šçš„ ICMP æŠ¥æ–‡
<br>è‡´å‘½çš„åè®®é”™è¯¯ï¼šå¦‚æœä¸€ä¸ªç«¯ç‚¹æ£€æµ‹åˆ°å¯¹æ–¹è¿åäº†åè®®çš„è§„å®šæ—¶ï¼Œå‘é€ RST æŠ¥æ–‡æ®µæ¥å…³é—­è¿æ¥
<br>æœªç»æœŸæœ›çš„æ•°æ®åˆ°è¾¾ï¼šå¦‚æœä¸€ä¸ª TCP ç«¯ç‚¹æ¥æ”¶åˆ°ä¸å­˜åœ¨çš„è¿æ¥åˆ°è¾¾çš„æ•°æ®ï¼Œå¯ä»¥å‘é€ RST æŠ¥æ–‡æ®µå›å¤


<br><br>
<br>ç»å…¸çš„ Dos æ”»å‡»ï¼Œæ”»å‡»è€…å‘é€å¤§é‡ TCP SYN æŠ¥æ–‡æ®µï¼Œä½†ä¸å®Œæˆç¬¬ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼ŒæœåŠ¡å™¨ä¸æ–­ä¸ºåŠå¼€è¿æ¥åˆ†é…èµ„æºï¼Œç›´è‡³è¿æ¥èµ„æºè¢«æ¶ˆè€—æ®†å°½
<br>å¯ä»¥ä½¿ç”¨ SYN cookie æ¥è®°å¿†å¯¹åº”çš„å‘é€ç«¯ IP åœ°å€å’Œç«¯å£å·
<br><br>
<br>åˆ†ç»„é‡ä¼ æ—¶ç½‘ç»œæ‹¥å¡çš„å¾å…†ï¼Œä¸ºäº†å¤„ç†ç½‘ç»œæ‹¥å¡çš„åŸå› ï¼Œéœ€è¦ä¸€äº›æœºåˆ¶ä»¥åœ¨é¢ä¸´ç½‘ç»œæ‹¥å¡æ—¶éåˆ¶å‘é€æ–¹
<br><br>
<br>ä¾›ç»™è½½è· (offered load)ï¼šè¿è¾“å±‚å‘ç½‘ç»œä¸­å‘é€å«æœ‰åˆå§‹æ•°æ®æˆ–é‡ä¼ æ•°æ®çš„æŠ¥æ–‡æ®µçš„é€Ÿç‡
<br>è€ƒè™‘ä»¥ä¸‹å…·æœ‰å››ä¸ªå‘é€æ–¹å’Œæœ‰é™ç¼“å­˜çš„å¤šå°è·¯ç”±å™¨åŠå¤šæ¡è·¯å¾„çš„æƒ…å†µ <img alt="Pasted image 20231115090203.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231115090203.png">

<br>å‡è®¾æ¯å°ä¸»æœºéƒ½ä½¿ç”¨è¶…æ—¶ / é‡ä¼ æœºåˆ¶æ¥å®ç°å¯é æ•°æ®ä¼ è¾“ï¼Œä¸æ‰§è¡Œæµé‡æ§åˆ¶æˆ–æ‹¥å¡æ§åˆ¶ï¼Œå¿½ç•¥ç”±äºæ·»åŠ è¿è¾“å±‚å’Œè¾ƒä½å±‚é¦–éƒ¨ä¿¡æ¯äº§ç”Ÿçš„é¢å¤–å¼€é”€ï¼Œæ‰€æœ‰çš„ä¸»æœºéƒ½å…·æœ‰ç›¸åŒçš„  å€¼ï¼Œæ‰€æœ‰è·¯ç”±å™¨çš„é“¾è·¯å®¹é‡éƒ½æ˜¯  å­—èŠ‚ / ç§’ï¼Œåˆ°è¾¾ä¸»æœºåº”ç”¨å±‚çš„æ¥æ”¶é€Ÿç‡ä¸º 
<br>è€ƒè™‘ A - C è¿æ¥ï¼ŒA - C ä¸ B - D è¿æ¥å…±äº«è·¯ç”±å™¨ R2ï¼Œå¯¹äºè¾ƒå°çš„  å€¼ï¼Œè·¯ç”±å™¨å‡ ä¹ä¸å‡ºç°ç¼“å­˜æº¢å‡ºçš„æƒ…å†µï¼Œæ‰€ä»¥  çš„å¢å¤§ä¼šå¯¼è‡´  çš„å¢å¤§
<br>å½“  å¾ˆå¤§æ—¶ï¼Œç»è¿‡ R1 åˆ°è¾¾ R2 çš„ A - C æµé‡é€Ÿç‡è‡³å¤šæ˜¯ R ï¼Œå½“æ¥è‡ª B - D è¿æ¥çš„ä¾›ç»™è½½è·è¶Šæ¥è¶Šå¤§æ—¶ï¼Œç»è¿‡ R1 è½¬å‘çš„ A - C æµé‡ç›¸æ¯”ä¹‹ä¸‹å°±æ›´å°ï¼Œç”±äºä¸¤æ¡è¿æ¥çš„æµé‡éœ€è¦ä¸º R2 ä¸Šçš„æœ‰é™ç¼“å­˜ç©ºé—´ç«äº‰ï¼Œæ‰€ä»¥å½“ä¾›ç»™è½½è·è¶‹è¿‘äºâˆæ—¶ï¼ŒR2 çš„ç¼“å­˜ç©ºé—´ä¸­å‡ ä¹è¢« B - D è¿æ¥çš„æµé‡å æ»¡ï¼Œå› æ­¤ A - C è¿æ¥çš„æµé‡åœ¨  R2 ä¸Šçš„ååé‡è¶‹è¿‘äº 0 <img alt="Pasted image 20231115112824.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231115112824.png" style="width: 500px; max-width: 100%;">
<br>ç”±äºæ‹¥å¡è€Œä¸¢å¼ƒåˆ†ç»„çš„å¦ä¸€ç§ä»£ä»·ï¼šå½“ä¸€ä¸ªåˆ†ç»„æ²¿ä¸€æ¡è·¯å¾„è¢«ä¸¢å¼ƒæ—¶ï¼Œæ¯ä¸ªä¸Šæ¸¸è·¯ç”±å™¨ç”¨äºè½¬å‘è¯¥åˆ†ç»„åˆ°ä¸¢å¼ƒè¯¥åˆ†ç»„è€Œä½¿ç”¨çš„ä¼ è¾“å®¹é‡æœ€ç»ˆè¢«æµªè´¹æ‰äº†ï¼Œæ‰€ä»¥å½“é€‰æ‹©ä¸€ä¸ªåˆ†ç»„æ—¶ï¼Œè·¯ç”±å™¨æœ€å¥½ä¼˜å…ˆè€ƒè™‘é‚£äº›å·²ç»ç»å†è¿‡ä¸€å®šæ•°é‡çš„ä¸Šæ¸¸è·¯ç”±å™¨çš„åˆ†ç»„


<br><br>
<br>æ ¹æ®ç½‘ç»œå±‚æ˜¯å¦ä¸ºè¿è¾“å±‚æ‹¥å¡æ§åˆ¶æä¾›æ˜¾ç¤ºå¸®åŠ©åŒºåˆ†ï¼š

<br>ç«¯åˆ°ç«¯æ‹¥å¡æ§åˆ¶ï¼šç½‘ç»œå±‚æ²¡æœ‰ä¸ºè¿è¾“å±‚æ‹¥å¡æ§åˆ¶æä¾›æ˜¾å¼æ”¯æŒï¼Œç½‘ç»œå±‚å¯¹ç«¯ç³»ç»Ÿæ¥è¯´æ˜¯ä¸€ä¸ªé»‘ç®±ï¼Œéœ€è¦é€šè¿‡å¯¹ IO çš„è§‚å¯Ÿ (åˆ†ç»„ä¸¢å¤±ä¸æ—¶å»¶) æ¥æ¨æ–­ï¼ŒTCP é‡‡å–ç«¯åˆ°ç«¯çš„æ‹¥å¡æ§åˆ¶æ–¹æ³•
<br>ç½‘ç»œè¾…åŠ©çš„æ‹¥å¡æ§åˆ¶ ï¼šåœ¨ ATM å¯ç”¨æ¯”ç‰¹ç‡ (Available Bite Rate, ABR) æ‹¥å¡æ§åˆ¶ä¸­ï¼Œè·¯ç”±å™¨æ˜¾å¼åœ°é€šçŸ¥å‘é€æ–¹èƒ½åœ¨è¾“å‡ºé“¾è·¯ä¸Šæ”¯æŒçš„æœ€å¤§ä¸»æœºå‘é€é€Ÿç‡

<br>ç›´æ¥ç½‘ç»œåé¦ˆ, é‡‡ç”¨è·¯ç”±å™¨å‘é€é˜»å¡åˆ†ç»„ (choke packet) çš„å½¢å¼
<br>ç»ç”±æ¥æ”¶æ–¹çš„ç½‘ç»œåé¦ˆï¼Œè·¯ç”±å™¨æ ‡è®°æˆ–æ›´æ–°ä»å‘é€æ–¹æµå‘æ¥æ”¶æ–¹çš„åˆ†ç»„ä¸­çš„æŸä¸ªå­—æ®µæ¥æŒ‡ç¤ºæ‹¥å¡çš„äº§ç”Ÿï¼Œè‡³å°‘éœ€è¦ 1 RTT




<br><br>
<br>TCP å‘é€æ–¹é™åˆ¶å‘å…¶è¿æ¥å‘é€æµé‡çš„æ–¹å¼

<br>è·Ÿè¸ªæ‹¥å¡çª—å£ (congestion window, cwnd)ï¼Œéœ€è¦æ»¡è¶³ 
<br>ä¸Šè¿°çº¦æŸé™åˆ¶äº†é€æ–¹ä¸­æœªè¢«ç¡®è®¤çš„æ•°æ®é‡ï¼Œå› æ­¤é—´æ¥åœ°é™åˆ¶äº†å‘é€æ–¹çš„å‘é€é€Ÿç‡ï¼Œå‘é€æ–¹çš„å‘é€é€Ÿç‡å¤§æ¦‚æ˜¯  å­—èŠ‚ / ç§’


<br>TCP å‘é€æ–¹æ„ŸçŸ¥è·¯å¾„ä¸Šå‡ºç°æ‹¥å¡çš„æ–¹å¼

<br>å‘é€æ–¹å®šæ—¶å™¨è¶…æ—¶
<br>å‘é€æ–¹æ¥æ”¶åˆ° 3 ä¸ªå†—ä½™ ACK 
<br>TCP å°†ç¡®è®¤çš„åˆ°è¾¾ä½œä¸ºæ­£å¸¸çš„æŒ‡ç¤ºï¼Œå¹¶æ ¹æ®ç¡®è®¤åˆ°è¾¾çš„é€Ÿç‡æ¥è°ƒæ•´å¢å¤§æ‹¥å¡çª—å£é•¿åº¦çš„è¿…é€Ÿç¨‹åº¦ (äºŒé˜¶å¯¼)ï¼Œæ‰€ä»¥ TCP æ˜¯è‡ªè®¡æ—¶ (self-clocking) çš„


<br>TCP ç¡®å®šå‘é€é€Ÿç‡çš„æ–¹å¼ï¼šå‘é€å¤ªå¿«ï¼Œä¼šå¯¼è‡´æ‹¥å¡å´©æºƒã€‚å‘é€å¤ªæ…¢ï¼Œå°±ä¸èƒ½å……åˆ†åˆ©ç”¨ç½‘ç»œçš„å¸¦å®½

<br>ä¸¢åŒ…æ„å‘³ç€æ‹¥å¡ï¼Œå½“é‡åˆ°ä¸¢å¤±æŠ¥æ–‡æ®µæ—¶åº”å½“é™ä½ TCP å‘é€æ–¹çš„é€Ÿç‡
<br>ç¡®è®¤æŠ¥æ–‡æ®µæŒ‡ç¤ºæ­£åœ¨äº¤ä»˜ï¼Œå½“ç¡®è®¤æŠ¥æ–‡æ®µåˆ°è¾¾æ—¶åº”å½“å¢åŠ å‘é€æ–¹çš„é€Ÿç‡
<br>å¸¦å®½æ¢æµ‹


<br>TCP æ‹¥å¡æ§åˆ¶ç®—æ³• (TCP congestion control algorithm)ï¼šåŠ æ€§å¢ã€ä¹˜æ€§å‡ (Additive-Increase, Multiplicative-Decrease, AIMD) æ‹¥å¡æ§åˆ¶æ–¹å¼ <img alt="Pasted image 20231115162141.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231115162141.png">

<br>æ…¢å¯åŠ¨ (slow-start)

<br>TCP è¿æ¥å¼€å§‹æ—¶ï¼Œcwnd å¸¸ç½®ä¸ºä¸€ä¸ª MSS çš„è¾ƒå°å€¼ï¼Œæ¯å½“ä¼ è¾“çš„æŠ¥æ–‡æ®µè¢«ç¡®è®¤ cwnd å°±å¢åŠ ä¸€å€ 
<br>å¦‚æœå‘é€æ–¹æ£€æµ‹åˆ°æ‹¥å¡ (è¶…æ—¶) æ—¶ï¼Œå°†ç¬¬äºŒä¸ªçŠ¶æ€å˜é‡çš„å€¼ ssthresh è®¾ç½®ä¸º cwnd / 2ï¼Œå°† cwnd è®¾ç½®ä¸º 1
<br>å¦‚æœå­˜åœ¨ ssthreshï¼Œå½“ cwnd çš„å€¼ç­‰äº ssthresh æ—¶ï¼Œç»“æŸæ…¢å¯åŠ¨å¹¶ä¸”å°† TCP è½¬ä¸ºæ‹¥å¡é¿å…æ¨¡å¼
<br>å¦‚æœæ£€æµ‹åˆ°ä¸‰ä¸ªå†—ä½™ ACKï¼ŒTCP æ‰§è¡Œå¿«é€Ÿé‡ä¼ å¹¶è¿›å…¥å¿«é€Ÿæ¢å¤çŠ¶æ€


<br>æ‹¥å¡é¿å…

<br>æ¯ä¸ª RTT æŒ‡å°† cwnd çš„å€¼å¢åŠ ä¸€ä¸ª MSS ï¼Œç­‰åŒäº ACK æ¯æ¬¡å°† cwnd çš„å€¼å¢åŠ  (MSS / cwnd) x MSS å­—èŠ‚
<br>å½“è¶…æ—¶ä¸¢åŒ…äº‹ä»¶å‡ºç°æ—¶ï¼Œssthresh çš„å€¼è¢«æ›´æ–°ä¸º cwnd å€¼çš„ä¸€åŠ
<br>å½“æ”¶åˆ°ä¸‰ä¸ªå†—ä½™ ACK æ—¶ï¼ŒTCP å°† ssthresh çš„å€¼è®°å½•ä¸º cwnd å€¼çš„ä¸€åŠï¼Œç„¶åè¿›å…¥å¿«é€Ÿæ¢å¤çŠ¶æ€


<br>å¿«é€Ÿæ¢å¤

<br>å¯¹äºè¿›å…¥å¿«é€Ÿæ¢å¤çŠ¶æ€çš„ç¼ºå¤±æŠ¥æ–‡æ®µï¼Œå¯¹æ¯ä¸ªæ”¶åˆ°çš„å†—ä½™ ACK ï¼Œcwnd å€¼å¢åŠ ä¸€ä¸ª MSS
<br>æœ€ç»ˆå½“å¯¹ä¸¢å¤±æŠ¥æ–‡æ®µçš„ ACK åˆ°è¾¾æ—¶ï¼Œ TCP åœ¨é™ä½ cwnd åè¿›å…¥æ‹¥å¡é¿å…çŠ¶æ€
<br>å‡ºç°è¶…æ—¶ï¼Œå°† ssthresh çš„å€¼è¢«æ›´æ–°ä¸º cwnd å€¼çš„ä¸€åŠï¼Œ cwnd è®¾ç½®ä¸º 1ï¼Œè¿›å…¥æ…¢å¯åŠ¨çŠ¶æ€




<br>TCP è¿æ¥çš„å¹³å‡ååé‡ <img alt="Pasted image 20231115170222.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231115170222.png"> 
<br>ç»é«˜å¸¦å®½è·¯å¾„çš„ TCP 
<br><br>
<br>å‡è®¾ä»…æœ‰ TCP ç©¿è¿‡ç“¶é¢ˆé“¾è·¯ï¼Œæ‰€æœ‰çš„è¿æ¥å…·æœ‰ç›¸åŒçš„ RTT å€¼ï¼Œå¯¹äºä¸€ä¸ªä¸»æœº - ç›®çš„åœ°è€Œè¨€åªæœ‰ä¸€æ¡ TCP è¿æ¥ä¸ä¹‹ç›¸å…³è”ï¼ŒTCP è¶‹äºåœ¨å¤šæ¡è¿æ¥ä¹‹é—´å¹³ç­‰åœ°å…±äº«å¸¦å®½
<br>å½±å“ TCP æ‹¥å¡æ§åˆ¶å…¬å¹³æ€§çš„å› ç´ ï¼š

<br>RTTï¼šå¤šæ¡è¿æ¥å…±äº«ä¸€ä¸ªå…±åŒçš„ç“¶é¢ˆé“¾è·¯æ—¶å…·æœ‰è¾ƒå° RTT çš„è¿æ¥èƒ½å¤Ÿåœ¨é“¾è·¯ç©ºé—²æ—¶æ›´å¿«åœ°æŠ¢å å¯ç”¨å¸¦å®½ï¼Œå°†æ¯”å…·æœ‰è¾ƒå¤§ RTT çš„è¿æ¥äº«ç”¨æ›´é«˜çš„ååé‡
<br>UDPï¼šUDP æ²¡æœ‰å†…ç½®çš„æ‹¥å¡æ§åˆ¶ï¼Œæœ‰å¯èƒ½å‹åˆ¶ TCP æµé‡
<br>å¹¶è¡Œ TCP è¿æ¥ï¼šWeb æµè§ˆå™¨é€šå¸¸ä½¿ç”¨å¤šä¸ªå¹¶è¡Œ TCP è¿æ¥æ¥ä¼ é€ä¸€ä¸ª Web é¡µä¸­çš„å¤šä¸ªå¯¹è±¡ï¼Œå¤šæ¡å¹¶è¡Œè¿æ¥åœ¨æ‹¥å¡é“¾è·¯ä¸­é€šå¸¸ä¼šæŠ¢å æ›´å¤šçš„å¸¦å®½


<br><br>
<br>æ˜ç¡®æ‹¥å¡é€šå‘Š (Explicit Congestion Notification, ECN)ï¼šç½‘ç»œæ˜ç¡®å‘å‘é€æ–¹å’Œæ¥æ”¶æ–¹å‘å‡ºæ‹¥å¡ä¿¡å·
<br>ç”¨äºç½‘ç»œè¾…åŠ©æ‹¥å¡æ§åˆ¶çš„æ ‡å¿—ä½ï¼š<a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > ^867fc3" data-href="è¿è¾“å±‚#^867fc3" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#^867fc3" class="internal-link" target="_self" rel="noopener">Accurate ECN</a> <a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > ^7eba8b" data-href="è¿è¾“å±‚#^7eba8b" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#^7eba8b" class="internal-link" target="_self" rel="noopener">ECE</a>
<br>RFC 3168 [@floydAdditionExplicitCongestion2001] æ¨èä»…å½“æ‹¥å¡æŒç»­ä¸æ–­å­˜åœ¨æ—¶æ‰è®¾ç½® ECN æ¯”ç‰¹
<br>å¯¹äºå…·æœ‰ ECE æ‹¥å¡æŒ‡ç¤ºçš„ ACK ï¼ŒTCP å‘é€æ–¹å°†æ‹¥å¡çª—å£å‡åŠä½œä¸ºå›åº”ï¼Œå¹¶åœ¨ä¸‹ä¸ªå‘é€æ–¹åˆ°æ¥æ”¶æ–¹çš„æŠ¥æ–‡æ®µä¸­å¯¹ <a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > ^2d9580" data-href="è¿è¾“å±‚#^2d9580" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#^2d9580" class="internal-link" target="_self" rel="noopener">CWR</a> (æ‹¥å¡çª—å£ç¼©å‡) ç½®ä½
<br>å…¶ä»–èƒ½åˆ©ç”¨ç½‘ç»œå±‚å‘é€ ECN ä¿¡å·çš„åè®®æœ‰æ•°æ®æŠ¥æ‹¥å¡æ§åˆ¶åè®® (Datagram Congestion Control Protocol, DCCP)ï¼ŒDCTCP (æ•°æ®ä¸­å¿ƒ TCP) 
]]></description><link>campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html</link><guid isPermaLink="false">Campus/Chinese-Notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.md</guid><pubDate>Fri, 22 Dec 2023 11:04:20 GMT</pubDate><enclosure url="campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231107111221.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231107111221.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[é“¾è·¯å±‚æ¦‚è¿°]]></title><description><![CDATA[ 
 <br>
<br>å¹¿æ’­ä¿¡é“ï¼šç”¨äºè¿æ¥æœ‰çº¿å±€åŸŸç½‘ã€å«æ˜Ÿç½‘å’Œ<a data-tooltip-position="top" aria-label="å› ç‰¹ç½‘ > ^57ab0b" data-href="å› ç‰¹ç½‘#^57ab0b" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/å› ç‰¹ç½‘.html#^57ab0b" class="internal-link" target="_self" rel="noopener">æ··åˆå…‰çº¤åŒè½´ç”µç¼†</a> (Hybird Fiber Coaxial cable, HFC) æ¥å…¥ç½‘ä¸­çš„å¤šè½´ï¼Œéœ€è¦åª’ä½“è®¿é—®åè®®æ¥åè°ƒå¸§ä¼ è¾“
<br>ç‚¹å¯¹ç‚¹é€šä¿¡é“¾è·¯
<br><br>
<br>æœ¬ç« ä¸ºæ–¹ä¾¿è®¨è®ºï¼Œå°†è¿è¡Œé“¾è·¯å±‚åè®®çš„ä»»ä½•è®¾å¤‡éƒ½ç§°ä¸ºèŠ‚ç‚¹ (node)ï¼ŒæŠŠæ²¿ç€é€šä¿¡è·¯å¾„è¿æ¥ç›¸é‚»èŠ‚ç‚¹çš„é€šä¿¡ä¿¡é“ç§°ä¸ºé“¾è·¯ (link)
<br>é€šè¿‡ç‰¹å®šé“¾è·¯æ—¶ï¼Œä¼ è¾“èŠ‚ç‚¹å°†æ•°æ®æŠ¥å°è£…åœ¨é“¾è·¯å±‚å¸§ä¸­ï¼Œå¹¶å°†è¯¥å¸§ä¼ è¾“åˆ°é“¾è·¯ä¸­
<br><br>
<br>æˆå¸§ (framing)ï¼šåœ¨æ¯ä¸ªç½‘ç»œå±‚æ•°æ®æŠ¥ç»é“¾è·¯ä¼ é€å‰ï¼Œé“¾è·¯å±‚åè®®å°†ç½‘ç»œå±‚æ•°æ®æŠ¥ç”¨é“¾è·¯å±‚å¸§å°è£…èµ·æ¥ï¼Œå¸§çš„ç»“æ„ç”±é“¾è·¯å±‚åè®®è§„å®š
<br>é“¾è·¯æ¥å…¥ï¼šåª’ä½“è®¿é—®æ§åˆ¶åè®® (Medium Access Control, MAC) è§„å®šäº†å¸§åœ¨é“¾è·¯ä¸Šä¼ è¾“çš„è§„åˆ™ï¼Œå¯¹äºç‚¹å¯¹ç‚¹é“¾è·¯ï¼Œæ— è®ºä½•æ—¶é“¾è·¯ç©ºé—²éƒ½èƒ½å‘é€å¸§ï¼Œå¤šä¸ªèŠ‚ç‚¹å…±äº«å¹¿æ’­é“¾è·¯æ—¶ï¼ŒMAC åè®®ç”¨äºåè°ƒå¤šä¸ªèŠ‚ç‚¹çš„å¸§ä¼ è¾“
<br>å¯é äº¤ä»˜ï¼šä¿è¯æ— å·®é”™åœ°ç»é“¾è·¯å±‚ç§»åŠ¨æ¯ä¸ªç½‘ç»œå±‚æ•°æ®æŠ¥ï¼Œé“¾è·¯å±‚çš„å¯é äº¤ä»˜æœåŠ¡é€šå¸¸æ˜¯é€šè¿‡ç¡®è®¤å’Œé‡ä¼ å–å¾—çš„ï¼Œç›®çš„æ˜¯åœ¨æœ¬åœ°çº æ­£ä¸€ä¸ªå·®é”™ (é“¾è·¯ä¸¤ç«¯)ï¼Œè€Œä¸æ˜¯ç”¨è¿‡è¿è¾“å±‚æˆ–åº”ç”¨å±‚åè®®è¿›è¡Œç«¯åˆ°ç«¯æ•°æ®é‡ä¼ 
<br>å·®é”™æ£€æµ‹å’Œçº æ­£ï¼šè®¸å¤šé“¾è·¯å±‚åè®®æä¾›ä¸€ç§è®©å‘é€èŠ‚ç‚¹åœ¨å¸§ä¸­åŒ…æ‹¬å·®é“…æ£€æµ‹æ¯”ç‰¹ï¼Œè®©æ¥æ”¶èŠ‚ç‚¹è¿›è¡Œå·®é”™æ£€æŸ¥çš„æœºåˆ¶ï¼Œä»¥æ­¤æ¥å®Œæˆå·®é”™æ£€æµ‹
<br><br>
<br>é“¾è·¯å±‚çš„ä¸»ä½“éƒ¨åˆ†åœ¨ç½‘ç»œé€‚é…å™¨ä¸­å®ç° (network adapter)ï¼Œç½‘ç»œé€‚é…å™¨åˆç§°ä½œç½‘ç»œæ¥å£å¡ (Network Interface Card, NIC)ï¼Œä½äºç½‘ç»œé€‚é…å™¨æ ¸å¿ƒçš„æ˜¯é“¾è·¯å±‚æ§åˆ¶å™¨
<br>å‘é€ç«¯åè®®æ ˆå–å¾—äº†åè®®æ ˆè¾ƒé«˜å±‚ç”Ÿæˆå¹¶å­˜å‚¨åœ¨ä¸»æœºå†…å­˜ä¸­çš„æ•°æ®æŠ¥ï¼Œåœ¨é“¾è·¯å±‚å¸§ä¸­å°è£…æ•°æ®æŠ¥ï¼Œç„¶åéµå¾ªé“¾è·¯æ¥å…¥åè®®å°†è¯¥å¸§ä¼ è¿›é€šä¿¡é“¾è·¯ä¸­ <img alt="Pasted image 20231130170308.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231130170308.png">
<br><br>
<br>æ¯”ç‰¹çº§å·®é”™æ£€æµ‹å’Œçº æ­£ (bit-level error detection and correction)ï¼šé€šå¸¸æ˜¯ä¸¤ç§æœåŠ¡ (æ£€æµ‹ / çº æ­£)ï¼Œä»ä¸€ä¸ªèŠ‚ç‚¹å‘é€åˆ°å¦ä¸€ä¸ªç‰©ç†ä¸Šè¿æ¥çš„é‚»è¿‘èŠ‚ç‚¹çš„é“¾è·¯å±‚å¸§ä¸­çš„æ¯”ç‰¹æŸä¼¤è¿›è¡Œæ£€æµ‹å’Œçº æ­£
<br>å‘é€èŠ‚ç‚¹ä½¿ç”¨å·®é”™æ£€æµ‹å’Œçº æ­£æ¯”ç‰¹ (Error-Detection and-Correction, EDC) å¢å¼ºæ•°æ® D ï¼Œè¦ä¿æŠ¤çš„æ•°æ®åŒ…æ‹¬ç½‘ç»œå±‚æ•°æ®æŠ¥å’Œé“¾è·¯å¸§é¦–éƒ¨ <img alt="Pasted image 20231130173734.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231130173734.png">
<br>å³ä½¿é‡‡ç”¨å·®é”™æ£€æµ‹æ¯”ç‰¹ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨æœªæ£€å‡ºæ¯”ç‰¹å·®é”™ (undetected bit error)
<br>æ£€æµ‹å·®é”™çš„ä¸‰ç§æŠ€æœ¯åŒ…æ‹¬å¥‡å¶æ ¡éªŒã€æ£€éªŒå’Œæ–¹æ³•å’Œå¾ªç¯å†—ä½™æ£€æµ‹
<br><br>
<br>å¶ / å¥‡æ ¡éªŒæ–¹æ¡ˆï¼Œå‘é€æ–¹åŒ…å«ä¸€ä¸ªé™„åŠ çš„æ¯”ç‰¹ï¼Œä½¿  æ¯”ç‰¹ä¸­  çš„æ€»æ•°æ˜¯å¶æ•° / å¥‡æ•°
<br>äºŒç»´å¥‡å¶æ ¡éªŒæ–¹æ¡ˆ (two-dimension parity)ï¼šå¯æ£€æµ‹å’Œçº æ­£å•ä¸ªæ¯”ç‰¹å·®é”™ï¼Œå¯æ£€æµ‹ä½†ä¸èƒ½çº æ­£ä¸¤ä¸ªæ¯”ç‰¹å·®é”™ï¼Œè¡Œå¥‡å¶æ¯”ç‰¹å’Œåˆ—å¥‡å¶æ¯”ç‰¹åŠ ä¸Šä¸€ä¸ªé™„åŠ æ¯”ç‰¹æ„æˆäº†é“¾è·¯å±‚å¸§çš„å·®é”™æ£€æµ‹æ¯”ç‰¹ <img alt="Pasted image 20231130180250.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231130180250.png" style="width: 500px; max-width: 100%;">
<br>å‘å‰çº é”™ (Forward Error Correction, FEC)ï¼šæ¥æ”¶æ–¹æ£€æµ‹å’Œçº æ­£å·®é”™çš„èƒ½åŠ›ï¼Œå…è®¸åœ¨æ¥æ”¶æ–¹ç«‹åˆ»çº æ­£å·®é”™ï¼Œé¿å…äº†ä¸å¾—ä¸ç­‰å¾…çš„å¾€è¿”æ—¶å»¶
<br><br>
<br>d æ¯”ç‰¹æ•°æ®è¢«ä½œä¸º k æ¯”ç‰¹æ•´æ•°çš„åºåˆ—å¤„ç†
<br><a data-tooltip-position="top" aria-label="è¿è¾“å±‚ > ^403ed7" data-href="è¿è¾“å±‚#^403ed7" href="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/è¿è¾“å±‚.html#^403ed7" class="internal-link" target="_self" rel="noopener">å› ç‰¹ç½‘æ£€éªŒå’Œ</a> (Internet checksum) å°†æ•°æ®å­—èŠ‚ä½œä¸º 16 æ¯”ç‰¹çš„æ•´æ•°å¯¹å¾…å¹¶æ±‚å’Œï¼Œå’Œçš„åç å½¢æˆäº†æºå¸¦åœ¨æŠ¥æ–‡æ®µé¦–éƒ¨çš„å› ç‰¹ç½‘æ£€éªŒå’Œ
<br>TCP å’Œ UDP ä¸­å¯¹æ‰€æœ‰å­—æ®µéƒ½è®¡ç®—å› ç‰¹ç½‘æ£€éªŒå’Œï¼ŒXTP å¯¹é¦–éƒ¨è®¡ç®—ä¸€ä¸ªæ£€éªŒå’Œå¯¹æ•´ä¸ªåˆ†ç»„è®¡ç®—å¦ä¸€ä¸ªæ£€éªŒå’Œ
<br>TCP å’Œ UDP çš„æ£€éªŒå’Œåªç”¨äº† 16 æ¯”ç‰¹ï¼Œä¸é“¾è·¯å±‚ CRC ç›¸æ¯”æä¾›ç›¸å¯¹å¼±çš„å·®é”™ä¿æŠ¤ï¼Œå› ä¸ºè¿è¾“å±‚æ£€éªŒå’Œé€šå¸¸ç”±æ“ä½œç³»ç»Ÿä¸­çš„è½¯ä»¶å®ç°ï¼Œé“¾è·¯å±‚çš„å·®é”™æ£€éªŒé€šå¸¸åœ¨é€‚é…å™¨ä¸­ç”¨ä¸“ç”¨çš„ç¡¬ä»¶å®ç°ï¼Œèƒ½å¤Ÿæ‰§è¡Œæ›´å¤æ‚çš„ CRC æ“ä½œ
<br><br>
<br>å¾ªç¯å†—ä½™æ£€æµ‹ (Cyclic Redundancy Check, CRC) ç¼–ç ï¼šä¹Ÿç§°å¤šé¡¹å¼ç¼–ç  (polynomial code) ï¼Œå°†è¦å‘é€çš„æ¯”ç‰¹ä¸²çœ‹ä½œç³»æ•°æ˜¯ 0 å’Œ 1 çš„ä¸€ä¸ªå¤šé¡¹å¼ï¼Œå¯¹æ¯”ç‰¹ä¸²çš„æ“ä½œè¢«è§£é‡Šä¸ºå¤šé¡¹å¼ç®—æœ¯
<br>ç”Ÿæˆå¤šé¡¹å¼ (generator)  ï¼šå‘é€æ–¹å’Œæ¥æ”¶æ–¹åå•†çš„  æ¯”ç‰¹æ¨¡å¼
<br>å¯¹äºä¸€ä¸ªç»™å®šçš„æ•°æ®æ®µ  ï¼Œå‘é€æ–¹è¦é€‰æ‹©  ä¸ªé™„åŠ æ¯”ç‰¹  å°†å®ƒé™„åŠ åˆ°  ä¸Šï¼Œä½¿å¾—å¾—åˆ°çš„  æ¯”ç‰¹æ¨¡å¼ç”¨æ¨¡ 2 ç®—æ•° [@ModularArithmetic2023] æ°å¥½èƒ½è¢«  æ•´é™¤ <img alt="Pasted image 20231201150249.png" src="/campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231201150249.png">
<br> çš„è®¡ç®—

<br>éœ€è¦æ»¡è¶³  
<br>å¯¹ç­‰å¼ä¸¤è¾¹å¼‚æˆ–  å¾—åˆ°  
<br>è¯¥ç­‰å¼è¯´æ˜ 


<br>å›½é™…æ ‡å‡†å®šä¹‰çš„ CRC-32 æ ‡å‡†è¢«å¤šç§é“¾è·¯çº§ IEEE åè®®é‡‡ç”¨ï¼Œä½¿ç”¨çš„ä¸€ä¸ªç”Ÿæˆå¤šé¡¹å¼æ˜¯


<br><br>
<br>ç‚¹å¯¹ç‚¹é“¾è·¯ (point-to-point link)ï¼šç”±é“¾è·¯ä¸€ç«¯çš„å•ä¸ªå‘é€æ–¹å’Œé“¾è·¯çš„å¦ä¸€ç«¯çš„å•ä¸ªæ¥æ”¶æ–¹ç»„æˆï¼Œè®¸å¤šé“¾è·¯å±‚åè®®éƒ½æ˜¯ä¸ºç‚¹å¯¹ç‚¹é“¾è·¯è®¾è®¡çš„ï¼Œå¦‚ç‚¹å¯¹ç‚¹åè®® (point-to-point protocol, PPP) å’Œé«˜çº§æ•°æ®é“¾è·¯æ§åˆ¶ (high-level data link control, HDLC)
<br>å¹¿æ’­é“¾è·¯ (broadcast link)ï¼šèƒ½å¤Ÿè®©å¤šä¸ªå‘é€å’Œæ¥å—èŠ‚ç‚¹éƒ½è¿æ¥åˆ°ç›¸åŒçš„ã€å•ä¸€çš„ã€å…±äº«çš„å¹¿æ’­ä¿¡é“ä¸Šï¼Œå½“ä»»ä½•èŠ‚ç‚¹ä¼ è¾“ä¸€ä¸ªå¸§æ—¶ï¼Œä¿¡é“å¹¿æ’­è¯¥å¸§ï¼Œæ¯ä¸ªå…¶ä»–èŠ‚ç‚¹éƒ½æ”¶åˆ°ä¸€ä¸ªå‰¯æœ¬
<br>å¤šè·¯è®¿é—®é—®é¢˜ (multiple access problem)ï¼šåè°ƒå¤šä¸ªå‘é€å’Œæ¥å—èŠ‚ç‚¹å¯¹ä¸€ä¸ªå…±äº«å¹¿æ’­ä¿¡é“çš„è®¿é—®
<br>ç¢°æ’ (collide)ï¼šå¤šä¸ªèŠ‚ç‚¹å¯èƒ½ä¼šåŒæ—¶ä¼ è¾“å¸§ï¼Œæ­¤æ—¶æ‰€æœ‰èŠ‚ç‚¹åŒæ—¶æ¥æ”¶å¸§ï¼Œä¼ è¾“çš„å¸§åœ¨æ¥æ”¶æ–¹å¤„ç¢°æ’ï¼Œæ¶‰åŠç¢°æ’çš„æ‰€æœ‰å¸§éƒ½ä¸¢å¤±äº†
<br>å¤šè·¯è®¿é—®åè®®çš„ç±»å‹

<br>ä¿¡é“åˆ’åˆ†åè®® (channel partitioning protocol)
<br>éšæœºæ¥å…¥åè®® (random access protocol)
<br>è½®æµåè®® (taking-turns protocol)


<br><br>
<br>æ—¶åˆ†å¤šè·¯å¤ç”¨ (TDM)
<br>é¢‘åˆ†å¤šè·¯å¤ç”¨ (FDM)
<br>ç åˆ†å¤šå€ (Code Division Multiple Access, CDMA)
<br><br>]]></description><link>campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/é“¾è·¯å±‚å’Œå±€åŸŸç½‘.html</link><guid isPermaLink="false">Campus/Chinese-Notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/é“¾è·¯å±‚å’Œå±€åŸŸç½‘.md</guid><pubDate>Mon, 25 Dec 2023 03:54:38 GMT</pubDate><enclosure url="campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231130170308.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;campus/chinese-notes/è®¡ç®—æœºç§‘å­¦/è®¡ç®—æœºç½‘ç»œ/attachments/pasted-image-20231130170308.png&quot;&gt;&lt;/figure&gt;</content:encoded></item><item><title><![CDATA[ğŸŒŸ Course-Notes]]></title><description><![CDATA[ 
 <br><br>Course-Note is a repository that contains Whiteâ€™s study materials and notes, used to document the process of acquiring knowledge.<br><img style="border-radius: 15px;" src="https://image.wh1te.dev/IMG_6931.png" referrerpolicy="no-referrer">]]></description><link>readme.html</link><guid isPermaLink="false">README.md</guid><pubDate>Fri, 22 Dec 2023 11:04:20 GMT</pubDate><enclosure url="https://image.wh1te.dev/IMG_6931.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src=&quot;https://image.wh1te.dev/IMG_6931.png&quot;&gt;&lt;/figure&gt;</content:encoded></item></channel></rss>